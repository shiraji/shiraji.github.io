<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Oss | Shiraji's Blog]]></title>
  <link href="http://shiraji.github.io/blog/categories/oss/atom.xml" rel="self"/>
  <link href="http://shiraji.github.io/"/>
  <updated>2016-07-31T11:12:21+09:00</updated>
  <id>http://shiraji.github.io/</id>
  <author>
    <name><![CDATA[Shiraji]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[How to Kontribute (for Japanese)]]></title>
    <link href="http://shiraji.github.io/blog/2016/07/14/how-to-kontribute/"/>
    <updated>2016-07-14T13:07:08+09:00</updated>
    <id>http://shiraji.github.io/blog/2016/07/14/how-to-kontribute</id>
    <content type="html"><![CDATA[<p>This entry is for Japanese. For English speaker, please refer <a href="https://github.com/JetBrains/kotlin">kotlin repo</a></p>

<h1>最初に</h1>

<p>kotlinにcontributeし始めました。ドキュメントに書いてない部分があったので、主に自分用になりますが、書いておきます。</p>

<p>この文章は2016/07に書かれたので、その後、contribute方法が変わっているかもしれません。</p>

<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<!-- 728x90 -->


<p><ins class="adsbygoogle"
     style="display:inline-block;width:728px;height:90px"
     data-ad-client="ca-pub-3940616565912592"
     data-ad-slot="7693358062"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>




<!-- more -->


<p>contributeする前に<a href="https://github.com/JetBrains/kotlin/blob/master/ReadMe.md">README</a>は必ず読み込んでください。</p>

<h1>開発環境</h1>

<h2>JDK周り</h2>

<p>特に、JDKの設定は複雑です。jdk1.6, 1.7, 1.8全てが必要で、それらをドキュメント通り指定します。</p>

<pre><code>JDK_17=`/usr/libexec/java_home -v 1.7`
</code></pre>

<p>こんな感じで設定していきました。</p>

<h2>build</h2>

<p>pullには結構時間かかります。buildコマンドはドキュメントにある通り、</p>

<pre><code>ant -f update_dependencies.xml
ant -f build.xml
</code></pre>

<p>kotlin開発用プラグインのインストールも必要です。</p>

<p>全てが揃わない限り、ビルド出来ません。このあたりで断念するのはもったいないので、わからなければ、slackのkotlinlangのkontributorチャンネルで聞いてください。</p>

<p>kotlinlangのslackは<a href="https://kotlinlang.org/community.html%E3%81%93%E3%81%93%E3%81%AB%E8%A9%B3%E7%B4%B0%E3%81%8C%E3%81%82%E3%82%8A%E3%81%BE%E3%81%99%E3%80%82">https://kotlinlang.org/community.html%E3%81%93%E3%81%93%E3%81%AB%E8%A9%B3%E7%B4%B0%E3%81%8C%E3%81%82%E3%82%8A%E3%81%BE%E3%81%99%E3%80%82</a></p>

<h2>run</h2>

<p>.idea/runConfigurationを見てもらうとわかるのですが、かなり多くのrun設定が含まれています。</p>

<p>ビルドが成功すれば、それらをrunするだけで、動きます。IDEAをrunすると自分の修正を取り込んだIntellijが立ち上がります。</p>

<h3>run test</h3>

<p>UnitテストもIDEAなどと同じでrun設定から起動します。</p>

<p>一つ一つのテストを起動することも出来ますが、working directoryがプロジェクトrootを指定しない限り動かないので注意。All IDEA Plugin Testsの設定を参考にしてください。</p>

<h3>Plugin &ldquo;GitHub&rdquo; was not loaded: required plugin &ldquo;Git4Idea&rdquo; not installed.</h3>

<p><code>ideaSDK/config-idea</code>の中身を全て消せばいいらしい。</p>

<p>でもそれで動くマシンと動かないマシンがあった。これに関しては謎。動かないマシンはもう一回環境構築しなおしてみます。</p>

<h4>追記</h4>

<p>理由がわかりました。テスト時にSDKに設定されているプラグインを全て読み込みます。</p>

<p><code>File &gt; Project Structure &gt; 1.8 &gt; Classpath</code></p>

<p>私の場合、ここに、CE版のgithubプラグインのパスが設定されていました。これを削除すると動くようになりました。</p>

<p>別プラグイン開発で使っていたものが残っていました。</p>

<h1>開発</h1>

<p>READMEにもありますが、kotlinにはまだまだいっぱいやることがあるので、contributeし放題です。</p>

<p><a href="https://youtrack.jetbrains.com/oauth?state=%2Fissues%2FKT%3Fq%3Dtag%3A%2520%257BUp%2520For%2520Grabs%257D%2520%2523Unresolved">YouTrack</a>からやりたいものを選んで下さい。</p>

<p>そのスレッドにやるわこれ！とコメントすると良いです。やっていいのかわからない場合は、kontributorチャンネルでやっていいか？という質問を投げて下さい。JetBrainsの営業時間になればだいたい回答が来ます。</p>

<h2>ブランチ名</h2>

<p>特にルールないらしい。なんでも良い。masterはさすがにマナー違反だと思う。</p>

<h2>コミットメッセージ</h2>

<p>あんまりルールがあるように見えない。<code>#KT-12345 Fixed</code>はつけたほうが良さ気。</p>

<h2>Pull Request</h2>

<p>特に気にせず投げてOK。</p>

<p>投げた後に、そのURLを対象のYouTrackのissueのコメントに貼り付けて欲しいとのこと。</p>

<h2>マージ</h2>

<p>マージはcherry-pick？でマージ先をJetBrainsの中の人がやってくれる。微修正までしてくれる。Authorは自分になる。(CommiterがJBの中の人。)</p>

<p>こんな感じ。</p>

<p><a href="https://github.com/JetBrains/kotlin/commits?author=shiraji">https://github.com/JetBrains/kotlin/commits?author=shiraji</a></p>

<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<!-- 728x90 -->


<p><ins class="adsbygoogle"
     style="display:inline-block;width:728px;height:90px"
     data-ad-client="ca-pub-3940616565912592"
     data-ad-slot="7693358062"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>


<h1>雑感</h1>

<p>殺伐としておらず、やりたい！と手をあげたらやらせてくれる。ちょっとわかんね。となっても質問すれば教えてくれる。</p>

<p>kontributorチャンネルで聞けばだいたい問題は解決する。やってほしいIssueとかも聞けば答えてくれる。非常にやりやすい感じでした。</p>

<p>IDE周りは今まで結構コード書いてたり読んでたりしているので、引き続きcontributeしていこうかなと考えています。</p>
]]></content>
  </entry>
  
</feed>
