<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Shiraji's Blog]]></title>
  <link href="http://shiraji.github.io/atom.xml" rel="self"/>
  <link href="http://shiraji.github.io/"/>
  <updated>2016-05-16T22:54:29+09:00</updated>
  <id>http://shiraji.github.io/</id>
  <author>
    <name><![CDATA[Shiraji]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Difference Between Generating Java and Generating Kotlin for Developing IntelliJ Plugin]]></title>
    <link href="http://shiraji.github.io/blog/2016/05/14/difference-between-psijavafile-and-ktfile/"/>
    <updated>2016-05-14T23:33:07+09:00</updated>
    <id>http://shiraji.github.io/blog/2016/05/14/difference-between-psijavafile-and-ktfile</id>
    <content type="html"><![CDATA[<h1>Motivation</h1>

<p>I am a maintainer of <a href="https://github.com/shiraji/permissions-dispatcher-plugin">PermissionsDispatcher Plugin</a> which generates Java and Kotlin for <a href="https://github.com/hotchemi/PermissionsDispatcher">PermissionsDispatcher</a>
Since Kotlin is getting famous for Android developers, I thought IntelliJ plugins, which generate Android code, should support both Java and Kotlin. (By the way, <a href="http://blog.jetbrains.com/kotlin/2016/05/kotlin-1-0-2-is-here/">Kotlin 1.0.2</a> now supports Android lint! This definitely will lead more developers use Kotlin!)</p>

<p>However, while I was developing this plugin, I found really hard to generate both Java and Kotlin code.</p>

<p>So, this blog post describes what are the differences between generating Java and generating Kotlin using IntelliJ plugin.</p>

<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<!-- 728x90 -->


<p><ins class="adsbygoogle"
     style="display:inline-block;width:728px;height:90px"
     data-ad-client="ca-pub-3940616565912592"
     data-ad-slot="7693358062"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>




<!-- more -->


<h1>Environment</h1>

<p>Before start taking about the differences, the followings are the environment for this blog post.</p>

<ul>
<li>Kotlin for writing the plugin</li>
<li>Gradle for build</li>
<li><a href="https://github.com/JetBrains/gradle-intellij-plugin">gradle-intellij-plugin</a></li>
</ul>


<h1><code>getClasses</code> for <code>PsiJavaFile</code> vs <code>KtFile</code></h1>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='kotlin'><span class='line'><span class="n">e</span><span class="p">.</span><span class="n">getData</span><span class="p">(</span><span class="n">CommonDataKeys</span><span class="p">.</span><span class="n">PSI_FILE</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>returns <code>PsiJavaFile</code> or <code>KtFile</code>. Both of them implements <code>PsiClassOwner</code> which means both of them has the method <code>PsiClass[] getClasses()</code>.</p>

<p>This method is useful for <code>PsiJavaFile</code>, it lets access classes of the file. The plugin can read/write contents of the classes.</p>

<p>For <code>KtFile</code>, I expected the same. I want to read/write code of classes. Yes, you can read <code>.class</code> file. It is not classes inside <code>.kt</code> file. So, even though, it has methods <code>add</code>, <code>addBefore</code> or <code>addAfter</code>, <code>KtFile#classes#add</code> throw an exception says the plugin won&rsquo;t be able to write contents to <code>.class</code> file!</p>

<p>If you want to get objects for generating code of Kotlin, then use <code>KtFile#getDeclarations</code>.</p>

<h1><code>PsiFactory</code></h1>

<p>This could be because I could not find the best way to generate code&hellip;but PsiFactory of Java and Kotlin is different</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='Kotlin'><span class='line'><span class="k">val</span> <span class="py">psiElementFactory</span><span class="p">:</span> <span class="n">PsiElementFactory</span> <span class="p">=</span> <span class="n">JavaPsiFacade</span><span class="p">.</span><span class="n">getElementFactory</span><span class="p">(</span><span class="n">project</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='Kotlin'><span class='line'><span class="k">val</span> <span class="py">psiFactory</span><span class="p">:</span> <span class="n">KtPsiFactory</span> <span class="p">=</span> <span class="n">KtPsiFactory</span><span class="p">(</span><span class="n">project</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<h1>Generating annotations</h1>

<p><code>PsiMethod</code> has modifierList</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='kotlin'><span class='line'><span class="n">method</span><span class="p">.</span><span class="n">modifierList</span><span class="p">.</span><span class="n">addAnnotation</span><span class="p">(</span><span class="s">&quot;Foo&quot;</span><span class="p">)</span><span class="err">`</span>
</span></code></pre></td></tr></table></div></figure>


<p>On the other hand, <code>KtNamedFunction</code> has <code>addAnnotationEntry</code></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='kotlin'><span class='line'><span class="n">function</span><span class="p">.</span><span class="n">addAnnotationEntry</span><span class="p">(</span><span class="n">psiFactory</span><span class="p">.</span><span class="n">createAnnotationEntry</span><span class="p">(</span><span class="s">&quot;@Foo&quot;</span><span class="p">))</span>
</span></code></pre></td></tr></table></div></figure>


<p>To insert new line after annotation, you need to add new line manually.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='kotlin'><span class='line'><span class="k">val</span> <span class="py">entry</span> <span class="p">=</span> <span class="n">function</span><span class="p">.</span><span class="n">addAnnotationEntry</span><span class="p">(</span><span class="n">psiFactory</span><span class="p">.</span><span class="n">createAnnotationEntry</span><span class="p">(</span><span class="s">&quot;@Foo&quot;</span><span class="p">))</span>
</span><span class='line'><span class="n">entry</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">psiFactory</span><span class="p">.</span><span class="n">createNewLine</span><span class="p">())</span>
</span></code></pre></td></tr></table></div></figure>


<h1>Generating methods</h1>

<p><code>PsiClass</code> is easy to add method. Use <code>createMethodFromText</code> and <code>add</code> to <code>PsiClass</code></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='kotlin'><span class='line'><span class="k">val</span> <span class="py">methodTemplate</span> <span class="p">=</span> <span class="s">&quot;&quot;&quot;void foo() {</span>
</span><span class='line'><span class="p">}</span><span class="s">&quot;&quot;&quot;.trimMargin()</span>
</span><span class='line'><span class="k">val</span> <span class="py">method</span> <span class="p">=</span> <span class="n">JavaPsiFacade</span><span class="p">.</span><span class="n">getElementFactory</span><span class="p">(</span><span class="n">project</span><span class="p">).</span><span class="n">createMethodFromText</span><span class="p">(</span><span class="n">methodTemplate</span><span class="p">,</span> <span class="n">psiClass</span><span class="p">)</span>
</span><span class='line'><span class="n">psiClass</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">method</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>For kotlin, it&rsquo;s almost the same.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='kotlin'><span class='line'><span class="k">val</span> <span class="py">psiFactory</span> <span class="p">=</span> <span class="n">KtPsiFactory</span><span class="p">(</span><span class="n">project</span><span class="p">)</span>
</span><span class='line'><span class="k">val</span> <span class="py">function</span> <span class="p">=</span> <span class="n">psiFactory</span><span class="p">.</span><span class="n">createFunction</span><span class="p">(</span><span class="s">&quot;&quot;&quot;void foo() {</span>
</span><span class='line'><span class="p">}</span><span class="s">&quot;&quot;&quot;.trimMargin())</span>
</span><span class='line'><span class="n">ktClass</span><span class="p">.</span><span class="n">getBody</span><span class="p">()</span><span class="o">!!</span><span class="p">.</span><span class="n">addBefore</span><span class="p">(</span><span class="n">function</span><span class="p">,</span> <span class="n">ktClass</span><span class="p">.</span><span class="n">getBody</span><span class="p">()</span><span class="o">!!</span><span class="p">.</span><span class="n">rBrace</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Tips for Creating Intellij Plugin]]></title>
    <link href="http://shiraji.github.io/blog/2016/03/28/create-intellij-plugin/"/>
    <updated>2016-03-28T23:00:00+09:00</updated>
    <id>http://shiraji.github.io/blog/2016/03/28/create-intellij-plugin</id>
    <content type="html"><![CDATA[<h1>Summery</h1>

<p>There are tips for creating intellij plugins</p>

<ul>
<li>Logging</li>
<li>plugin.xml</li>
<li>Action</li>
</ul>


<p>This is note for myself. I won&rsquo;t add description if the sample is clear enough for me.</p>

<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<!-- 728x90 -->


<p><ins class="adsbygoogle"
     style="display:inline-block;width:728px;height:90px"
     data-ad-client="ca-pub-3940616565912592"
     data-ad-slot="7693358062"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>




<!-- more -->


<h1>Logging</h1>

<p>Simply use Sys-out</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='Java'><span class='line'><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;logging...&quot;</span><span class="o">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>However, sys-out shows logs on the console. If you want to show pop up, use notification</p>

<h2>Notification</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='Kotlin'><span class='line'><span class="n">Notifications</span><span class="p">.</span><span class="n">Bus</span><span class="p">.</span><span class="n">notify</span><span class="p">(</span><span class="n">Notification</span><span class="p">(</span><span class="s">&quot;Plugin ID&quot;</span><span class="p">,</span>
</span><span class='line'>                <span class="s">&quot;Title&quot;</span><span class="p">,</span>
</span><span class='line'>                <span class="s">&quot;Content&quot;</span><span class="p">,</span>
</span><span class='line'>                <span class="n">NotificationType</span><span class="p">.</span><span class="n">INFORMATION</span><span class="p">))</span>
</span></code></pre></td></tr></table></div></figure>


<h1>plugin.xml</h1>

<h2>URL of the plugin</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="nt">&lt;idea-plugin</span> <span class="na">url=</span><span class="s">&quot;https://plugins.jetbrains.com/plugin/8262?pr=&quot;</span> <span class="na">version=</span><span class="s">&quot;2&quot;</span><span class="nt">&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<h2>vendor</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="nt">&lt;vendor</span> <span class="na">email=</span><span class="s">&quot;isogai.shiraji@gmail.com&quot;</span> <span class="na">url=</span><span class="s">&quot;https://github.com/shiraji&quot;</span><span class="nt">&gt;</span>Shiraji<span class="nt">&lt;/vendor&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<h2>idea-version</h2>

<p>To use kotlin, IDE version should be higher than 143.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="nt">&lt;idea-version</span> <span class="na">since-build=</span><span class="s">&quot;143&quot;</span><span class="nt">/&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<h1>Action class</h1>

<h2>Creating new action</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'>right click src &gt; New &gt; action
</span></code></pre></td></tr></table></div></figure>


<h2>Methods</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='kotlin'><span class='line'><span class="k">override</span> <span class="k">fun</span> <span class="nf">actionPerformed</span><span class="p">(</span><span class="n">e</span><span class="p">:</span> <span class="n">AnActionEvent</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Update method</h2>

<p>To decide show the action or not, I need to override the update method.</p>

<p>This method should be less than 0.1 sec to complete.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='kotlin'><span class='line'><span class="k">override</span> <span class="k">fun</span> <span class="nf">update</span><span class="p">(</span><span class="n">e</span><span class="p">:</span> <span class="n">AnActionEvent</span><span class="p">?)</span> <span class="p">{</span>
</span><span class='line'>    <span class="n">e</span> <span class="o">?:</span> <span class="k">return</span>
</span><span class='line'>    <span class="k">super</span><span class="p">.</span><span class="n">update</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">if</span> <span class="p">(!</span><span class="n">FindPullRequestModel</span><span class="p">(</span><span class="n">e</span><span class="p">).</span><span class="n">isEnable</span><span class="p">())</span> <span class="p">{</span>
</span><span class='line'>        <span class="n">e</span><span class="p">.</span><span class="n">presentation</span><span class="p">.</span><span class="n">isEnabled</span> <span class="p">=</span> <span class="k">false</span>
</span><span class='line'>        <span class="n">e</span><span class="p">.</span><span class="n">presentation</span><span class="p">.</span><span class="n">isVisible</span> <span class="p">=</span> <span class="k">false</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>



]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[ForwardingAstVisitor's Life Cycle (Android Lint)]]></title>
    <link href="http://shiraji.github.io/blog/2016/02/24/forwardingAstVisitor/"/>
    <updated>2016-02-24T14:37:58+09:00</updated>
    <id>http://shiraji.github.io/blog/2016/02/24/forwardingAstVisitor</id>
    <content type="html"><![CDATA[<h1>Summary</h1>

<ul>
<li><code>ForwardingAstVisitor</code> has life cycle</li>
<li>visitXxx -> afterXxx -> endXxx</li>
<li>Begin <code>visitCompilationUnit</code>, End <code>afterVisitCompilationUnit</code></li>
<li>Go from top to bottom. No surprise, except annotation.</li>
<li>Does not talk about visitIf or any of visitXxx where Xxx is keyword</li>
</ul>


<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<!-- 728x90 -->


<p><ins class="adsbygoogle"
     style="display:inline-block;width:728px;height:90px"
     data-ad-client="ca-pub-3940616565912592"
     data-ad-slot="7693358062"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>




<!-- more -->


<h1>Motivation</h1>

<p>The past few weeks, I am working on creating custom lints for <a href="https://github.com/hotchemi/PermissionsDispatcher">PermissionsDispatcher</a>.</p>

<p>Using <code>ForwardingAstVisitor</code> is the easiest way to implement custom lint. I found there are 75 &ldquo;visit&rdquo; methods in the class. For instance, <code>visitMethodDeclaration</code> is called for iterating all method declarations. <code>visitIdentifier</code> is for all identifiers. Trust me, there is even <code>visitIf</code> and <code>visitSwitch</code> that are called for each <code>if</code> and <code>switch</code>.</p>

<p>However, I could not find any documentations that describes which &ldquo;visit&rdquo; method comes first. So&hellip;this is the post that describes what is the &ldquo;lifecycle&rdquo; of <code>ForwardingAstVisitor</code>.</p>

<h1>Basic Rules</h1>

<p>There are 4 types of methods, <code>visit</code>, <code>visitNode</code>, <code>afterVisit</code>, <code>endVisit</code> for <code>ForwardingAstVisitor</code>.</p>

<ul>
<li><code>visitXxx</code> comes first</li>
<li><code>visitNode</code> comes second for dive into the node</li>
<li><code>afterVisitXxx</code> comes if there is no more method call inside <code>visitXxx</code></li>
<li>Finally, <code>endVisit</code> comes for wrap up.</li>
</ul>


<p>For instance, followings are the method call for checking <code>@Override</code>:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>visitAnnotation                     : target node -&gt; @Override
</span><span class='line'>| visitNode                         : target node -&gt; @Override
</span><span class='line'>| | visitTypeReference              : target node -&gt; Override
</span><span class='line'>| | | visitNode                     : target node -&gt; Override
</span><span class='line'>| | | | visitTypeReferencePart      : target node -&gt; Override
</span><span class='line'>| | | | | visitNode                 : target node -&gt; Override
</span><span class='line'>| | | | | | visitIdentifier         : target node -&gt; Override
</span><span class='line'>| | | | | | | visitNode             : target node -&gt; Override
</span><span class='line'>| | | | | | afterVisitIdentifier    : target node -&gt; Override
</span><span class='line'>| | | | | endVisit                  : target node -&gt; Override
</span><span class='line'>| | | | afterVisitTypeReferencePart : target node -&gt; Override
</span><span class='line'>| | | endVisit                      : target node -&gt; Override
</span><span class='line'>| | afterVisitTypeReference         : target node -&gt; Override
</span><span class='line'>| endVisit                          : target node -&gt; Override
</span><span class='line'>afterVisitAnnotation                : target node -&gt; @Override</span></code></pre></td></tr></table></div></figure>


<h1>General Rules</h1>

<p>Now, let see what&rsquo;s happens if I want to lint check for a Java file.</p>

<p>Assuming I am going to check following class</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
</pre></td><td class='code'><pre><code class='Java'><span class='line'><span class="kn">package</span> <span class="n">pkg</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="kn">import</span> <span class="nn">android.Manifest</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">android.support.v7.app.AppCompatActivity</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">permissions.dispatcher.NeedsPermission</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">permissions.dispatcher.RuntimePermissions</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="nd">@RuntimePermissions</span>
</span><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MainActivity</span> <span class="kd">extends</span> <span class="n">AppCompatActivity</span> <span class="o">{</span>
</span><span class='line'>    <span class="nd">@Override</span>
</span><span class='line'>    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">onCreate</span><span class="o">(</span><span class="n">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="kd">super</span><span class="o">.</span><span class="na">onCreate</span><span class="o">(</span><span class="n">savedInstanceState</span><span class="o">);</span>
</span><span class='line'>        <span class="n">setContentView</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">layout</span><span class="o">.</span><span class="na">activity_main</span><span class="o">);</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="nd">@NeedsPermission</span><span class="o">(</span><span class="n">Manifest</span><span class="o">.</span><span class="na">permission</span><span class="o">.</span><span class="na">CAMERA</span><span class="o">)</span>
</span><span class='line'>    <span class="kt">void</span> <span class="nf">showCamera</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="nd">@Override</span>
</span><span class='line'>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onRequestPermissionsResult</span><span class="o">(</span><span class="kt">int</span> <span class="n">requestCode</span><span class="o">,</span> <span class="n">String</span><span class="o">[]</span> <span class="n">permissions</span><span class="o">,</span> <span class="kt">int</span><span class="o">[]</span> <span class="n">grantResults</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="kd">super</span><span class="o">.</span><span class="na">onRequestPermissionsResult</span><span class="o">(</span><span class="n">requestCode</span><span class="o">,</span> <span class="n">permissions</span><span class="o">,</span> <span class="n">grantResults</span><span class="o">);</span>
</span><span class='line'>        <span class="n">MainActivityPermissionsDispatcher</span><span class="o">.</span><span class="na">onRequestPermissionsResult</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="n">requestCode</span><span class="o">,</span> <span class="n">grantResults</span><span class="o">);</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Here is the <a href="https://gist.github.com/shiraji/dc4665d704d8852243c3">debuging code</a>. It&rsquo;s basically Sys-out method name and <code>node</code> parameter. And the output is <a href="https://gist.github.com/shiraji/37993e824c36e31724d5">this</a></p>

<p>OK, Too long&hellip;let me summarize idea.</p>

<ul>
<li>The first visit-method is <code>visitCompilationUnit</code></li>
<li>Next it checks <code>visitPackageDeclaration</code> for <code>package pkg;</code> (Meaning, it starts from the first line of the class)</li>
<li>And goes one by one until it reaches the bottom of the class</li>
<li>The last after-method is <code>afterVisitCompilationUnit</code></li>
</ul>


<h1>Exceptional Rules</h1>

<p>Now, we know the lint checks goes the top to the bottom. However, there is an exception, Annotation.</p>

<p><code>@RuntimePermissions</code> which is located the above of the class declaration in the example above.</p>

<p>Actually, when we run the lint checks, <code>visitClassDeclaration</code> comes <a href="https://gist.github.com/shiraji/37993e824c36e31724d5#file-output-txt-L127">first</a> and then <code>visitAnnotation</code> comes <a href="https://gist.github.com/shiraji/37993e824c36e31724d5#file-output-txt-L167">later</a>.</p>

<p>It seems that the lint handles annotation as a node inside of method declaration.</p>

<p>For example, if we want to store class declaration object which <code>@RuntimePermissions</code>, we cannot do followings:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
</pre></td><td class='code'><pre><code class='Java'><span class='line'><span class="n">List</span><span class="o">&lt;</span><span class="n">ClassDeclaration</span><span class="o">&gt;</span> <span class="n">classDeclarations</span><span class="o">;</span>
</span><span class='line'><span class="kt">boolean</span> <span class="n">hasRuntimePermisions</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="nd">@Override</span>
</span><span class='line'><span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">visitAnnotation</span><span class="o">(</span><span class="n">Annotation</span> <span class="n">node</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">String</span> <span class="n">type</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="na">astAnnotationTypeReference</span><span class="o">().</span><span class="na">getTypeName</span><span class="o">();</span>
</span><span class='line'>    <span class="k">if</span> <span class="o">(</span><span class="s">&quot;permissions.dispatcher.RuntimePermissions&quot;</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">type</span><span class="o">))</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">hasRuntimePermisions</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>    <span class="k">return</span> <span class="kd">super</span><span class="o">.</span><span class="na">visitAnnotation</span><span class="o">(</span><span class="n">node</span><span class="o">);</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="nd">@Override</span>
</span><span class='line'><span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">visitClassDeclaration</span><span class="o">(</span><span class="n">ClassDeclaration</span> <span class="n">node</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>    <span class="k">if</span><span class="o">(</span><span class="n">hasRuntimePermisions</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">classDeclarations</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">node</span><span class="o">);</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>    <span class="k">return</span> <span class="kd">super</span><span class="o">.</span><span class="na">visitClassDeclaration</span><span class="o">(</span><span class="n">node</span><span class="o">);</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Instead, I would use <code>afterVisitClassDeclaration</code> and call <code>requestRepeat</code> to run other detector which uses class declaration objects.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
</pre></td><td class='code'><pre><code class='Java'><span class='line'><span class="n">JavaContext</span> <span class="n">context</span><span class="o">;</span>
</span><span class='line'><span class="n">List</span><span class="o">&lt;</span><span class="n">ClassDeclaration</span><span class="o">&gt;</span> <span class="n">classDeclarations</span><span class="o">;</span>
</span><span class='line'><span class="kt">boolean</span> <span class="n">hasRuntimePermisions</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="nd">@Override</span>
</span><span class='line'><span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">visitAnnotation</span><span class="o">(</span><span class="n">Annotation</span> <span class="n">node</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">String</span> <span class="n">type</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="na">astAnnotationTypeReference</span><span class="o">().</span><span class="na">getTypeName</span><span class="o">();</span>
</span><span class='line'>    <span class="k">if</span> <span class="o">(</span><span class="s">&quot;permissions.dispatcher.RuntimePermissions&quot;</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">type</span><span class="o">))</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">hasRuntimePermisions</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>    <span class="k">return</span> <span class="kd">super</span><span class="o">.</span><span class="na">visitAnnotation</span><span class="o">(</span><span class="n">node</span><span class="o">);</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="nd">@Override</span>
</span><span class='line'><span class="kd">public</span> <span class="kt">void</span> <span class="nf">afterVisitClassDeclaration</span><span class="o">(</span><span class="n">ClassDeclaration</span> <span class="n">node</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>    <span class="k">if</span><span class="o">(</span><span class="n">hasRuntimePermisions</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">classDeclarations</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">node</span><span class="o">);</span>
</span><span class='line'>        <span class="n">context</span><span class="o">.</span><span class="na">requestRepeat</span><span class="o">(</span><span class="k">new</span> <span class="nf">MyOtherDetector</span><span class="o">(),</span> <span class="n">EnumSet</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">Scope</span><span class="o">.</span><span class="na">ALL_JAVA_FILES</span><span class="o">));</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>    <span class="k">return</span> <span class="kd">super</span><span class="o">.</span><span class="na">visitClassDeclaration</span><span class="o">(</span><span class="n">node</span><span class="o">);</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Custom Lint for Library]]></title>
    <link href="http://shiraji.github.io/blog/2016/02/17/custom-lint-for-library/"/>
    <updated>2016-02-17T03:00:00+09:00</updated>
    <id>http://shiraji.github.io/blog/2016/02/17/custom-lint-for-library</id>
    <content type="html"><![CDATA[<h1>Summary</h1>

<ul>
<li>PermissionsDispatcher now have a custom lint</li>
<li>Adding custom lint is not that hard</li>
<li>LintDetectorTest&hellip;? Forget it</li>
</ul>


<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<!-- 728x90 -->


<p><ins class="adsbygoogle"
     style="display:inline-block;width:728px;height:90px"
     data-ad-client="ca-pub-3940616565912592"
     data-ad-slot="7693358062"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>




<!-- more -->


<h1>PermissionsDispatcher now have a custom lint</h1>

<p>First of all, I am one of collaborators of <a href="https://github.com/hotchemi/PermissionsDispatcher">PermissionsDispatcher</a> which makes developers handle runtime permissions very easily.</p>

<p>PermissionsDispatcher now have a custom lint for its library. Initial issue came from <a href="https://github.com/hotchemi/PermissionsDispatcher/issues/56#issuecomment-163499243">this comment</a>.</p>

<p>The library requires the developer to define a method with <code>@NeedsPermission</code>. Like this</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="nd">@NeedsPermission</span><span class="o">(</span><span class="n">Manifest</span><span class="o">.</span><span class="na">permission</span><span class="o">.</span><span class="na">CAMERA</span><span class="o">)</span>
</span><span class='line'><span class="kt">void</span> <span class="nf">showCamera</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>However, this method should not directly access. Instead, the developers must use a method that PermissionsDispatcher generated.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='Java'><span class='line'><span class="kt">void</span> <span class="nf">foo</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">MainActivityPermissionsDispatcher</span><span class="o">.</span><span class="na">showCameraWithCheck</span><span class="o">(</span><span class="k">this</span><span class="o">);</span> <span class="c1">// Yes</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="kt">void</span> <span class="nf">foo2</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">showCamera</span><span class="o">();</span> <span class="c1">// No!</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>In order to make sure the developers did not call this method, we decide to provide custom lint for this library.</p>

<h1>How to add custom lint for library</h1>

<p>To create custom lint for Android application, check links below</p>

<ul>
<li><a href="http://tools.android.com/tips/lint-custom-rules">Writing Custom Lint Rules</a></li>
<li><a href="http://tools.android.com/tips/lint/writing-a-lint-check">Writing a Lint Check</a></li>
<li><a href="http://qiita.com/hotchemi/items/9364d54a0e024a5e6275">@hotchime&rsquo;s blog post at qiita</a> (For Japanese developer)</li>
</ul>


<p>Custom lint for library needs extra settings to inject <code>lint.jar</code> to its .aar file</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
</pre></td><td class='code'><pre><code class='groovy'><span class='line'><span class="n">configurations</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">lintChecks</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="n">dependencies</span> <span class="o">{</span>
</span><span class='line'>    <span class="o">...</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// we have lint module with lintCheck configuration.</span>
</span><span class='line'>    <span class="c1">// check this file: https://github.com/shiraji/PermissionsDispatcher/blob/master/lint/build.gradle</span>
</span><span class='line'>    <span class="n">lintChecks</span> <span class="nf">project</span><span class="o">(</span><span class="nl">path:</span> <span class="s1">&#39;:lint&#39;</span><span class="o">,</span> <span class="nl">configuration:</span> <span class="s1">&#39;lintChecks&#39;</span><span class="o">)</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="n">assemble</span><span class="o">.</span><span class="na">doLast</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">copyJarToOtherModules</span><span class="o">.</span><span class="na">execute</span><span class="o">()</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="n">task</span> <span class="nf">copyLintJar</span><span class="o">(</span><span class="nl">type:</span> <span class="n">Copy</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">from</span><span class="o">(</span><span class="n">configurations</span><span class="o">.</span><span class="na">lintChecks</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">rename</span> <span class="o">{</span> <span class="s1">&#39;lint.jar&#39;</span> <span class="o">}</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>    <span class="n">into</span> <span class="s1">&#39;build/intermediates/lint/&#39;</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="n">project</span><span class="o">.</span><span class="na">afterEvaluate</span> <span class="o">{</span>
</span><span class='line'>    <span class="kt">def</span> <span class="n">compileLintTask</span> <span class="o">=</span> <span class="n">project</span><span class="o">.</span><span class="na">tasks</span><span class="o">.</span><span class="na">find</span> <span class="o">{</span> <span class="n">it</span><span class="o">.</span><span class="na">name</span> <span class="o">==</span> <span class="s1">&#39;compileLint&#39;</span> <span class="o">}</span>
</span><span class='line'>    <span class="n">compileLintTask</span><span class="o">.</span><span class="na">dependsOn</span><span class="o">(</span><span class="n">copyLintJar</span><span class="o">)</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Basically, if there is <code>compileLint</code> task, then make the task depends on <code>copyLintJar</code> task which copies <code>lint.jar</code> to <code>build/intermediates/lint/</code></p>

<p>The user of this library doesn&rsquo;t need to put lint.jar to <code>.android/lint/</code>. Just sync library and then run <code>./gradlew lint</code></p>

<h1>Use LintDetectorTest</h1>

<p>Just don&rsquo;t.</p>

<p>Check this code</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='Java'><span class='line'><span class="n">File</span> <span class="n">f</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">File</span><span class="o">(</span><span class="n">root</span><span class="o">,</span>
</span><span class='line'>            <span class="s">&quot;tools/base/lint/libs/lint-tests/src/test/java/&quot;</span><span class="o">.</span><span class="na">replace</span><span class="o">(</span><span class="sc">&#39;/&#39;</span><span class="o">,</span> <span class="n">File</span><span class="o">.</span><span class="na">separatorChar</span><span class="o">)</span>
</span><span class='line'>            <span class="o">+</span> <span class="n">pkg</span><span class="o">.</span><span class="na">replace</span><span class="o">(</span><span class="sc">&#39;.&#39;</span><span class="o">,</span> <span class="n">File</span><span class="o">.</span><span class="na">separatorChar</span><span class="o">)</span>
</span><span class='line'>            <span class="o">+</span> <span class="n">File</span><span class="o">.</span><span class="na">separatorChar</span> <span class="o">+</span> <span class="n">path</span><span class="o">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>This is the code that reads from <code>$ROOT/tools/base/lint/libs/lint-tests/src/test/java/PACAKGE-NAME-REPLACE-DOT-WITH-SLASH</code>.
I believe most developers doesn&rsquo;t want to put project in the specific directory in order to pass the test cases.</p>

<p>Actually, current version of <code>LintDetectorTest</code> has a lots of problems with loading resources, java source and &ldquo;class&rdquo; file. (Yes! you need to supply .class file to run the test)</p>

<p>In order to use the <code>LintDetectorTest</code>, the developer must override <code>protected InputStream getTestResource(String relativePath, boolean expectExists)</code> like <a href="https://android.googlesource.com/platform/tools/base/+/master/lint/libs/lint-tests/src/test/java/com/android/tools/lint/checks/AbstractCheckTest.java?autodive=0%2F%2F%2F%2F%2F%2F%2F#49">what AOSP did</a></p>

<p><code>LintDetectorTest</code> is still Beta. I assumed there are a lot of work to make it production release.</p>

<p>If it comes to production, I hope it does not require me to pass .java/.class file like this way.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='Java'><span class='line'><span class="n">lintFiles</span><span class="o">(</span><span class="s">&quot;MainActivity.class=&gt;pkg/MainActivity.class&quot;</span><span class="o">));</span>
</span></code></pre></td></tr></table></div></figure>


<h1>Now how to test???</h1>

<p>I don&rsquo;t know.</p>

<p>The only way I came up is <a href="https://github.com/hotchemi/PermissionsDispatcher/pull/75#issuecomment-178650850">manual testing</a>.</p>

<p>So, someone who know better way to test lint, please let me know!</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[]]></title>
    <link href="http://shiraji.github.io/blog/2016/01/11/accessor/"/>
    <updated>2016-01-11T10:50:49+09:00</updated>
    <id>http://shiraji.github.io/blog/2016/01/11/accessor</id>
    <content type="html"><![CDATA[<h1></h1>

<p>private</p>

<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<!-- 728x90 -->


<p><ins class="adsbygoogle"
     style="display:inline-block;width:728px;height:90px"
     data-ad-client="ca-pub-3940616565912592"
     data-ad-slot="7693358062"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>




<!-- more -->


<h1></h1>

<p>Jake<a href="https://github.com/google/gson/pull/761">pull request</a>$accessor

</p>

<p>pull request</p>

<ul>
<li><a href="https://github.com/google/gson/pull/761/files#diff-694e40202daa75f0056c800b5d953297R88">private</a></li>
<li><a href="https://github.com/google/gson/pull/761/files#diff-a654cd1a9dadb8afb191e239a12e19a5R765"></a></li>
<li><a href="https://github.com/google/gson/pull/761/files#diff-0776314ca8e083ca3943426740d1dd69R245">private</a></li>
<li><a href="https://github.com/google/gson/pull/761/files#diff-0776314ca8e083ca3943426740d1dd69R465">private</a></li>
</ul>


<h1><a href="https://github.com/google/gson/pull/761/files#diff-694e40202daa75f0056c800b5d953297R88">private</a></h1>

<p></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">class</span> <span class="nc">PrivateConstructor</span> <span class="o">{</span>
</span><span class='line'>  <span class="kd">private</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">AbstractInnerClass</span> <span class="o">{</span>
</span><span class='line'>    <span class="kd">private</span> <span class="nf">AbstractInnerClass</span><span class="o">()</span> <span class="o">{}</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'>  <span class="kd">class</span> <span class="nc">InnerClass</span> <span class="kd">extends</span> <span class="n">AbstractInnerClass</span> <span class="o">{</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">class</span> <span class="nc">DefaultConstructor</span> <span class="o">{</span>
</span><span class='line'>  <span class="kd">private</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">AbstractInnerClass</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">AbstractInnerClass</span><span class="o">()</span> <span class="o">{}</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'>  <span class="kd">class</span> <span class="nc">InnerClass</span> <span class="kd">extends</span> <span class="n">AbstractInnerClass</span> <span class="o">{</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>PrivateConstructorAbstractInnerClassprivate</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="o">%</span> <span class="n">javap</span> <span class="o">-</span><span class="n">p</span> <span class="n">PrivateConstructor</span><span class="o">*.</span><span class="na">class</span>
</span><span class='line'><span class="n">Compiled</span> <span class="n">from</span> <span class="s">&quot;PrivateConstructor.java&quot;</span>
</span><span class='line'><span class="kd">class</span> <span class="nc">PrivateConstructor$1</span> <span class="o">{</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'><span class="n">Compiled</span> <span class="n">from</span> <span class="s">&quot;PrivateConstructor.java&quot;</span>
</span><span class='line'><span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">PrivateConstructor$AbstractInnerClass</span> <span class="o">{</span>
</span><span class='line'>  <span class="kd">final</span> <span class="n">PrivateConstructor</span> <span class="k">this</span><span class="n">$0</span><span class="o">;</span>
</span><span class='line'>  <span class="kd">private</span> <span class="nf">PrivateConstructor$AbstractInnerClass</span><span class="o">(</span><span class="n">PrivateConstructor</span><span class="o">);</span>
</span><span class='line'>  <span class="n">PrivateConstructor$AbstractInnerClass</span><span class="o">(</span><span class="n">PrivateConstructor</span><span class="o">,</span> <span class="n">PrivateConstructor$1</span><span class="o">);</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'><span class="n">Compiled</span> <span class="n">from</span> <span class="s">&quot;PrivateConstructor.java&quot;</span>
</span><span class='line'><span class="kd">class</span> <span class="nc">PrivateConstructor$InnerClass</span> <span class="kd">extends</span> <span class="n">PrivateConstructor$AbstractInnerClass</span> <span class="o">{</span>
</span><span class='line'>  <span class="kd">final</span> <span class="n">PrivateConstructor</span> <span class="k">this</span><span class="n">$0</span><span class="o">;</span>
</span><span class='line'>  <span class="n">PrivateConstructor$InnerClass</span><span class="o">(</span><span class="n">PrivateConstructor</span><span class="o">);</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'><span class="n">Compiled</span> <span class="n">from</span> <span class="s">&quot;PrivateConstructor.java&quot;</span>
</span><span class='line'><span class="kd">class</span> <span class="nc">PrivateConstructor</span> <span class="o">{</span>
</span><span class='line'>  <span class="n">PrivateConstructor</span><span class="o">();</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="o">%</span> <span class="n">javap</span> <span class="o">-</span><span class="n">p</span> <span class="n">DefaultConstructor</span><span class="o">*.</span><span class="na">class</span>
</span><span class='line'><span class="n">Compiled</span> <span class="n">from</span> <span class="s">&quot;DefaultConstuctor.java&quot;</span>
</span><span class='line'><span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">DefaultConstructor$AbstractInnerClass</span> <span class="o">{</span>
</span><span class='line'>  <span class="kd">final</span> <span class="n">DefaultConstructor</span> <span class="k">this</span><span class="n">$0</span><span class="o">;</span>
</span><span class='line'>  <span class="n">DefaultConstructor$AbstractInnerClass</span><span class="o">(</span><span class="n">DefaultConstructor</span><span class="o">);</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'><span class="n">Compiled</span> <span class="n">from</span> <span class="s">&quot;DefaultConstuctor.java&quot;</span>
</span><span class='line'><span class="kd">class</span> <span class="nc">DefaultConstructor$InnerClass</span> <span class="kd">extends</span> <span class="n">DefaultConstructor$AbstractInnerClass</span> <span class="o">{</span>
</span><span class='line'>  <span class="kd">final</span> <span class="n">DefaultConstructor</span> <span class="k">this</span><span class="n">$0</span><span class="o">;</span>
</span><span class='line'>  <span class="n">DefaultConstructor$InnerClass</span><span class="o">(</span><span class="n">DefaultConstructor</span><span class="o">);</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'><span class="n">Compiled</span> <span class="n">from</span> <span class="s">&quot;DefaultConstuctor.java&quot;</span>
</span><span class='line'><span class="kd">class</span> <span class="nc">DefaultConstructor</span> <span class="o">{</span>
</span><span class='line'>  <span class="n">DefaultConstructor</span><span class="o">();</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Javaprivateclass</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="n">PrivateConstructor$AbstractInnerClass</span><span class="o">(</span><span class="n">PrivateConstructor</span><span class="o">,</span> <span class="n">PrivateConstructor$1</span><span class="o">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>DefaultConstuctor.java3PrivateConstructor.java4
PrivateConstructor$InnerClass</p>

<p></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">class</span> <span class="nc">PrivateConstructor</span> <span class="o">{</span>
</span><span class='line'>  <span class="kd">private</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">AbstractInnerClass</span> <span class="o">{</span>
</span><span class='line'>    <span class="kd">private</span> <span class="nf">AbstractInnerClass</span><span class="o">()</span> <span class="o">{}</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'>  <span class="c1">// class InnerClass extends AbstractInnerClass {</span>
</span><span class='line'>  <span class="c1">// }</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="o">%</span> <span class="n">javap</span> <span class="o">-</span><span class="n">p</span> <span class="n">PrivateConstructor</span><span class="o">*.</span><span class="na">class</span>
</span><span class='line'><span class="n">Compiled</span> <span class="n">from</span> <span class="s">&quot;PrivateConstructor.java&quot;</span>
</span><span class='line'><span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">PrivateConstructor$AbstractInnerClass</span> <span class="o">{</span>
</span><span class='line'>  <span class="kd">final</span> <span class="n">PrivateConstructor</span> <span class="k">this</span><span class="n">$0</span><span class="o">;</span>
</span><span class='line'>  <span class="kd">private</span> <span class="nf">PrivateConstructor$AbstractInnerClass</span><span class="o">(</span><span class="n">PrivateConstructor</span><span class="o">);</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'><span class="n">Compiled</span> <span class="n">from</span> <span class="s">&quot;PrivateConstructor.java&quot;</span>
</span><span class='line'><span class="kd">class</span> <span class="nc">PrivateConstructor</span> <span class="o">{</span>
</span><span class='line'>  <span class="n">PrivateConstructor</span><span class="o">();</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>PrivateConstructor$AbstractInnerClassprivate<code>PrivateConstructor$AbstractInnerClass(PrivateConstructor, PrivateConstructor$1);</code></p>

<h1><a href="https://github.com/google/gson/pull/761/files#diff-a654cd1a9dadb8afb191e239a12e19a5R765"></a></h1>

<p></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">class</span> <span class="nc">NoDefaultConstructor</span> <span class="o">{</span>
</span><span class='line'>  <span class="kd">private</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">AbstractClass</span> <span class="o">{</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'>  <span class="kd">class</span> <span class="nc">InnerClass</span> <span class="kd">extends</span> <span class="n">AbstractClass</span> <span class="o">{</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="n">Compiled</span> <span class="n">from</span> <span class="s">&quot;NoDefaultConstructor.java&quot;</span>
</span><span class='line'><span class="kd">class</span> <span class="nc">NoDefaultConstructor$1</span> <span class="o">{</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'><span class="n">Compiled</span> <span class="n">from</span> <span class="s">&quot;NoDefaultConstructor.java&quot;</span>
</span><span class='line'><span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">NoDefaultConstructor$AbstractClass</span> <span class="o">{</span>
</span><span class='line'>  <span class="kd">final</span> <span class="n">NoDefaultConstructor</span> <span class="k">this</span><span class="n">$0</span><span class="o">;</span>
</span><span class='line'>  <span class="kd">private</span> <span class="nf">NoDefaultConstructor$AbstractClass</span><span class="o">(</span><span class="n">NoDefaultConstructor</span><span class="o">);</span>
</span><span class='line'>  <span class="n">NoDefaultConstructor$AbstractClass</span><span class="o">(</span><span class="n">NoDefaultConstructor</span><span class="o">,</span> <span class="n">NoDefaultConstructor$1</span><span class="o">);</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'><span class="n">Compiled</span> <span class="n">from</span> <span class="s">&quot;NoDefaultConstructor.java&quot;</span>
</span><span class='line'><span class="kd">class</span> <span class="nc">NoDefaultConstructor$InnerClass</span> <span class="kd">extends</span> <span class="n">NoDefaultConstructor$AbstractClass</span> <span class="o">{</span>
</span><span class='line'>  <span class="kd">final</span> <span class="n">NoDefaultConstructor</span> <span class="k">this</span><span class="n">$0</span><span class="o">;</span>
</span><span class='line'>  <span class="n">NoDefaultConstructor$InnerClass</span><span class="o">(</span><span class="n">NoDefaultConstructor</span><span class="o">);</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'><span class="n">Compiled</span> <span class="n">from</span> <span class="s">&quot;NoDefaultConstructor.java&quot;</span>
</span><span class='line'><span class="kd">class</span> <span class="nc">NoDefaultConstructor</span> <span class="o">{</span>
</span><span class='line'>  <span class="n">NoDefaultConstructor</span><span class="o">();</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">private</span> <span class="nf">NoDefaultConstructor$AbstractClass</span><span class="o">(</span><span class="n">NoDefaultConstructor</span><span class="o">);</span>
</span><span class='line'><span class="n">NoDefaultConstructor$AbstractClass</span><span class="o">(</span><span class="n">NoDefaultConstructor</span><span class="o">,</span> <span class="n">NoDefaultConstructor$1</span><span class="o">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>Java
class</p>

<p><code>AbstractClass</code>privateprivate</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">private</span> <span class="nf">NoDefaultConstructor$AbstractClass</span><span class="o">(</span><span class="n">NoDefaultConstructor</span><span class="o">);</span>
</span></code></pre></td></tr></table></div></figure>


<p></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="n">NoDefaultConstructor$AbstractClass</span><span class="o">(</span><span class="n">NoDefaultConstructor</span><span class="o">,</span> <span class="n">NoDefaultConstructor$1</span><span class="o">);</span>
</span></code></pre></td></tr></table></div></figure>


<p></p>

<p>04
private</p>

<h1><a href="https://github.com/google/gson/pull/761/files#diff-0776314ca8e083ca3943426740d1dd69R245">private</a></h1>

<p></p>

<p></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">class</span> <span class="nc">DefaultMember</span> <span class="o">{</span>
</span><span class='line'>  <span class="kt">boolean</span> <span class="n">flag</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="kd">class</span> <span class="nc">InnerClass</span> <span class="o">{</span>
</span><span class='line'>    <span class="kt">void</span> <span class="nf">foo</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>      <span class="n">flag</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="n">Compiled</span> <span class="n">from</span> <span class="s">&quot;DefaultMember.java&quot;</span>
</span><span class='line'><span class="kd">class</span> <span class="nc">DefaultMember$InnerClass</span> <span class="o">{</span>
</span><span class='line'>  <span class="kd">final</span> <span class="n">DefaultMember</span> <span class="k">this</span><span class="n">$0</span><span class="o">;</span>
</span><span class='line'>  <span class="n">DefaultMember$InnerClass</span><span class="o">(</span><span class="n">DefaultMember</span><span class="o">);</span>
</span><span class='line'>  <span class="kt">void</span> <span class="nf">foo</span><span class="o">();</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'><span class="n">Compiled</span> <span class="n">from</span> <span class="s">&quot;DefaultMember.java&quot;</span>
</span><span class='line'><span class="kd">class</span> <span class="nc">DefaultMember</span> <span class="o">{</span>
</span><span class='line'>  <span class="kt">boolean</span> <span class="n">flag</span><span class="o">;</span>
</span><span class='line'>  <span class="n">DefaultMember</span><span class="o">();</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">class</span> <span class="nc">PrivateMember</span> <span class="o">{</span>
</span><span class='line'>  <span class="kd">private</span> <span class="kt">boolean</span> <span class="n">flag</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="kd">class</span> <span class="nc">InnerClass</span> <span class="o">{</span>
</span><span class='line'>    <span class="kt">void</span> <span class="nf">foo</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>      <span class="n">flag</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="n">Compiled</span> <span class="n">from</span> <span class="s">&quot;PrivateMember.java&quot;</span>
</span><span class='line'><span class="kd">class</span> <span class="nc">PrivateMember$InnerClass</span> <span class="o">{</span>
</span><span class='line'>  <span class="kd">final</span> <span class="n">PrivateMember</span> <span class="k">this</span><span class="n">$0</span><span class="o">;</span>
</span><span class='line'>  <span class="n">PrivateMember$InnerClass</span><span class="o">(</span><span class="n">PrivateMember</span><span class="o">);</span>
</span><span class='line'>  <span class="kt">void</span> <span class="nf">foo</span><span class="o">();</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'><span class="n">Compiled</span> <span class="n">from</span> <span class="s">&quot;PrivateMember.java&quot;</span>
</span><span class='line'><span class="kd">class</span> <span class="nc">PrivateMember</span> <span class="o">{</span>
</span><span class='line'>  <span class="kd">private</span> <span class="kt">boolean</span> <span class="n">flag</span><span class="o">;</span>
</span><span class='line'>  <span class="n">PrivateMember</span><span class="o">();</span>
</span><span class='line'>  <span class="kd">static</span> <span class="kt">boolean</span> <span class="nf">access$002</span><span class="o">(</span><span class="n">PrivateMember</span><span class="o">,</span> <span class="kt">boolean</span><span class="o">);</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">static</span> <span class="kt">boolean</span> <span class="nf">access$002</span><span class="o">(</span><span class="n">PrivateMember</span><span class="o">,</span> <span class="kt">boolean</span><span class="o">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>Innerflag
privateaccessprefixflag</p>

<h1><a href="https://github.com/google/gson/pull/761/files#diff-0776314ca8e083ca3943426740d1dd69R465">private</a></h1>

<p></p>

<p></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">class</span> <span class="nc">PrivateMethod</span> <span class="o">{</span>
</span><span class='line'>  <span class="kd">static</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">Object</span> <span class="n">obj</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">Object</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>      <span class="kt">void</span> <span class="nf">bar</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">PrivateMethod</span> <span class="n">method</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">PrivateMethod</span><span class="o">();</span>
</span><span class='line'>        <span class="n">method</span><span class="o">.</span><span class="na">foo</span><span class="o">();</span>
</span><span class='line'>      <span class="o">}</span>
</span><span class='line'>    <span class="o">};</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="kd">private</span> <span class="kt">void</span> <span class="nf">foo</span><span class="o">()</span> <span class="o">{}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="n">Compiled</span> <span class="n">from</span> <span class="s">&quot;PrivateMethod.java&quot;</span>
</span><span class='line'><span class="kd">class</span> <span class="nc">PrivateMethod</span> <span class="o">{</span>
</span><span class='line'>  <span class="n">PrivateMethod</span><span class="o">();</span>
</span><span class='line'>  <span class="kd">private</span> <span class="kt">void</span> <span class="nf">foo</span><span class="o">();</span>
</span><span class='line'>  <span class="kd">static</span> <span class="kt">void</span> <span class="nf">access$000</span><span class="o">(</span><span class="n">PrivateMethod</span><span class="o">);</span>
</span><span class='line'>  <span class="kd">static</span> <span class="o">{};</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>private</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">class</span> <span class="nc">PrivateMethod</span> <span class="o">{</span>
</span><span class='line'>  <span class="kd">static</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">Object</span> <span class="n">obj</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">Object</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>      <span class="kt">void</span> <span class="nf">bar</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">PrivateMethod</span> <span class="n">method</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">PrivateMethod</span><span class="o">();</span>
</span><span class='line'>        <span class="n">method</span><span class="o">.</span><span class="na">foo</span><span class="o">();</span>
</span><span class='line'>      <span class="o">}</span>
</span><span class='line'>    <span class="o">};</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="kt">void</span> <span class="nf">foo</span><span class="o">()</span> <span class="o">{}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="n">Compiled</span> <span class="n">from</span> <span class="s">&quot;PrivateMethod.java&quot;</span>
</span><span class='line'><span class="kd">class</span> <span class="nc">PrivateMethod</span> <span class="o">{</span>
</span><span class='line'>  <span class="n">PrivateMethod</span><span class="o">();</span>
</span><span class='line'>  <span class="kt">void</span> <span class="nf">foo</span><span class="o">();</span>
</span><span class='line'>  <span class="kd">static</span> <span class="o">{};</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p><code>static void access$000(PrivateMethod);</code>
</p>

<h1></h1>

<p>JavaAndroid65K</p>

<p>Jake<a href="https://github.com/google/gson/pull/761#issuecomment-167436875"></a></p>

<p>Androiderprivate</p>

<p>Jake<a href="https://gist.github.com/JakeWharton/5b3dbbc54c779a6bc6af"></a></p>

<p></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[]]></title>
    <link href="http://shiraji.github.io/blog/2016/01/10/pull_req_study/"/>
    <updated>2016-01-10T10:44:39+09:00</updated>
    <id>http://shiraji.github.io/blog/2016/01/10/pull_req_study</id>
    <content type="html"><![CDATA[<h1></h1>

<p>pull request</p>

<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<!-- 728x90 -->


<p><ins class="adsbygoogle"
     style="display:inline-block;width:728px;height:90px"
     data-ad-client="ca-pub-3940616565912592"
     data-ad-slot="7693358062"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>




<!-- more -->


<h1></h1>

<ul>
<li>pull request</li>
<li></li>
</ul>


<h1></h1>

<p>30()</p>

<p>pull request</p>

<p>pull request</p>

<p>pull request
Issue</p>

<p>pull request</p>

<p>pull request</p>

<h1></h1>

<p>pull request</p>

<ul>
<li>GitHub5005000</li>
<li></li>
<li>Issue</li>
<li>pull request</li>
<li>GitHub</li>
<li></li>
</ul>


<h2>GitHub500</h2>

<p>GitHubpull request</p>

<p>CONTRIBUTING.md</p>

<h2></h2>

<p>1</p>

<p>(Collaborator)</p>

<h2>Issue</h2>

<p>IssueIssuepull request(pull request)</p>

<p>Issue<a href="https://github.com/excilys/androidannotations/">AndroidAnnotations</a><a href="https://github.com/excilys/androidannotations/labels/ContributionWelcome">ContributionWelcome</a>
pull requestIssue</p>

<p>IssueIssue</p>

<h2>pull request</h2>

<p>pull request10</p>

<p>pull requestpull request</p>

<h2>GitHub</h2>

<p>GitHubIssuesourceclone</p>

<p></p>

<h2></h2>

<p></p>

<p>pull request
()</p>

<h1></h1>

<p></p>

<ul>
<li>gitfork->commit->pull request</li>
<li></li>
<li></li>
</ul>


<h2>gitfork->commit->pull request</h2>

<p>pull request</p>

<p>git/github</p>

<p>forkforkfork
(pull request)
fork  </p>

<h2></h2>

<p></p>

<p><strong></strong></p>

<p>

()</p>

<h2></h2>

<p></p>

<p>pull request</p>

<p>pull request</p>

<p></p>

<p></p>

<h1></h1>

<p>3Java8, Groovy/Gradle, KotlinRuby</p>

<p>gitpull requestpull request<a href="https://github.com/excilys/androidannotations/pull/1603/commits"></a></p>

<h1></h1>

<p></p>

<p>12301</p>

<p>Issue1pull request</p>

<p>Issue</p>

<h1>pull request</h1>

<p>pull request</p>

<p><a href="https://github.com/excilys/androidannotations/pull/1673">https://github.com/excilys/androidannotations/pull/1673</a></p>

<p>pull requestIt&rsquo;s ready for review.()
<a href="https://github.com/excilys/androidannotations/pull/1673#discussion_r48849275">AndroidManifest.xmlActivityView</a><a href="https://github.com/excilys/androidannotations/pull/1673#discussion-diff-49131871">newInsanceVartypo</a>()</p>

<h1></h1>

<p></p>

<p>GitHubpull request</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[]]></title>
    <link href="http://shiraji.github.io/blog/2015/10/17/refactoring/"/>
    <updated>2015-10-17T11:39:09+09:00</updated>
    <id>http://shiraji.github.io/blog/2015/10/17/refactoring</id>
    <content type="html"><![CDATA[<p>URL</p>

<p><a href="http://shiraji.hatenablog.com/entry/2015/09/06/225204">http://shiraji.hatenablog.com/entry/2015/09/06/225204</a></p>

<hr />

<p>()</p>

<ul>
<li></li>
<li></li>
<li></li>
</ul>


<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<!-- 728x90 -->


<p><ins class="adsbygoogle"
     style="display:inline-block;width:728px;height:90px"
     data-ad-client="ca-pub-3940616565912592"
     data-ad-slot="7693358062"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>




<!-- more -->


<h1></h1>

<p></p>

<ul>
<li></li>
<li></li>
</ul>


<p>Yes</p>

<p></p>

<p></p>

<h1></h1>

<p>wikipedia</p>

<blockquote><p> (refactoring) ((&ldquo; ()&rdquo;. wikipedia. <a href="https://ja.wikipedia.org/wiki/%E3%83%AA%E3%83%95%E3%82%A1%E3%82%AF%E3%82%BF%E3%83%AA%E3%83%B3%E3%82%B0_">https://ja.wikipedia.org/wiki/%E3%83%AA%E3%83%95%E3%82%A1%E3%82%AF%E3%82%BF%E3%83%AA%E3%83%B3%E3%82%B0_</a>(%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0))</p></blockquote>

<p></p>

<p></p>

<p></p>

<h1></h1>

<p></p>

<h3></h3>

<p><b></b></p>

<h3></h3>

<p></p>

<ul>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>


<p></p>

<ul>
<li></li>
<li></li>
<li></li>
<li>(=)</li>
<li>(=)</li>
</ul>


<p></p>

<h3></h3>

<p></p>

<p></p>

<p></p>

<p>()</p>

<h1></h1>

<p></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[]]></title>
    <link href="http://shiraji.github.io/blog/2015/10/17/intro/"/>
    <updated>2015-10-17T07:31:51+09:00</updated>
    <id>http://shiraji.github.io/blog/2015/10/17/intro</id>
    <content type="html"><![CDATA[<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<!-- 728x90 -->


<p><ins class="adsbygoogle"
     style="display:inline-block;width:728px;height:90px"
     data-ad-client="ca-pub-3940616565912592"
     data-ad-slot="7693358062"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>




<!-- more -->


<p>shirajiGitHub</p>

<ul>
<li>Twitter: <a href="https://twitter.com/shiraj_i">@shiraj_i</a></li>
<li>Qiita: <a href="http://qiita.com/shiraji">shiraji</a></li>
</ul>


<p></p>
]]></content>
  </entry>
  
</feed>
