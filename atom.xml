<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Shiraji's Blog]]></title>
  <link href="http://shiraji.github.io/atom.xml" rel="self"/>
  <link href="http://shiraji.github.io/"/>
  <updated>2017-12-05T00:03:36+09:00</updated>
  <id>http://shiraji.github.io/</id>
  <author>
    <name><![CDATA[Shiraji]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[PermissionsDispatcher V3ã«é–¢ã—ã¦]]></title>
    <link href="http://shiraji.github.io/blog/2017/12/05/permissions-dispatcher-v3/"/>
    <updated>2017-12-05T00:01:38+09:00</updated>
    <id>http://shiraji.github.io/blog/2017/12/05/permissions-dispatcher-v3</id>
    <content type="html"><![CDATA[<p>ã“ã®è¨˜äº‹ã¯ <a href="https://qiita.com/advent-calendar/2017/android">Android Advent Calendar 2017</a> ã®5æ—¥ç›®ã®è¨˜äº‹ã§ã™ã€‚</p>

<h2>ã¯ã˜ã‚ã«</h2>

<p><a href="https://github.com/permissions-dispatcher/PermissionsDispatcher">PermissionsDispatcher</a> v3ãŒä»Šå¹´ã®9æœˆã«ãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã¾ã—ãŸğŸ‰</p>

<blockquote class="twitter-tweet" data-lang="ja"><p lang="en" dir="ltr">Finally PermissionsDispatcher 3.0.0 is outğŸ˜„ We added fully <a href="https://twitter.com/kotlin?ref_src=twsrc%5Etfw">@kotlin</a> support and a few improvementsğŸ‰EnjoyâœŒï¸ <a href="https://t.co/3a1SQ17AWb">https://t.co/3a1SQ17AWb</a></p>&mdash; hotchemi (@hotchemi) <a href="https://twitter.com/hotchemi/status/908889575208116229?ref_src=twsrc%5Etfw">2017å¹´9æœˆ16æ—¥</a></blockquote>


<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>


<p>çµæ§‹å¤§ããªä¿®æ­£ã§ã‚ã£ãŸã®ã§ã€ã“ã‚Œã«é–¢ã—ã¦æ›¸ãã¾ã™ã€‚</p>

<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<!-- 728x90 -->


<p><ins class="adsbygoogle"
     style="display:inline-block;width:728px;height:90px"
     data-ad-client="ca-pub-3940616565912592"
     data-ad-slot="7693358062"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>




<!-- more -->


<h2>è‡ªå·±ç´¹ä»‹</h2>

<p>PermissionsDispatcherã®ã‚³ãƒŸãƒƒã‚¿ãƒ¼ã®ä¸€äººã§ã™ã€‚ä»Šå¹´ã¯ãã‚Œã»ã©ã‚³ãƒ¼ãƒ‰ã§ã®è²¢çŒ®ãŒå‡ºæ¥ãªã‹ã£ãŸã®ã§ã€ã“ã®è¨˜äº‹ã‚’æ›¸ãã“ã¨ã§ä½•ã‹è²¢çŒ®ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚</p>

<h2>æƒ³å®šèª­è€…</h2>

<ul>
<li>PermissionsDispatcherã‚’ä½¿ã£ãŸã“ã¨ãŒã‚ã‚‹äºº</li>
<li>PermissionsDispatcher v3ã«èˆˆå‘³ãŒã‚ã‚‹äºº</li>
</ul>


<h2>æ›¸ã„ã¦ã„ãªã„ã“ã¨</h2>

<ul>
<li>PermissionsDispatcherã®ä½¿ã„æ–¹</li>
<li>KotlinPoetã«é–¢ã—ã¦</li>
</ul>


<h2>PermissionsDispatcher v3ã¸ã®ç§»è¡Œæ–¹æ³•</h2>

<p>ã¾ãšv2ã‚’ä½¿ã£ã¦ã„ã‚‹äººã¯v3ã¸ã®ç§»è¡Œã‚’ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ç§»è¡Œæ‰‹é †ã¯ä»¥ä¸‹ã«ã‚ã‚Šã¾ã™ã€‚</p>

<p><a href="https://github.com/permissions-dispatcher/PermissionsDispatcher/blob/master/doc/migration_guide.md#migrating-to-3x">https://github.com/permissions-dispatcher/PermissionsDispatcher/blob/master/doc/migration_guide.md#migrating-to-3x</a></p>

<p>ç°¡å˜ã«è§£èª¬ã™ã‚‹ã¨ä»¥ä¸‹ã®äºŒç‚¹ã®ä¿®æ­£ãŒå¿…è¦ã«ãªã‚Šã¾ã™ã€‚</p>

<ul>
<li>Kotlinãƒ¦ãƒ¼ã‚¶ã¯<code>XxxPermissionsDispatcher</code>ã‚¯ãƒ©ã‚¹ãŒç„¡ããªã‚Šã€<code>Activity</code>/<code>Fragment</code>ã®æ‹¡å¼µé–¢æ•°ã¨ã—ã¦æä¾›ã•ã‚Œã‚‹ã‚ˆã†ã«ãªã£ãŸ</li>
<li>Java/Kotlinå…±ã«<code>XxxWithCheck</code>ãƒ¡ã‚½ãƒƒãƒ‰ãŒ<code>XxxWithPermissionCheck</code>ãƒ¡ã‚½ãƒƒãƒ‰ã«å¤‰æ›´ã«ãªã£ãŸ</li>
</ul>


<h2>ç”Ÿæˆã•ã‚Œã‚‹Kotlinã‚³ãƒ¼ãƒ‰</h2>

<p>å®Ÿéš›ã«ç”Ÿæˆã•ã‚Œã‚‹Kotlinã®ã‚½ãƒ¼ã‚¹ã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚<a href="https://github.com/permissions-dispatcher/PermissionsDispatcher/tree/123e50a184e058ad6b4adb0b659a343d79813913/sample-kotlin">sample-kotlinãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«</a>ã§ã¯ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ãŒç”Ÿæˆã•ã‚Œã¾ã™ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
</pre></td><td class='code'><pre><code class='kotlin'><span class='line'><span class="k">private</span> <span class="k">val</span> <span class="py">REQUEST_SHOWCAMERA</span><span class="p">:</span> <span class="n">Int</span> <span class="p">=</span> <span class="m">0</span>
</span><span class='line'>
</span><span class='line'><span class="k">private</span> <span class="k">val</span> <span class="py">PERMISSION_SHOWCAMERA</span><span class="p">:</span> <span class="n">Array</span><span class="p">&lt;</span><span class="n">String</span><span class="p">&gt;</span> <span class="p">=</span> <span class="n">arrayOf</span><span class="p">(</span><span class="s">&quot;android.permission.CAMERA&quot;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="k">private</span> <span class="k">val</span> <span class="py">REQUEST_SHOWCONTACTS</span><span class="p">:</span> <span class="n">Int</span> <span class="p">=</span> <span class="m">1</span>
</span><span class='line'>
</span><span class='line'><span class="k">private</span> <span class="k">val</span> <span class="py">PERMISSION_SHOWCONTACTS</span><span class="p">:</span> <span class="n">Array</span><span class="p">&lt;</span><span class="n">String</span><span class="p">&gt;</span> <span class="p">=</span> <span class="n">arrayOf</span><span class="p">(</span><span class="s">&quot;android.permission.READ_CONTACTS&quot;</span><span class="p">,</span> <span class="s">&quot;android.permission.WRITE_CONTACTS&quot;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="k">fun</span> <span class="nf">MainActivity</span><span class="p">.</span><span class="n">showCameraWithPermissionCheck</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">if</span> <span class="p">(</span><span class="n">PermissionUtils</span><span class="p">.</span><span class="n">hasSelfPermissions</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="p">*</span><span class="n">PERMISSION_SHOWCAMERA</span><span class="p">))</span> <span class="p">{</span>
</span><span class='line'>    <span class="n">showCamera</span><span class="p">()</span>
</span><span class='line'>  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">if</span> <span class="p">(</span><span class="n">PermissionUtils</span><span class="p">.</span><span class="n">shouldShowRequestPermissionRationale</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="p">*</span><span class="n">PERMISSION_SHOWCAMERA</span><span class="p">))</span> <span class="p">{</span>
</span><span class='line'>      <span class="n">showRationaleForCamera</span><span class="p">(</span><span class="n">MainActivityShowCameraPermissionRequest</span><span class="p">(</span><span class="k">this</span><span class="p">))</span>
</span><span class='line'>    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>      <span class="n">ActivityCompat</span><span class="p">.</span><span class="n">requestPermissions</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="n">PERMISSION_SHOWCAMERA</span><span class="p">,</span> <span class="n">REQUEST_SHOWCAMERA</span><span class="p">)</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">fun</span> <span class="nf">MainActivity</span><span class="p">.</span><span class="n">showContactsWithPermissionCheck</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">if</span> <span class="p">(</span><span class="n">PermissionUtils</span><span class="p">.</span><span class="n">hasSelfPermissions</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="p">*</span><span class="n">PERMISSION_SHOWCONTACTS</span><span class="p">))</span> <span class="p">{</span>
</span><span class='line'>    <span class="n">showContacts</span><span class="p">()</span>
</span><span class='line'>  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">if</span> <span class="p">(</span><span class="n">PermissionUtils</span><span class="p">.</span><span class="n">shouldShowRequestPermissionRationale</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="p">*</span><span class="n">PERMISSION_SHOWCONTACTS</span><span class="p">))</span> <span class="p">{</span>
</span><span class='line'>      <span class="n">showRationaleForContacts</span><span class="p">(</span><span class="n">MainActivityShowContactsPermissionRequest</span><span class="p">(</span><span class="k">this</span><span class="p">))</span>
</span><span class='line'>    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>      <span class="n">ActivityCompat</span><span class="p">.</span><span class="n">requestPermissions</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="n">PERMISSION_SHOWCONTACTS</span><span class="p">,</span> <span class="n">REQUEST_SHOWCONTACTS</span><span class="p">)</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">fun</span> <span class="nf">MainActivity</span><span class="p">.</span><span class="n">onRequestPermissionsResult</span><span class="p">(</span><span class="n">requestCode</span><span class="p">:</span> <span class="n">Int</span><span class="p">,</span> <span class="n">grantResults</span><span class="p">:</span> <span class="n">IntArray</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">when</span> <span class="p">(</span><span class="n">requestCode</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="n">REQUEST_SHOWCAMERA</span> <span class="p">-&gt;</span>
</span><span class='line'>     <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="n">PermissionUtils</span><span class="p">.</span><span class="n">verifyPermissions</span><span class="p">(*</span><span class="n">grantResults</span><span class="p">))</span> <span class="p">{</span>
</span><span class='line'>        <span class="n">showCamera</span><span class="p">()</span>
</span><span class='line'>      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>        <span class="k">if</span> <span class="p">(!</span><span class="n">PermissionUtils</span><span class="p">.</span><span class="n">shouldShowRequestPermissionRationale</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="p">*</span><span class="n">PERMISSION_SHOWCAMERA</span><span class="p">))</span> <span class="p">{</span>
</span><span class='line'>          <span class="n">onCameraNeverAskAgain</span><span class="p">()</span>
</span><span class='line'>        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>          <span class="n">onCameraDenied</span><span class="p">()</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>    <span class="n">REQUEST_SHOWCONTACTS</span> <span class="p">-&gt;</span>
</span><span class='line'>     <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="n">PermissionUtils</span><span class="p">.</span><span class="n">verifyPermissions</span><span class="p">(*</span><span class="n">grantResults</span><span class="p">))</span> <span class="p">{</span>
</span><span class='line'>        <span class="n">showContacts</span><span class="p">()</span>
</span><span class='line'>      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>        <span class="k">if</span> <span class="p">(!</span><span class="n">PermissionUtils</span><span class="p">.</span><span class="n">shouldShowRequestPermissionRationale</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="p">*</span><span class="n">PERMISSION_SHOWCONTACTS</span><span class="p">))</span> <span class="p">{</span>
</span><span class='line'>          <span class="n">onContactsNeverAskAgain</span><span class="p">()</span>
</span><span class='line'>        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>          <span class="n">onContactsDenied</span><span class="p">()</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">private</span> <span class="k">class</span> <span class="nc">MainActivityShowCameraPermissionRequest</span><span class="p">(</span><span class="n">target</span><span class="p">:</span> <span class="n">MainActivity</span><span class="p">)</span> <span class="p">:</span> <span class="n">PermissionRequest</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">private</span> <span class="k">val</span> <span class="py">weakTarget</span><span class="p">:</span> <span class="n">WeakReference</span><span class="p">&lt;</span><span class="n">MainActivity</span><span class="p">&gt;</span> <span class="p">=</span> <span class="n">WeakReference</span><span class="p">(</span><span class="n">target</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">override</span> <span class="k">fun</span> <span class="nf">proceed</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">val</span> <span class="py">target</span> <span class="p">=</span> <span class="n">weakTarget</span><span class="p">.</span><span class="k">get</span><span class="p">()</span> <span class="o">?:</span> <span class="k">return</span>
</span><span class='line'>    <span class="n">ActivityCompat</span><span class="p">.</span><span class="n">requestPermissions</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">PERMISSION_SHOWCAMERA</span><span class="p">,</span> <span class="n">REQUEST_SHOWCAMERA</span><span class="p">)</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">override</span> <span class="k">fun</span> <span class="nf">cancel</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">val</span> <span class="py">target</span> <span class="p">=</span> <span class="n">weakTarget</span><span class="p">.</span><span class="k">get</span><span class="p">()</span> <span class="o">?:</span> <span class="k">return</span>
</span><span class='line'>    <span class="n">target</span><span class="p">.</span><span class="n">onCameraDenied</span><span class="p">()</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">private</span> <span class="k">class</span> <span class="nc">MainActivityShowContactsPermissionRequest</span><span class="p">(</span><span class="n">target</span><span class="p">:</span> <span class="n">MainActivity</span><span class="p">)</span> <span class="p">:</span> <span class="n">PermissionRequest</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">private</span> <span class="k">val</span> <span class="py">weakTarget</span><span class="p">:</span> <span class="n">WeakReference</span><span class="p">&lt;</span><span class="n">MainActivity</span><span class="p">&gt;</span> <span class="p">=</span> <span class="n">WeakReference</span><span class="p">(</span><span class="n">target</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">override</span> <span class="k">fun</span> <span class="nf">proceed</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">val</span> <span class="py">target</span> <span class="p">=</span> <span class="n">weakTarget</span><span class="p">.</span><span class="k">get</span><span class="p">()</span> <span class="o">?:</span> <span class="k">return</span>
</span><span class='line'>    <span class="n">ActivityCompat</span><span class="p">.</span><span class="n">requestPermissions</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">PERMISSION_SHOWCONTACTS</span><span class="p">,</span> <span class="n">REQUEST_SHOWCONTACTS</span><span class="p">)</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">override</span> <span class="k">fun</span> <span class="nf">cancel</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">val</span> <span class="py">target</span> <span class="p">=</span> <span class="n">weakTarget</span><span class="p">.</span><span class="k">get</span><span class="p">()</span> <span class="o">?:</span> <span class="k">return</span>
</span><span class='line'>    <span class="n">target</span><span class="p">.</span><span class="n">onContactsDenied</span><span class="p">()</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p><code>REQUEST_*</code>ã‚„<code>PERMISSION_*</code>ã¯v2ã§ã¯<code>MainActivityPermissionsDispatcher</code>ã‚¯ãƒ©ã‚¹å†…ã§å®šç¾©ã•ã‚Œã¦ã„ã¾ã—ãŸãŒã€privateã®ãƒˆãƒƒãƒ—ãƒ¬ãƒ™ãƒ«ã§ã®å®šç¾©ã«å¤‰ã‚ã‚Šã¾ã—ãŸã€‚
ã¾ãŸã€<code>showCameraWithPermissionCheck</code>ã‚„<code>onRequestPermissionsResult</code>ã¯<code>MainActivity</code>ã®æ‹¡å¼µé–¢æ•°ã«ãªã£ã¦ã„ã¾ã™ã€‚ãã®ç‚ºã€<code>MainActivityPermissionsDispatcher</code>ã‚¯ãƒ©ã‚¹ãŒãªããªã‚Šã¾ã—ãŸã€‚(Javaã®æ–¹ã§ã¯å­˜åœ¨ã—ã¦ã„ã¾ã™ã€‚)</p>

<h2>ãªã‚“ã§ã“ã‚“ãªå¤‰æ›´ã«ãªã£ãŸã®ã‹ï¼Ÿ</h2>

<h3>Kotlinã®æ‹¡å¼µé–¢æ•°</h3>

<p><a href="https://github.com/square/kotlinpoet">KotlinPoet</a>ã®å‡ºç¾ã‹ã‚‰ã€ã“ã‚Œã‚’ä½¿ã£ã¦Kotlinã‚³ãƒ¼ãƒ‰ã®ç”Ÿæˆã—ã¦ã¿ã‚ˆã†->ã©ã†ã›ãªã‚‰Kotlinã£ã½ãæ‹¡å¼µé–¢æ•°ã«ã—ã¦ã¿ã‚ˆã†ï¼ã¨ã„ã†æµã‚Œã§æ‹¡å¼µé–¢æ•°ã‚’ä½¿ã†ã“ã¨ã«ãªã‚Šã¾ã—ãŸã€‚</p>

<p>è©³ç´°ã¯ä»¥ä¸‹ã®Issueã‚’ç¢ºèªã—ã¦ã¿ã¦ä¸‹ã•ã„ã€‚</p>

<p><a href="https://github.com/permissions-dispatcher/PermissionsDispatcher/issues/320">https://github.com/permissions-dispatcher/PermissionsDispatcher/issues/320</a></p>

<h3>XxxWithPermissionCheckã¸ã®ãƒªãƒãƒ¼ãƒ </h3>

<p>ä»¥ä¸‹ã®Issueã§å•é¡Œæèµ·ã•ã‚Œã¾ã—ãŸã€‚</p>

<p><a href="https://github.com/permissions-dispatcher/PermissionsDispatcher/issues/355">https://github.com/permissions-dispatcher/PermissionsDispatcher/issues/355</a></p>

<p>ã“ã®Issueã§ã¯æ¼ ç„¶ã¨ã—ãŸè³ªå•ã§ã—ãŸãŒã€Kotlinãƒ¦ãƒ¼ã‚¶ã«å¯¾ã—ã¦ã€æ‹¡å¼µé–¢æ•°ã¨ã—ã¦æä¾›ã™ã‚‹å ´åˆã€<code>WithCheck</code>ã§ã¯æ„å‘³ãŒã‚ã‹ã‚‰ãªã„ã®ã§ã¯ãªã„ã‹ï¼Ÿã¨ã„ã†è©±ã‹ã‚‰ä¸€æ°—ã«v3.0ã«å°å…¥ã™ã‚‹æµã‚Œã«ãªã‚Šã¾ã—ãŸã€‚</p>

<h2>æ‡¸å¿µäº‹é …</h2>

<h3>Kotlinå‘ã‘ã®lint</h3>

<p>PermissionsDispatcherã¯ã‚«ã‚¹ã‚¿ãƒ lintã‚’æä¾›ã—ã¦ã„ã¾ã™ãŒã€Kotlinå®Ÿè£…å‘ã‘ã®lintã®å¯¾å¿œãŒã¾ã çµ‚ã‚ã£ã¦ã„ã¾ã›ã‚“ã€‚(å®Ÿéš›ã®å•é¡Œã¯UASTã®Kotlinå¯¾å¿œ)</p>

<p>ã“ã®ä»¶ã«é–¢ã™ã‚‹Issueã¯ä»¥ä¸‹</p>

<p><a href="https://github.com/permissions-dispatcher/PermissionsDispatcher/issues/373">https://github.com/permissions-dispatcher/PermissionsDispatcher/issues/373</a></p>

<h3>Intellij Plugin</h3>

<p><a href="https://github.com/permissions-dispatcher/permissions-dispatcher-plugin">permissions-dispatcher-plugin</a>ã¨è¨€ã†Intellijãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã§ã™ãŒã€ãƒ¡ã‚¤ãƒ³é–‹ç™ºè€…ã® <a href="https://github.com/shiraji">@shiraji</a> ãŒã‚µãƒœã£ã¦ã„ã‚‹ç‚ºã€v3å¯¾å¿œãŒã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚ã¾ãŸ<a href="https://github.com/permissions-dispatcher/permissions-dispatcher-plugin/issues/79#issuecomment-346983436">ã‚‚ã†v2ã®å¯¾å¿œã—ãªãã¦è‰¯ãã­ï¼Ÿ</a>ã¨è¨€ã£ã¦ãŠã‚Šã€èª°ã‹ã‚‰ã‚‚åè«–ãŒãªã„ç‚ºã€æ€¥ã«v3ã®ã¿ã®ã‚µãƒãƒ¼ãƒˆã«ãªã‚‹äºˆå®šã§ã™ã€‚</p>

<p>ãã‚“ãªã«ã„ãªã„ã¨æ€ã„ã¾ã™ãŒãƒ»ãƒ»ãƒ»ã“ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’ä½¿ã£ã¦ã„ã¦ã€v2ã®ã¿ã—ã‹ä½¿ã£ã¦ã„ãªã„äººã¯ã“ã‚Œã‚’æ©Ÿã«v3ã¸ã®ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã‚’ã‚ˆã‚ã—ããŠé¡˜ã„ã„ãŸã—ã¾ã™ã€‚å¤šåˆ†ä»Šå¹´åº¦ä¸­ã«ã¯ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®æ–¹ã‚‚å¯¾å¿œã—ã¾ã™ã€‚</p>

<h2>ã‚ã‚“ã¾ã‚Šåˆ©ç”¨è€…é–¢ä¿‚ãªã„è©±</h2>

<h3>permissions-dispatcher orgãŒå‡ºæ¥ãŸ</h3>

<p><a href="https://github.com/hotchemi">@hotchemi</a>ã•ã‚“ã‹ã‚‰ã®ææ¡ˆã§ã€permissions-dispatcher orgãŒå‡ºæ¥ã¾ã—ãŸã€‚ãŠã‹ã’æ§˜ã§ã€ã¾ã™ã¾ã™ãƒ¡ãƒ³ãƒ†ãƒŠã¨ã—ã¦é ‘å¼µã‚ŠãŸã„ï¼ã¨æ€ãˆã‚‹ã‚ˆã†ã«ã€‚ä»¥ä¸‹ãŒãã®Issue</p>

<p><a href="https://github.com/permissions-dispatcher/PermissionsDispatcher/issues/353">https://github.com/permissions-dispatcher/PermissionsDispatcher/issues/353</a></p>

<p>æ•°æ—¥å‰ã«ã‚ã£ãŸ<a href="http://hotchemi.hateblo.jp/entry/2017/12/03/003912">PermissionsDispatcherã®ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆ</a>ã«ã‚‚åŒã˜ã‚ˆã†ãªã“ã¨ãŒè¨˜è¿°ã•ã‚Œã¦ã„ã¾ã—ãŸã€‚</p>

<h3>æŒ™å‹•ã‚’ç¢ºèªã™ã‚‹ãƒ†ã‚¹ãƒˆã‚’å¢—ã‚„ã—ãŸ</h3>

<p>7æœˆã«æ›¸ã„ãŸ<a href="http://shiraji.github.io/blog/2017/07/14/testing-against-annotation-processing/">Testing Against Annotation Processing</a>ã«è©³ç´°æ›¸ã„ã¦ã‚ã‚‹ã®ã§ã€èª­ã‚“ã§ãã ã•ã„!!!</p>

<h2>KotlinPoetã«é–¢ã—ã¦</h2>

<p>PermissionsDispatcherã®<a href="https://github.com/permissions-dispatcher/PermissionsDispatcher/tree/123e50a184e058ad6b4adb0b659a343d79813913/processor/src/main/kotlin/permissions/dispatcher/processor/impl/kotlin">ã“ã®è¾ºã‚Š</a>ã‚’çœºã‚ã‚‹ã¨KotlinPoetã®å®Ÿè£…ã®å‚è€ƒã«ãªã‚‹ã¨æ€ã„ã¾ã™ã€‚<a href="https://qiita.com/advent-calendar/2017/kotlin">Kotlin Advent Calendar</a> ã®16æ—¥ç›®ã«KotlinPoetã«é–¢ã™ã‚‹æŠ•ç¨¿ãŒã•ã‚Œã‚‹ã®ã§ã€ãã¡ã‚‰ã‚‚å‚ç…§ã—ã¦ä¸‹ã•ã„ã€‚</p>

<h2>æœ€å¾Œã«</h2>

<p>PermissionsDispatcherã¯éå¸¸ã«è‰¯ã„ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã€æ–°ã—ã„ä»•çµ„ã¿ã‚‚ç©æ¥µçš„ã«å–ã‚Šå…¥ã‚Œã¦ã„ã¾ã™ã€‚ä¸€ç·’ã«é–‹ç™ºã—ã¾ã›ã‚“ã‹ï¼Ÿ</p>

<p>ã¾ãŸã€æœ€è¿‘ã€ãƒ“ãƒ«ãƒ‰å‡ºæ¥ãªã„ã€‚ä½¿ã„æ–¹ãŒã‚ã‹ã‚‰ãªã„ã€‚ãªã©ãªã©READMEèª­ã‚“ã§ã¾ã›ã‚“çš„ãªissueã«ä¸ŠãŒã£ã¦ãã¾ã™ã€‚ã“ã‚Œã®å¯¾å¿œã«æ™‚é–“ã‚’å‰²ã„ã¦ã—ã¾ã„ã€é–‹ç™ºãŒæ»ã‚Šã‚¬ãƒã§ã™ã€‚ã‚‚ã—ã€PermissionsDispatcherã«å¯¾ã—ã¦ä½•ã‹è²¢çŒ®ã—ãŸã„ï¼ã¨è¨€ã†æ–¹ã¯ã€ ã“ã®ã‚ˆã†ãªissueã®å¯¾å¿œã‚„èª¿æŸ»ãªã©ãªã©ãŠæ‰‹ä¼ã„ã—ã¦é ‚ã‘ã‚‹ã¨éå¸¸ã«åŠ©ã‹ã‚Šã¾ã™ã€‚</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Testing Against Annotation Processing]]></title>
    <link href="http://shiraji.github.io/blog/2017/07/14/testing-against-annotation-processing/"/>
    <updated>2017-07-14T00:11:22+09:00</updated>
    <id>http://shiraji.github.io/blog/2017/07/14/testing-against-annotation-processing</id>
    <content type="html"><![CDATA[<p>ä»¥ä¸‹ã®PRã‚’æŠ•ã’ã¦ã€ãƒãƒ¼ã‚¸ã•ã‚Œã¾ã—ãŸã€‚</p>

<p>Add integration test cases for checking the behavior of generated code
<a href="https://github.com/hotchemi/PermissionsDispatcher/pull/339">https://github.com/hotchemi/PermissionsDispatcher/pull/339</a></p>

<p>ã“ã®PRã«ã¤ã„ã¦èªã£ã¦ã¿ã¾ã™ã€‚</p>

<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<!-- 728x90 -->


<p><ins class="adsbygoogle"
     style="display:inline-block;width:728px;height:90px"
     data-ad-client="ca-pub-3940616565912592"
     data-ad-slot="7693358062"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>




<!-- more -->


<h2>æƒ³å®šèª­è€…</h2>

<ul>
<li>Annotation Processingã«èˆˆå‘³ãŒã‚ã‚‹äºº</li>
<li>Annotation Processingã‚’åˆ©ç”¨ã—ãŸãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½œã£ã¦ã„ã‚‹äºº</li>
<li>PermissionsDispatcherã«èˆˆå‘³ãŒã‚ã‚‹äºº</li>
<li>ç´°ã‹ã„å˜èªã‚’æ°—ã«ã—ãªã„äºº</li>
</ul>


<h2>compile-testingã«ã‚ˆã‚‹ãƒ†ã‚¹ãƒˆ</h2>

<p>Annotation Processingã®ãƒ†ã‚¹ãƒˆã§æ¤œç´¢ã™ã‚‹ã¨ã ã„ãŸã„<a href="https://github.com/google/compile-testing">compile-testing</a>ã‚’ä½¿ãˆã¨æ›¸ã‹ã‚Œã¦ã„ã¾ã™ã€‚</p>

<p>compile-testingã¨ã¯</p>

<blockquote><p>A library for testing javac compilation with or without annotation processors</p></blockquote>

<p>ã§ã™ã€‚annotation processingã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã‚ˆãä½¿ã‚ã‚Œã‚‹æ‰‹æ³•ã¨ã—ã¦ã€ã‚³ãƒ¼ãƒ‰ã‚’èª­ã¿è¾¼ã¾ã›ã€compile-testingã‚’åˆ©ç”¨ã—æƒ³å®šé€šã‚Šã®ã‚³ãƒ¼ãƒ‰ã‚’å‡ºåŠ›ã—ã¦ã„ã‚‹ã‹ã‚’ç¢ºèªã—ã¦ã„ã¾ã™ã€‚</p>

<p>ã“ã‚“ãªæ„Ÿã˜ã§æ›¸ã„ã¦ã„ã¾ã™ã€‚</p>

<p><a href="https://github.com/shiraji/kenkenpa/blob/master/kenkenpa-compiler/src/test/java/com/github/shiraji/kenkenpa/compiler/HopTests.java#L17-L75">https://github.com/shiraji/kenkenpa/blob/master/kenkenpa-compiler/src/test/java/com/github/shiraji/kenkenpa/compiler/HopTests.java#L17-L75</a></p>

<ul>
<li>ãƒ¦ãƒ¼ã‚¶ãŒæ›¸ãã§ã‚ã‚ã†ã‚³ãƒ¼ãƒ‰(JavaFileObject source)ã‹ã‚‰compile-testingãŒç”Ÿæˆã™ã‚‹ã‚³ãƒ¼ãƒ‰ãŒæƒ³å®šã—ã¦ã„ã‚‹ç”Ÿæˆã‚³ãƒ¼ãƒ‰(JavaFileObject expectedSource)ã¨ç­‰ã—ã„ã‹ã©ã†ã‹ã‚’ç¢ºèªã—ã¾ã™ã€‚</li>
<li>ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ãªã©ãŒèµ·ã“ã•ãªã„ã‹ï¼Ÿã®ç¢ºèªã‚‚ã—ã¾ã™ã€‚</li>
</ul>


<p>ã“ã®ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã—ã€JUnitãŒå…¨ã¦ãƒ‘ã‚¹ã—ãŸå ´åˆã€æ€ã£ãŸé€šã‚Šã®ã‚³ãƒ¼ãƒ‰ãŒç”Ÿæˆã•ã‚Œã€ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚‚å•é¡Œãªã—ã§ã™ã€‚ç§ã¯ã“ã‚Œã ã‘ã§å®‰å¿ƒã—ã¦ã„ã¾ã—ãŸã€‚</p>

<h2>æŒ™å‹•ã®ãƒ†ã‚¹ãƒˆ</h2>

<p>compile-testingãŒé€šã‚Šã¾ã—ãŸï¼OKã§ã™ï¼ãƒ»ãƒ»ãƒ»ã§ã‚‚æœ¬å½“ã«ãã†ãªã‚“ã§ã—ã‚‡ã†ã‹ï¼Ÿ</p>

<p>ãƒ†ã‚¹ãƒˆã—ãŸã®ã¯compilerãŒæ€ã£ãŸé€šã‚Šã®ã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆã—ãŸã“ã¨ã‚’ç¢ºèªã—ãŸã ã‘ã§ã™ã€‚</p>

<p>æœ¬å½“ã«å¿…è¦ãªãƒ†ã‚¹ãƒˆã¯ã€ç”Ÿæˆã—ãŸã‚³ãƒ¼ãƒ‰ãŒå®Ÿéš›ã«æ€ã£ãŸé€šã‚Šå‹•ãã‹ã©ã†ã‹ã®æŒ™å‹•ã®ç¢ºèªã§ã‚ã‚‹ã¯ãšã§ã™ã€‚</p>

<p>ãƒ©ã‚¤ãƒ–ãƒ©ãƒªåˆ©ç”¨è€…ã‹ã‚‰ã™ã‚Œã°ã€æ¥µè«–ã€ç”Ÿæˆã•ã‚Œã‚‹ã‚³ãƒ¼ãƒ‰ãªã‚“ã¦ã©ã‚“ãªå½¢ã§ã‚‚è‰¯ã„ã®ã§ã™ã€‚æŒ™å‹•ã•ãˆæ­£ã—ã‘ã‚Œã°è‰¯ã„ã¯ãšã§ã™ã€‚(ãƒ¡ã‚½ãƒƒãƒ‰æ•°ã‚„å®¹é‡ã¨ã‹æ°—ã«ãªã‚‹ã‘ã©ã€‚ï¼‰
ãŒã€ãã®æŒ™å‹•ã®ç¢ºèªã¯compile-testingã§ã¯è¡Œã£ã¦ã„ã¾ã›ã‚“ã€‚</p>

<h2>ã§ã¯ã©ã†ã™ã‚‹ã‹ï¼Ÿ</h2>

<p>å®Ÿéš›ã«ç”Ÿæˆã—ãŸã‚³ãƒ¼ãƒ‰ã«å¯¾ã—ã¦ãƒ†ã‚¹ãƒˆã‚’æ›¸ã‘ã°è‰¯ã„ã¯ãšã§ã™ã€‚</p>

<p>å†’é ­ã®PermissionsDispatcherã®<a href="https://github.com/hotchemi/PermissionsDispatcher/pull/339">PR</a>ã§ã‚„ã£ãŸã“ã¨ã¨ã—ã¦</p>

<ul>
<li>testãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä½œæˆã—ãŸ(è¨­å®šã«ã‚ˆã‚‹ç”Ÿæˆã‚³ãƒ¼ãƒ‰ã®é•ã„ãŒã‚ã‚‹ã®ã§test-v13ã‚‚ä½œã£ã¦ã„ã¾ã™ã€‚)</li>
<li>testãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å†…ã§å®Ÿéš›ã«PermissionsDispatcherã‚’åˆ©ç”¨ã™ã‚‹ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ãŸ <a href="https://github.com/hotchemi/PermissionsDispatcher/pull/339/files#diff-fd72dbeb86d7072fd2fc764574b85633">https://github.com/hotchemi/PermissionsDispatcher/pull/339/files#diff-fd72dbeb86d7072fd2fc764574b85633</a></li>
<li>ä¸Šè¨˜ã®ã‚³ãƒ¼ãƒ‰ã§ç”Ÿæˆã•ã‚Œã‚‹ã‚³ãƒ¼ãƒ‰ã«é–¢ã™ã‚‹ãƒ†ã‚¹ãƒˆã‚’æ›¸ã„ãŸ <a href="https://github.com/hotchemi/PermissionsDispatcher/pull/339/files#diff-178f9383e58a228e87ded8c49a97b492">https://github.com/hotchemi/PermissionsDispatcher/pull/339/files#diff-178f9383e58a228e87ded8c49a97b492</a></li>
</ul>


<p>PermissionsDispatcherã¯<a href="https://github.com/hotchemi/PermissionsDispatcher#2-delegate-to-generated-class">Delegate to generated class</a>ã«ã‚ã‚‹é€šã‚Šã€2ã¤ã®publicãƒ¡ã‚½ãƒƒãƒ‰ã‚’ç”Ÿæˆã—ã¾ã™ã€‚ãã“ã§ã€ã“ã®2ã¤ã®ãƒ¡ã‚½ãƒƒãƒ‰ã«å¯¾ã—ã€PowerMockitoã€Robolectricãªã©ãƒ•ãƒ«æ´»ç”¨ã—ã¦ãƒ†ã‚¹ãƒˆã‚’æ›¸ãã¾ã—ãŸã€‚</p>

<p>ã“ã®ãƒ†ã‚¹ãƒˆã®ãƒ¡ãƒªãƒƒãƒˆã¨ã—ã¦ã€ä»Šå¾ŒPermissionsDispatcherã¯<a href="https://github.com/hotchemi/PermissionsDispatcher/issues/320">Kotlinã¯Kotlinã‚‰ã—ã„ã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆã—ã‚ˆã†ãœï¼</a>ã¨ã„ã†è©±ãŒä¸ŠãŒã£ã¦ãŠã‚Šã€Kotlinã‚‰ã—ã„ã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆã—ãŸã¨ã—ã¦ã‚‚ã€ã“ã®ãƒ†ã‚¹ãƒˆãŒé€šã‚Šã•ãˆã™ã‚Œã°ã€ã‚ãã¾ã§ç†è«–ä¸Šã§ã™ãŒã€ã©ã‚“ãªã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆã—ã¦ã‚‚å•é¡Œãªã„ã¨è¨€ãˆã‚‹ã¯ãšã§ã™ã€‚</p>

<h2>compile-testingæ¨ã¦ã‚‹ã¹ããªã®ï¼Ÿ</h2>

<p>æ¨ã¦ã¡ã‚ƒãƒ€ãƒ¡ã§ã™ã€‚å†’é ­ã®PRã§ã¯ç”Ÿæˆã‚³ãƒ¼ãƒ‰ãŒå¿…é ˆã«ãªã‚‹ãŸã‚ã€æ­£å¸¸ç³»ã®ãƒ†ã‚¹ãƒˆã—ã‹è¡Œã†ã“ã¨ãŒå‡ºæ¥ã¾ã›ã‚“ã€‚ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸå ´åˆã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãŒé©åˆ‡ã«è¡Œã‚ã‚Œã¦ã„ã‚‹ã‹ï¼Ÿã®ç¢ºèªã¨ã—ã¦ã¯éå¸¸ã«æœ‰åŠ¹ã«æ´»ç”¨ã§ãã¾ã™ã€‚</p>

<p>compile-testingãŒä½•ã‚’ãƒ†ã‚¹ãƒˆã—ã¦ã„ã‚‹ã®ã‹ã‚’ã—ã£ã‹ã‚ŠæŠŠæ¡ã—ã€é©æé©æ‰€ã§ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®é¸å®šãŒä¸€ç•ªã ã¨æ€ã„ã¾ã™ã€‚</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Visualize Kotlin substringXxx Methods]]></title>
    <link href="http://shiraji.github.io/blog/2017/06/19/string-dot-substring-methods/"/>
    <updated>2017-06-19T04:41:47+09:00</updated>
    <id>http://shiraji.github.io/blog/2017/06/19/string-dot-substring-methods</id>
    <content type="html"><![CDATA[<p>I found very hard time to memorize the following methods.</p>

<ul>
<li>substringAfter</li>
<li>substringAfterLast</li>
<li>substringBefore</li>
<li>substringBeforeLast</li>
</ul>


<p>Here is the visuals that illustrate the differences between these methods.</p>

<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<!-- 728x90 -->


<p><ins class="adsbygoogle"
     style="display:inline-block;width:728px;height:90px"
     data-ad-client="ca-pub-3940616565912592"
     data-ad-slot="7693358062"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>




<!-- more -->


<h2>substringAfter</h2>

<p><code>substringAfter</code> tries to find the character(s) from &ldquo;beginning&rdquo;, and substrings &ldquo;after&rdquo; the characters</p>

<p><img src="https://raw.githubusercontent.com/wiki/shiraji/images/blog/images/substrings/substringAfter.png" alt="substringAfter" /></p>

<h2>substringAfterLast</h2>

<p><code>substringAfterLast</code> tries to find the character(s) from &ldquo;last&rdquo;, and substrings &ldquo;after&rdquo; the characters</p>

<p><img src="https://raw.githubusercontent.com/wiki/shiraji/images/blog/images/substrings/substringAfterLast.png" alt="substringAfterLast" /></p>

<h2>substringBefore</h2>

<p><code>substringBefore</code> tries to find the character(s) from &ldquo;beginning&rdquo;, and substrings &ldquo;before&rdquo; the characters</p>

<p><img src="https://raw.githubusercontent.com/wiki/shiraji/images/blog/images/substrings/substringBefore.png" alt="substringBefore" /></p>

<h2>substringBeforeLast</h2>

<p><code>substringBeforeLast</code> tries to find the character(s) from &ldquo;last&rdquo;, and substrings &ldquo;before&rdquo; the characters</p>

<p><img src="https://raw.githubusercontent.com/wiki/shiraji/images/blog/images/substrings/substringBeforeLast.png" alt="substringBeforeLast" /></p>

<h1>Text Summary</h1>

<p>The following list is the summary of these methods.</p>

<ul>
<li>&ldquo;Last&rdquo; -> find a match from the end</li>
<li>no &ldquo;Last&rdquo; -> find a match from the beginning</li>
<li>&ldquo;Before&rdquo; -> get all text before the match</li>
<li>&ldquo;After&rdquo; -> get all text after the match</li>
<li>The substring result does not include the matched text</li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[How to Extend Alt+Enter]]></title>
    <link href="http://shiraji.github.io/blog/2016/12/17/how-to-extend-alt+enter/"/>
    <updated>2016-12-17T00:00:01+09:00</updated>
    <id>http://shiraji.github.io/blog/2016/12/17/how-to-extend-alt+enter</id>
    <content type="html"><![CDATA[<p>ã“ã®è¨˜äº‹ã¯<a href="http://qiita.com/advent-calendar/2016/jetbrains">JetBrains Advent Calendar 2016</a>ã®12/17ã®è¨˜äº‹ã§ã™ã€‚</p>

<p>Intellij IDEAã ã‘ã§ã¯ãªã„ã®ã§ã™ãŒã€Alt+Enter(Intention)ã¯è‡ªåˆ†ã§æ‹¡å¼µã—ãŸã‚‚ã®ã‚’ä½œã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚</p>

<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<!-- 728x90 -->


<p><ins class="adsbygoogle"
     style="display:inline-block;width:728px;height:90px"
     data-ad-client="ca-pub-3940616565912592"
     data-ad-slot="7693358062"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>




<!-- more -->


<h1>è‡ªå·±ç´¹ä»‹</h1>

<p>è‡ªåˆ†ã®ãƒšãƒ¼ã‚¸ã«ãƒªã‚¹ãƒˆã•ã‚Œã¦ã„ã‚‹Intellijãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãƒšãƒ¼ã‚¸ãŒãƒšãƒ¼ã‚¸ãƒ³ã‚°ã•ã‚ŒãŸã‚‰ãƒ—ãƒ©ã‚°ã‚¤ãƒ³é–‹ç™ºè¾ã‚ã‚ˆã†ã¨èª“ã£ã¦ã„ã¦ã€æœ€è¿‘ä¸­ã®äººã¨è©±ã—ãŸã‚‰ãƒšãƒ¼ã‚¸ãƒ³ã‚°æ©Ÿèƒ½ãªã„ã‘ã©ï¼Ÿï½—ã¨ç”Ÿæ¶¯ç¾å½¹ãƒ—ãƒ©ã‚°ã‚¤ãƒ³é–‹ç™ºè€…ã¨ã—ã¦ã‚„ã£ã¦ã„ãã“ã¨ãŒæ±ºå®šã—ãŸäººé–“ã§ã™ã€‚</p>

<p>Intentionã ã‘ã§ã¯ãªãã€Inspectionãªã©ã‚‚ä½œæˆã—ã¦ãŠã‚Šã€Kotlinã®ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ãƒˆã‚‚ã—ã¦ã„ã¾ã™ã€‚Kotlinã®ä¸»ãªã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ãƒˆã‚‚Inspection/Intentionãªã®ã§ã€ã‚ã‚‹ç¨‹åº¦èª¬æ˜å‡ºæ¥ã‚‹ãƒ¬ãƒ™ãƒ«ã ã¨æ€ã„ã¾ã™ã€‚</p>

<h1>æƒ³å®šèª­è€…</h1>

<ul>
<li>Intentionã‚’ä½œã£ã¦ã¿ãŸã„</li>
<li>ãƒ—ãƒ©ã‚°ã‚¤ãƒ³é–‹ç™ºã«èˆˆå‘³ãŒã‚ã‚‹</li>
<li>Intellijã®æ©Ÿèƒ½ã‚’ã‚ã‚‹ç¨‹åº¦ç†è§£ã—ã¦ã„ã‚‹</li>
<li>kotlinã®æ–‡æ³•ãŒãã‚Œãªã‚Šã«ç†è§£ã§ãã‚‹</li>
</ul>


<h1>Custom Intentionã‚’ä½œã£ã¦ã¿ã‚‹</h1>

<p>ä»Šå›ã‚µãƒ³ãƒ—ãƒ«ã¨ã—ã¦ã€Intentionå‘¨ã‚Šã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’ãƒªãƒªãƒ¼ã‚¹ã—ã¾ã—ãŸã€‚
<a href="https://plugins.jetbrains.com/plugin/9271">https://plugins.jetbrains.com/plugin/9271</a></p>

<p>ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰
<a href="https://github.com/shiraji/databinding-support">https://github.com/shiraji/databinding-support</a></p>

<p>ã“ã‚Œã‚’ãƒ™ãƒ¼ã‚¹ã«XMLãƒ•ã‚¡ã‚¤ãƒ«ã«å¯¾ã—ã¦ã®Intentionã®èª¬æ˜ã‚’ã—ã¾ã™ã€‚</p>

<p>ä»Šå›ã¯ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã§ã‚ã‚Šã€<code>&lt;layout&gt;</code>ã‚¿ã‚°ãŒrootã‚¿ã‚°ã§ã¯ãªã‹ã£ãŸå ´åˆã€<code>&lt;layout&gt;</code>ã‚¿ã‚°ã§ãƒ©ãƒƒãƒ—ã™ã‚‹ã¨ã„ã†Intentionã‚’ä½œæˆã—ã¾ã™ã€‚</p>

<p><img src="https://raw.githubusercontent.com/shiraji/databinding-support/master/websites/images/wrap.gif" alt="wrap" /></p>

<p>ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®ä½œæˆæ–¹æ³•ãªã©ã¯å‚è€ƒãƒªãƒ³ã‚¯ã«ã¾ã¨ã‚ã¦ã‚ã‚Šã¾ã™ã®ã§ã€ãã¡ã‚‰ã‚’å‚ç…§ã—ã¦ä¸‹ã•ã„ã€‚</p>

<h2>Intentionã‚¯ãƒ©ã‚¹</h2>

<p><code>IntentionAction</code>ã‚’ç¶™æ‰¿ã—ã¾ã™ã€‚ä»¥ä¸‹ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®Ÿè£…ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p>

<h3><code>getText(): String</code></h3>

<p>popupã§è¡¨ç¤ºã•ã‚Œã‚‹æ™‚ã®æ–‡å­—åˆ—</p>

<h3><code>getFamilyName(): String</code></h3>

<p>ã‚ˆãã‚ã‹ã‚‰ã­ï½—(intellij-community/kotlin repoå†…ã§ã‚‚getTextå‘¼ã³å‡ºã—ã¦ã‚‹ã ã‘ã®ã¨ã“ã‚ãŒå¤šã„ã€‚)</p>

<h3><code>startInWriteAction(): Boolean</code></h3>

<p>Write Actionå†…ã§å®Ÿè¡Œã™ã‚‹ã‹ã©ã†ã‹ã€‚</p>

<h3><code>isAvailable(project: Project, editor: Editor?, file: PsiFile?): Boolean</code></h3>

<p>ãã®Intentionã‚’åˆ©ç”¨å¯èƒ½ã‹ã©ã†ã‹åˆ¤å®šã™ã‚‹</p>

<h3><code>invoke(project: Project, editor: Editor?, file: PsiFile?)</code></h3>

<p>IntentionãŒé¸æŠæ™‚ã«å®Ÿè¡Œã•ã‚Œã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ã€‚</p>

<p>ä»Šå›ã¯å®Ÿéš›ã«ä»¥ä¸‹ã®ã‚ˆã†ãªã‚¤ãƒ¡ãƒ¼ã‚¸ã«ãªã‚Šã¾ã—ãŸã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class='kotlin'><span class='line'><span class="k">package</span> <span class="nn">com.github.shiraji.databindinglayout.intentions</span>
</span><span class='line'>
</span><span class='line'><span class="k">class</span> <span class="nc">ConvertToDatabindingLayoutIntention</span> <span class="p">:</span> <span class="n">IntentionAction</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">override</span> <span class="k">fun</span> <span class="nf">getText</span><span class="p">()</span> <span class="p">=</span> <span class="s">&quot;Convert to databinding layout&quot;</span>
</span><span class='line'>    <span class="k">override</span> <span class="k">fun</span> <span class="nf">getFamilyName</span><span class="p">()</span> <span class="p">=</span> <span class="s">&quot;Convert to databinding layout&quot;</span>
</span><span class='line'>    <span class="k">override</span> <span class="k">fun</span> <span class="nf">startInWriteAction</span><span class="p">()</span> <span class="p">=</span> <span class="k">true</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">override</span> <span class="k">fun</span> <span class="nf">isAvailable</span><span class="p">(</span><span class="n">project</span><span class="p">:</span> <span class="n">Project</span><span class="p">,</span> <span class="n">editor</span><span class="p">:</span> <span class="n">Editor</span><span class="p">?,</span> <span class="n">file</span><span class="p">:</span> <span class="n">PsiFile</span><span class="p">?):</span> <span class="n">Boolean</span> <span class="p">{</span>
</span><span class='line'>        <span class="c1">// rootã‚¿ã‚°ãŒlayoutã§ã¯ãªãã€androidã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‹ã©ã†ã‹ã‚’åˆ¤å®šã€‚</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">override</span> <span class="k">fun</span> <span class="nf">invoke</span><span class="p">(</span><span class="n">project</span><span class="p">:</span> <span class="n">Project</span><span class="p">,</span> <span class="n">editor</span><span class="p">:</span> <span class="n">Editor</span><span class="p">?,</span> <span class="n">file</span><span class="p">:</span> <span class="n">PsiFile</span><span class="p">?)</span> <span class="p">{</span>
</span><span class='line'>        <span class="c1">// æ–°è¦&lt;layout&gt;ã‚¿ã‚°ã‚’ä½œæˆã—ã€å¿…è¦ãªattributeã‚’è¿½åŠ ã—ã€root tagã¨ã™ã‚‹ã€‚</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p><a href="https://github.com/shiraji/databinding-support/blob/1.0.2/src/main/kotlin/com/github/shiraji/databindinglayout/intentions/ConvertToDatabindingLayoutIntention.kt">https://github.com/shiraji/databinding-support/blob/1.0.2/src/main/kotlin/com/github/shiraji/databindinglayout/intentions/ConvertToDatabindingLayoutIntention.kt</a></p>

<p>ã“ã®rootã‚¿ã‚°ã‹ã©ã†ã‹ã¨ã‹ã€androidã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‹ã©ã†ã‹ã®åˆ¤å®šã¨ã‹ã€ä½•ã‚’ã©ã†æ›¸ãæ›ãˆã‚‹ã®ã‹ã¨ã‹ãŒãŸã¶ã‚“ä¸€ç•ªé›£ã—ã„éƒ¨åˆ†ã ã¨æ€ã„ã¾ã™ã€‚ãŸã ã€ã“ã“ã¯ãã‚Œãã‚Œã®Intentionã‚„ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã§é•ã†ã®ã§ã‚³ãƒ¼ãƒ‰èª­ã‚“ã§é ‘å¼µã‚Œï½—ã¨ã—ã‹è¨€ãˆã¾ã›ã‚“ã€‚ã€‚ã€‚</p>

<p>å”¯ä¸€ã‚ã‚‹å…±é€šç‚¹ã¨ã—ã¦ã¯ãƒ•ã‚¡ã‚¤ãƒ«ãªã©ã®èª­ã¿è¾¼ã¿ã‚„è§£æã¯Psiã‚’ä½¿ã„ã¾ã™ã€‚ä¾‹ãˆã°ã€xmlã‚¿ã‚°ã ã£ãŸã‚‰<a href="https://github.com/JetBrains/intellij-community/blob/master/xml/xml-psi-api/src/com/intellij/psi/xml/XmlTag.java">XmlTag</a>ã€<a href="https://github.com/JetBrains/intellij-community/blob/master/xml/xml-psi-api/src/com/intellij/psi/xml/XmlAttribute.java">XmlAttribute</a>ã‚’ä½¿ã„ã¾ã™ã€‚<code>PsiElement#replace()</code>ã§ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã®ç½®æ›ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚</p>

<p>ãã‚Œãã‚Œã®Elementä½œæˆãã‚Œãã‚Œã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚¿ã‚¤ãƒ—æ¯ã«FactoryãŒç”¨æ„ã•ã‚Œã¦ã„ã¾ã™ã€‚Xmlãªã‚‰<code>XmlElementFactory</code>ã§ä½œæˆã—ã¦ã„ã¾ã™ã€‚Javaã®å ´åˆã ã¨<code>PsiElementFactory</code>ã ã—ã€Kotlinãªã‚‰<code>KtPsiFactory</code>ã‚’ä½¿ã„ã¾ã™ã€‚</p>

<h2>plugin.xml</h2>

<p>Intentionã‚¯ãƒ©ã‚¹ã‚’plugin.xmlã«å®šç¾©ã—ã¾ã™ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'>    <span class="nt">&lt;intentionAction&gt;</span>
</span><span class='line'>        <span class="nt">&lt;className&gt;</span>com.github.shiraji.databindinglayout.intentions.ConvertToDatabindingLayoutIntention<span class="nt">&lt;/className&gt;</span>
</span><span class='line'>        <span class="nt">&lt;category&gt;</span>Android<span class="nt">&lt;/category&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/intentionAction&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p><a href="https://github.com/shiraji/databinding-support/blob/1.0.2/src/main/resources/META-INF/plugin.xml#L31-L34">https://github.com/shiraji/databinding-support/blob/1.0.2/src/main/resources/META-INF/plugin.xml#L31-L34</a></p>

<h2>Intentionã®èª¬æ˜æ–‡ã‚’æ›¸ã</h2>

<p>è‡ªåˆ†ã¯ã¡ã‚‡ãã¡ã‚‡ãå¿˜ã‚Œã‚‹ã®ã§ã™ãŒãƒ»ãƒ»ãƒ»(å®Ÿéš›ã“ã‚Œã‚’å¿˜ã‚Œã¦ã€1.0.1->1.0.2ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³æ›´æ–°ã‚’ã—ãŸã€‚)</p>

<p>ã“ã‚“ãªæ„Ÿã˜ã§è¨­å®šç”»é¢ã«èª¬æ˜æ–‡ã‚’æ›¸ãã“ã¨ãŒå¯èƒ½ã§ã™ã€‚</p>

<p><img src="https://raw.githubusercontent.com/wiki/shiraji/images/blog/images/how-to-create-custom-intention/intention_setting.gif" alt="intention_settings" /></p>

<p>ä»¥ä¸‹ã®3ã¤ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¾ã™ã€‚</p>

<ul>
<li>after.xml.template</li>
<li>before.xml.template</li>
<li>description.html</li>
</ul>


<p>ãã‚Œãã‚ŒãŒè¡¨ç¤ºã•ã‚Œã‚‹ã®ã¯ã“ã“ã§ã™ã€‚</p>

<p><img src="https://raw.githubusercontent.com/wiki/shiraji/images/blog/images/how-to-create-custom-intention/intention_desc.png" alt="intention_desc" /></p>

<p>ä¾‹ãˆã°ã€Javaãƒ•ã‚¡ã‚¤ãƒ«ã®ã®Intentionã ã£ãŸå ´åˆã€<code>after.java.template</code>ã®ã‚ˆã†ã«ãƒ•ã‚¡ã‚¤ãƒ«åã‚’<code>after.{æ‹¡å¼µå­}.template</code>ã¨ã™ã‚Œã°è‰¯ã„ã§ã™ã€‚<code>before</code>ã®ã»ã†ã‚‚åŒã˜ã§ã™ã€‚</p>

<p>é…ç½®ç®‡æ‰€ã¯<code>resourcesãƒ•ã‚©ãƒ«ãƒ€/intentionDescriptions/INTENSIONå/</code>ã«é…ç½®ã—ã¾ã™ã€‚</p>

<p><code>ConvertToDatabindingLayoutIntention</code>ã®å ´åˆã€ã“ã‚“ãªæ„Ÿã˜ã€‚</p>

<p><a href="https://github.com/shiraji/databinding-support/tree/1.0.2/src/main/resources/intentionDescriptions/ConvertToDatabindingLayoutIntention">https://github.com/shiraji/databinding-support/tree/1.0.2/src/main/resources/intentionDescriptions/ConvertToDatabindingLayoutIntention</a></p>

<h1>æœ€å¾Œã«</h1>

<p>Happy <code>alt+enter</code> life!</p>

<h1>å‚è€ƒãƒªãƒ³ã‚¯</h1>

<p>IntelliJ IDEAã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ â€“ ã‚¤ãƒ³ãƒ†ãƒ³ã‚·ãƒ§ãƒ³</p>

<p><a href="http://samuraism.com/products/jetbrains/intellij-idea/quickstart/intentions">http://samuraism.com/products/jetbrains/intellij-idea/quickstart/intentions</a></p>

<p>ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä½œæˆæ‰‹é †</p>

<p><a href="http://www.jetbrains.org/intellij/sdk/docs/index.html">http://www.jetbrains.org/intellij/sdk/docs/index.html</a></p>

<p>gradleã‚’ä½¿ã†å ´åˆ</p>

<p><a href="http://www.jetbrains.org/intellij/sdk/docs/tutorials/build_system.html?search=gradle">http://www.jetbrains.org/intellij/sdk/docs/tutorials/build_system.html?search=gradle</a></p>

<p>ã“ã®gradleãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¦ã‚£ã‚¶ãƒ¼ãƒ‰ã¯ãªã„ã®ã§ã€gradle-intellij-plugin wizardã‚’ä½¿ã†ã¨ä¾¿åˆ©ã ã‚ˆ(ã‚¹ãƒ†ãƒ)</p>

<p><a href="https://plugins.jetbrains.com/plugin/8450">https://plugins.jetbrains.com/plugin/8450</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[What's Good About Kotlin in Android Development]]></title>
    <link href="http://shiraji.github.io/blog/2016/12/11/whats-good-about-kotlin-in-android-development/"/>
    <updated>2016-12-11T00:00:01+09:00</updated>
    <id>http://shiraji.github.io/blog/2016/12/11/whats-good-about-kotlin-in-android-development</id>
    <content type="html"><![CDATA[<p>ã“ã‚Œã¯<a href="http://qiita.com/advent-calendar/2016/kotlin">Kotlin Advent Calendar 2016</a>ã®12/11ã®è¨˜äº‹ã§ã™ã€‚</p>

<blockquote class="twitter-tweet" data-lang="ja"><p lang="ja" dir="ltr">kotlinã§ã‚„ã‚‹ã¨Androidç°¡å˜ã«æ›¸ã‘ã‚‹æ‰‹æ³•ã¾ã¨ã‚ã¨ã‹ãªã„ã‹ãªã€‚extentionã§bindingadapteræ›¸ãã¨ã‹ã€custom viewã®ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã‚’JvmOverloadsã§çœç•¥ã¨ã‹ã€‚</p>&mdash; ã—ã‚‰ã˜ (@shiraj_i) <a href="https://twitter.com/shiraj_i/status/768082977569898496">2016å¹´8æœˆ23æ—¥</a></blockquote>


<script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>


<p>8æœˆ23æ—¥ã«ã“ã‚“ãªã¤ã¶ã‚„ãã‚’ã—ã¦ã€ä»Šæ—¥ã¾ã§æºœã‚ãŸAndroidé–‹ç™ºã‚’ã—ã¦ã„ã¦ã€ã“ã†æ›¸ãã¨ç°¡å˜ã§ã‚­ãƒ¢ãƒã‚¤ã‚¤ï¼ï¼ï¼ã¨ã„ã†Kotlinã®æ–‡æ³•ã‚’ç´¹ä»‹ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚</p>

<p>(ã‚ãã¾ã§è‡ªåˆ†ãŒæ°—æŒã¡ã„ã„ã£ã¦ã ã‘ã ã‹ã‚‰ã­ï¼)</p>

<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<!-- 728x90 -->


<p><ins class="adsbygoogle"
     style="display:inline-block;width:728px;height:90px"
     data-ad-client="ca-pub-3940616565912592"
     data-ad-slot="7693358062"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>




<!-- more -->


<h1>è‡ªå·±ç´¹ä»‹</h1>

<p><a href="https://blog.jetbrains.com/kotlin/2016/09/kotlin-1-0-4-is-here/">Kotlin 1.0.4</a>, <a href="https://blog.jetbrains.com/kotlin/2016/11/kotlin-1-0-5-is-here/">Kotlin 1.0.5</a>ã§åå‰ãŒè¼‰ã£ãŸExternal Contributorsã®ä¸€äººã§ã™(å¬‰ã—ã„ã‹ã‚‰è‡ªæ…¢)ã€‚ä¸»ã«Kotlin Pluginã®é™çš„è§£æã«ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ãƒˆã—ã¦ã„ã¾ã™ã€‚Kotlinã§æ›¸ã‹ã‚Œã¦ã„ã‚‹<a href="https://github.com/hotchemi/PermissionsDispatcher">PermissionsDispatcher</a>ã®é–‹ç™ºã«ã‚‚å‚åŠ ã—ã¦ã„ã¾ã™ã€‚</p>

<p>Androidé–‹ç™ºçµŒé¨“3å¹´ã»ã©ã§ã€ä»Šã¯Androidã‚’Javaã§ã‚‚Kotlinã§ã‚‚é–‹ç™ºã—ã¦ã„ã¾ã™ã€‚</p>

<p>å°‘ã—ãã‚‰ã„ãªã‚‰ãƒ–ãƒ­ã‚°ã§Android/Kotlinãƒã‚¿æ›¸ã„ã¦ã‚‚ã„ã„ãƒ¬ãƒ™ãƒ«ã‹ãªï¼Ÿã¨æ€ã„ã¾ã™ã€‚</p>

<h1>å‰ææ¡ä»¶ã¨æƒ³å®šèª­è€…</h1>

<ul>
<li>Androidé–‹ç™ºã¯ã‚ã‚‹ç¨‹åº¦çŸ¥ã£ã¦ã„ã‚‹</li>
<li>Kotlinã§ã®Androidèˆˆå‘³ãŒã‚ã‚‹äºº</li>
<li>Kotlinã§ã®Androidé–‹ç™ºè‰¯ã„ã¨è¨€ã‚ã‚Œã¦ã‚‹ã‘ã©ã€ä½•ãŒã„ã„ã‹ã‚ã‹ã‚‰ã­ãªäºº</li>
</ul>


<p>Kotlinã®æ–‡æ³•ã¯Javaã‚³ãƒ¼ãƒ‰ã¨æ¯”è¼ƒã™ã‚Œã°ã ã„ãŸã„ã‚ã‹ã‚‹æ„Ÿã˜ã§è¨˜è¼‰ã—ã¦ã„ãã¾ã™ãŒã€ã‚‚ã—ã‚ã‹ã‚‰ãªã‘ã‚Œã°ã€<a href="https://twitter.com/shiraj_i">@shiraj_i</a>ã«ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³ã„ãŸã ã‘ã‚Œã°ç­”ãˆã¾ã™ã®ã§ã€ãŠæ°—è»½ã«è³ªå•ã—ã¦ä¸‹ã•ã„ã€‚</p>

<h1>ã‚­ãƒ¢ãƒã‚¤ã‚¤ï¼æ–‡æ³•ãŸã¡</h1>

<p>Kotlinã¯æ›¸ãã‚„ã™ã„ã¨ã‚ˆãè€³ã«ã—ã¾ã™ãŒã€å®Ÿéš›ã©ã†ã„ã†ã¨ã“ã‚ã§ã©ã†ã„ã†æ–‡æ³•ã«ã™ã‚‹ã¨ã€Œæ›¸ãã‚„ã™ã„ã€ã«ãªã‚‹ã®ã‹Javaã¨ã®æ¯”è¼ƒãŒã‚ã¾ã‚Šã‚ã‚Šã¾ã›ã‚“ã€‚ãã“ã§ç‹¬æ–­ã¨åè¦‹ã§æ°—æŒã¡ã„ã„æ–‡æ³•ã ã“ã‚Œï¼ã¨æ€ã£ãŸæ–‡æ³•ã‚„æ›¸ãæ–¹ã‚’ç´¹ä»‹ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚</p>

<p>Kotlinã§ä¸€ç•ªæœ‰åã§ã‚ã‚ã†æ©Ÿèƒ½ã€Nullå®‰å…¨ã‚„ã‚»ãƒŸã‚³ãƒ­ãƒ³ãƒ¬ã‚¹ã«é–¢ã—ã¦ã¯å¤šãã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚„ãƒ–ãƒ­ã‚°ãŒã‚ã‚Šã¾ã™ã®ã§å‰²æ„›ã—ã¾ã™ã€‚</p>

<h2>ä¸€è¡Œãƒ¡ã‚½ãƒƒãƒ‰</h2>

<p>ã‚ã‚‹ç‰¹å®šã®ãƒ†ã‚­ã‚¹ãƒˆã‚’è¿”ã™ã ã‘ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½œã‚‹æ™‚ã€Javaã§æ›¸ãã¨ã“ã‚“ãªæ„Ÿã˜ã«ãªã‚Šã¾ã™ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">public</span> <span class="n">String</span> <span class="nf">getName</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>  <span class="k">return</span> <span class="s">&quot;MyApp&quot;</span><span class="o">;</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Kotlinã§ã‚‚åŒã˜ã‚ˆã†ã«æ›¸ã‘ã¾ã™ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='kotlin'><span class='line'><span class="k">fun</span> <span class="nf">getName</span><span class="p">():</span> <span class="n">String</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">return</span> <span class="s">&quot;MyApp&quot;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>ãŸã ã€Kotlinã¯ä¸€è¡Œã§returnå‡ºæ¥ã‚‹å ´åˆã€<code>=</code>ã‚’ã¤ã‘ã¦<code>{}</code>ã‚’çœç•¥ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='kotlin'><span class='line'><span class="k">fun</span> <span class="nf">getName</span><span class="p">():</span> <span class="n">String</span> <span class="p">=</span> <span class="s">&quot;MyApp&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p>ã•ã‚‰ã«ã€æˆ»ã‚Šå€¤ã®å‹ãŒæ˜ã‚‰ã‹ãªå ´åˆã€å‹ã®æŒ‡å®šã—ãªãã¦ã‚‚è‰¯ã„ã®ã§</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='kotlin'><span class='line'><span class="k">fun</span> <span class="nf">getName</span><span class="p">()</span> <span class="p">=</span> <span class="s">&quot;MyApp&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p>çŸ­ãã¦ã ã„ã¶æ°—æŒã¡ã„ã„ã§ã™ã­ã€‚</p>

<p>ã“ã‚“ãªæ„Ÿã˜ã§ã€ä»¥ä¸‹ã‚‚Javaã®ä¾‹æ–‡ã‚’å‡ºã—ã¦ã€Kotlinã§æ°—æŒã¡è‰¯ããªã£ã¦ã„ãã¾ã™ã€‚ãã‚Œã§ã¯ã©ã‚“ã©ã‚“ã„ãã¾ã™ã€‚</p>

<h2>nullæ™‚ä½•ã™ã‚‹ï¼Ÿ</h2>

<p>ä¾‹ãˆã°ã€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒnullã ã£ãŸå ´åˆã€å³ãƒ¡ã‚½ãƒƒãƒ‰ã‚’æŠœã‘ã‚‹ã¨ã„ã†å‡¦ç†ã‚’æ›¸ãã¨ã—ã¾ã™ã€‚Javaã®å ´åˆã€çµæ§‹è‰²ã€…æ›¸ã‹ãªãã‚ƒã„ã‘ã¾ã›ã‚“ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">public</span> <span class="kt">void</span> <span class="nf">foo</span><span class="o">(</span><span class="nd">@Nullable</span> <span class="n">String</span> <span class="n">text</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>    <span class="k">if</span> <span class="o">(</span><span class="n">text</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="k">return</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>    <span class="c1">// ...</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Kotlinã¯nullæ™‚ã«ã“ã‚Œã‚’ã—ã¦ãã‚Œã¨ã„ã†<code>?:</code>æ–‡æ³•ãŒç”¨æ„ã•ã‚Œã¦ã„ã¾ã™ã€‚ãã‚Œã‚’ä½¿ã†ã¨ä¸€è¡Œã§æ›¸ã‘ã¡ã‚ƒã„ã¾ã™ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='kotlin'><span class='line'><span class="k">fun</span> <span class="nf">foo</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="n">String</span><span class="p">?)</span> <span class="p">{</span>
</span><span class='line'>    <span class="n">text</span> <span class="o">?:</span> <span class="k">return</span>
</span><span class='line'>    <span class="c1">// ...</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>nullæ™‚ã«åˆ¥å€¤ã‚’ä»£å…¥ã¨ã„ã†ã“ã¨ã‚‚å¯èƒ½ã§ã™ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='kotlin'><span class='line'><span class="k">fun</span> <span class="nf">foo</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="n">String</span><span class="p">?)</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">val</span> <span class="py">bar</span> <span class="p">=</span> <span class="n">text</span> <span class="o">?:</span> <span class="s">&quot;&quot;</span> <span class="c1">// textã‚’barã«ä»£å…¥ã™ã‚‹ã€‚textãŒnullã ã£ãŸå ´åˆã€ç©ºæ–‡å­—ã¨ã™ã‚‹ã€‚</span>
</span><span class='line'>    <span class="c1">// ...</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h2>ç©ºã‚¯ãƒ©ã‚¹</h2>

<p>Javaã§ã¯ç©ºã‚¯ãƒ©ã‚¹ã ã‚ã†ã¨ã€<code>{}</code>ã‚’æ›¸ã‹ãªãã¦ã¯ãªã‚Šã¾ã›ã‚“ã€‚ç‰¹ã«ç›®å°ç”¨ã®interfaceã¨ã‹ã§ã‚ã‚‹ã¨æ€ã„ã¾ã™ãŒ</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">interface</span> <span class="nc">Foo</span> <span class="o">{}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Kotlinã§ã¯ãƒœãƒ‡ã‚£ãŒç©ºã®ã‚¯ãƒ©ã‚¹ã®å ´åˆã€<code>{}</code>ã‚’æ›¸ã‹ãªãã¦è‰¯ã„ã®ã§</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='kotlin'><span class='line'><span class="n">interface</span> <span class="n">Foo</span>
</span></code></pre></td></tr></table></div></figure>


<p>ã‚‚ã¡ã‚ã‚“ã€classã§ã‚‚å¯èƒ½ã§ã™ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='kotlin'><span class='line'><span class="k">class</span> <span class="nc">Bar</span>
</span></code></pre></td></tr></table></div></figure>


<h2>ç©ºãƒ¡ã‚½ãƒƒãƒ‰</h2>

<p>ç©ºãƒ¡ã‚½ãƒƒãƒ‰ã€‚Javaã®å ´åˆã€<code>{}</code>ã‚’æ›¸ã‹ãªãã¦ã¯ãªã‚Šã¾ã›ã‚“ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">public</span> <span class="kt">void</span> <span class="nf">foo</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Kotlinã®å ´åˆã€ä¸€è¡Œãƒ¡ã‚½ãƒƒãƒ‰ã¨åŒã˜ã‚ˆã†ã«æ›¸ã‘ã¾ã™ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='kotlin'><span class='line'><span class="k">fun</span> <span class="nf">foo</span><span class="p">()</span> <span class="p">=</span> <span class="n">Unit</span>
</span></code></pre></td></tr></table></div></figure>


<p>ã‚ã‚Œï¼ŸãªãŒï½‹&hellip;æ°—æŒã¡ã„ã„ã§ã™ã­ï¼</p>

<h2>getter/setterçœç•¥</h2>

<p>Kotlinã§ã¯ã€getter/setterãŒã‚ã£ãŸå ´åˆã€propertyã¨ã—ã¦ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ã«ãªã‚Šã¾ã™ã€‚AOSPã«æ›¸ã„ã¦ã‚ã‚‹getter/setterã‚‚åŒæ§˜ã§ã™ã€‚</p>

<p><code>Activity#getLayoutInflater()</code>ã‚’ä½¿ã†ã‚ˆã†ãªãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®šç¾©ã™ã‚‹å ´åˆ</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">public</span> <span class="n">LayoutInflater</span> <span class="nf">getLayoutInflater</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">activity</span><span class="o">.</span><span class="na">getLayoutInflater</span><span class="o">();</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Kotlinã§æ›¸ãã¨ä»¥ä¸‹ã®ã‚ˆã†ã«æ›¸ã‘ã¾ã™ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='kotlin'><span class='line'><span class="k">fun</span> <span class="nf">layoutInflater</span><span class="p">():</span> <span class="n">LayoutInflater</span> <span class="p">=</span> <span class="n">activity</span><span class="p">.</span><span class="n">layoutInflater</span>
</span></code></pre></td></tr></table></div></figure>


<p>å®Ÿéš›ã«ã¯Activityå†…ã«<code>layoutInflater</code>ã¨ã„ã†ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¯å­˜åœ¨ã—ã¦ã„ã¾ã›ã‚“ãŒã€KotlinãŒè§£é‡ˆã—ã¦ãã‚Œã¾ã™ã€‚</p>

<p>ã‚‚ã¡ã‚ã‚“ã§ã™ãŒã€ä»¥ä¸‹ã®ã‚ˆã†ã«ã‚‚æ›¸ã‘ã¾ã™ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='kotlin'><span class='line'><span class="k">fun</span> <span class="nf">layoutInflater</span><span class="p">():</span> <span class="n">LayoutInflater</span> <span class="p">=</span> <span class="n">activity</span><span class="p">.</span><span class="n">getLayoutInflater</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure>


<p>ãŸã ã€Android Studioã•ã‚“ãŒã€Œã“ã‚Œãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚¢ã‚¯ã‚»ã‚¹ã«å¤‰ãˆãªï¼Ÿã€ã¨ã„ã†ã‚µã‚¸ã‚§ã‚¹ãƒˆãŒå‡ºã¾ã™ã€‚</p>

<p><img src="https://raw.githubusercontent.com/wiki/shiraji/images/blog/images/whats-good-about-kotlin-in-android-development/getter_setter.png" alt="getter_setter" /></p>

<p>Javaã£ã½ã„ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãã¨ã“ã®ã‚ˆã†ã«ãƒ¯ãƒ¼ãƒ‹ãƒ³ã‚°ã‚’å‡ºã—ã¦ãã‚Œã‚‹ã®ã§ã€éƒ½åº¦ä¿®æ­£ã—ã¦ã„ãã¨Kotlinã‚‰ã—ã„æ–‡æ³•ã®å‹‰å¼·ã‚‚æ—ã‚Šã¾ã™ã€‚(platform typeã«ã¯ã”æ³¨æ„ä¸‹ã•ã„)</p>

<h2>ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤</h2>

<p>ã“ã“ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã ã„ãŸã„åŒã˜å€¤ãªã®ã ã‘ã©ã€æ™‚ã€…é•ã†ã‹ã‚‰ã€overloadãƒ¡ã‚½ãƒƒãƒ‰ã‚’ç”¨æ„ã™ã‚‹ã‹ï¼ã£ã¦ã“ã¨ã‚ã‚Šã¾ã›ã‚“ã‹ï¼Ÿ</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'>  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">boolean</span> <span class="nf">maybeStartActivity</span><span class="o">(</span><span class="n">Context</span> <span class="n">context</span><span class="o">,</span> <span class="n">Intent</span> <span class="n">intent</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>    <span class="k">return</span> <span class="nf">maybeStartActivity</span><span class="o">(</span><span class="n">context</span><span class="o">,</span> <span class="n">intent</span><span class="o">,</span> <span class="kc">false</span><span class="o">);</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="kd">private</span> <span class="kd">static</span> <span class="kt">boolean</span> <span class="nf">maybeStartActivity</span><span class="o">(</span><span class="n">Context</span> <span class="n">context</span><span class="o">,</span> <span class="n">Intent</span> <span class="n">intent</span><span class="o">,</span> <span class="kt">boolean</span> <span class="n">chooser</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>      <span class="c1">// ...</span>
</span><span class='line'>  <span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>ã‹ã®æœ‰åãª<a href="https://github.com/JakeWharton/u2020/blob/70dd9572f45afb21a62ff414d19b7c095d737372/src/main/java/com/jakewharton/u2020/util/Intents.java">u2020</a>ã«ã‚‚ã‚ã‚Šã¾ã—ãŸã€‚</p>

<p>Kotlinã¯ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã‚’å®šç¾©å‡ºæ¥ã¾ã™ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='kotlin'><span class='line'>  <span class="k">fun</span> <span class="nf">maybeStartActivity</span><span class="p">(</span><span class="n">context</span><span class="p">:</span> <span class="n">Context</span><span class="p">,</span> <span class="n">intent</span><span class="p">:</span> <span class="n">Intent</span><span class="p">,</span> <span class="n">chooser</span><span class="p">:</span> <span class="n">Boolean</span> <span class="p">=</span> <span class="k">false</span><span class="p">):</span> <span class="n">Boolean</span> <span class="p">{</span>
</span><span class='line'>      <span class="c1">// ...</span>
</span><span class='line'>  <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h3>ã‚«ã‚¹ã‚¿ãƒ Viewã®ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿</h3>

<p>ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã«é–¢é€£ã—ã¦ã€ã‚«ã‚¹ã‚¿ãƒ Viewã®ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã®å®šç¾©ã£ã¦å¤§å¤‰ã ã¨æ€ã„ã¾ã™ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">public</span> <span class="nf">CustomView</span><span class="o">(</span><span class="n">Context</span> <span class="n">context</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>    <span class="k">this</span><span class="o">(</span><span class="n">context</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="kd">public</span> <span class="nf">CustomView</span><span class="o">(</span><span class="n">Context</span> <span class="n">context</span><span class="o">,</span> <span class="n">AttributeSet</span> <span class="n">attrs</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>    <span class="k">this</span><span class="o">(</span><span class="n">context</span><span class="o">,</span> <span class="n">attrs</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="kd">public</span> <span class="nf">CustomView</span><span class="o">(</span><span class="n">Context</span> <span class="n">context</span><span class="o">,</span> <span class="n">AttributeSet</span> <span class="n">attrs</span><span class="o">,</span> <span class="kt">int</span> <span class="n">defStyleAttr</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>    <span class="kd">super</span><span class="o">(</span><span class="n">context</span><span class="o">,</span> <span class="n">attrs</span><span class="o">,</span> <span class="n">defStyleAttr</span><span class="o">);</span>
</span><span class='line'>    <span class="n">binding</span> <span class="o">=</span> <span class="n">DataBindingUtil</span><span class="o">.</span><span class="na">inflate</span><span class="o">(</span><span class="n">LayoutInflater</span><span class="o">.</span><span class="na">from</span><span class="o">(</span><span class="n">context</span><span class="o">),</span> <span class="n">R</span><span class="o">.</span><span class="na">layout</span><span class="o">.</span><span class="na">custom_view</span><span class="o">,</span> <span class="k">this</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Kotlinã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã‚’å®šç¾©ã—ãŸãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä¸Šè¨˜ã®ã‚ˆã†ã«Javaã‹ã‚‰è¦‹ãŸã‚‰è¤‡æ•°ã‚ã‚‹ã‚ˆã†ã«ã™ã‚‹<code>@JvmOverloads</code>ã¨ã„ã†ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ãŒã‚ã‚Šã¾ã™ã€‚</p>

<p>ã“ã‚Œã‚’ä½¿ã†ã¨ã€ã‚«ã‚¹ã‚¿ãƒ Viewã®ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã¯ä¸€è¡Œå®šç¾©ã™ã‚‹ã ã‘ã§æ›¸ã‘ã¾ã™ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='kotlin'><span class='line'><span class="k">class</span> <span class="nc">@JvmOverloads</span> <span class="n">CustomView</span><span class="p">(</span><span class="n">context</span><span class="p">:</span> <span class="n">Context</span><span class="p">,</span> <span class="n">attrs</span><span class="p">:</span> <span class="n">AttributeSet</span> <span class="p">=</span> <span class="k">null</span><span class="p">,</span> <span class="n">defStyleAttr</span><span class="p">:</span> <span class="n">Int</span> <span class="p">=</span> <span class="m">0</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>(Kotlinã®ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿è‡ªä½“ã¯æ°—æŒã¡ã‚ˆããªã„ã®ã§èª¬æ˜çœç•¥ã—ã¾ã™ã€‚)</p>

<h2>ã‚­ãƒ£ã‚¹ãƒˆã§æ‹¬å¼§å°‘ãªã„</h2>

<p>Javaã§ã‚­ãƒ£ã‚¹ãƒˆã™ã‚‹å ´åˆã€æ‹¬å¼§ãŒå¤šããªã‚ŠãŒã¡ã§ã™ã€‚PagerAdapterã®<code>destroyItem</code>ã‚’å®Ÿè£…ã—ã¦ã¿ã¾ã™ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="err">ï¼ </span><span class="n">Override</span> <span class="kd">public</span> <span class="kt">void</span> <span class="nf">destroyItem</span><span class="o">(</span><span class="n">ViewGroup</span> <span class="n">container</span><span class="o">,</span> <span class="kt">int</span> <span class="n">position</span><span class="o">,</span> <span class="n">Object</span> <span class="n">obj</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>    <span class="o">((</span><span class="n">ViewPager</span><span class="o">)</span> <span class="n">container</span><span class="o">).</span><span class="na">removeView</span><span class="o">((</span><span class="n">View</span><span class="o">)</span> <span class="n">obj</span><span class="o">)</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Kotlinã ã¨<code>as</code>ã‚’ä½¿ã£ã¦ã‚­ãƒ£ã‚¹ãƒˆã—ã¾ã™ã€‚æ–‡æ³•çš„ã«ã‚‚æ‹¬å¼§ãŒæ¸›ã‚Šã€ã©ã“ã§æ‹¬å¼§ãŒçµ‚ã‚ã£ã¦ã„ã‚‹ã®ã‹ãŒã‚ã‹ã‚Šã‚„ã™ããªã‚Šã¾ã™ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='kotlin'><span class='line'><span class="k">override</span> <span class="k">fun</span> <span class="nf">destroyItem</span><span class="p">(</span><span class="n">container</span><span class="p">:</span> <span class="n">ViewGroup</span><span class="p">?,</span> <span class="n">position</span><span class="p">:</span> <span class="n">Int</span><span class="p">,</span> <span class="n">obj</span><span class="p">:</span> <span class="n">Any</span><span class="p">?)</span> <span class="p">{</span>
</span><span class='line'>    <span class="p">(</span><span class="n">container</span> <span class="k">as</span> <span class="n">ViewPager</span><span class="p">).</span><span class="n">removeView</span><span class="p">(</span><span class="n">obj</span> <span class="k">as</span> <span class="n">View</span><span class="p">)</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h3>ã‚­ãƒ£ã‚¹ãƒˆå¤±æ•—æ™‚ã«ä½•ã™ã‚‹ï¼Ÿ</h3>

<p>nullæ™‚ã«ä½•ã™ã‚‹ï¼Ÿã¨ã®çµ„ã¿åˆã‚ã›ã‚‹ã“ã¨ã§ã‚­ãƒ£ã‚¹ãƒˆå¤±æ•—æ™‚ã«ä½•ã™ã‚‹ã‹ã®å®šç¾©ã‚‚ç°¡å˜ã«ã§ãã¾ã™ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='kotlin'><span class='line'><span class="k">override</span> <span class="k">fun</span> <span class="nf">destroyItem</span><span class="p">(</span><span class="n">container</span><span class="p">:</span> <span class="n">ViewGroup</span><span class="p">?,</span> <span class="n">position</span><span class="p">:</span> <span class="n">Int</span><span class="p">,</span> <span class="n">obj</span><span class="p">:</span> <span class="n">Any</span><span class="p">?)</span> <span class="p">{</span>
</span><span class='line'>    <span class="n">container</span> <span class="k">as</span><span class="p">?</span> <span class="n">ViewPager</span> <span class="o">?:</span> <span class="k">return</span>
</span><span class='line'>    <span class="c1">// ...</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>ã¾ãŸã€readonlyã®å¤‰æ•°ã®ã‚­ãƒ£ã‚¹ãƒˆã«æˆåŠŸã™ã‚‹ã¨è‡ªå‹•çš„ã«ãã®å¤‰æ•°ã‚’ã‚­ãƒ£ã‚¹ãƒˆã—ã¦ãã‚Œã¾ã™ã€‚ãƒ¡ã‚½ãƒƒãƒ‰ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¯readonlyã€‚å„æ‰€ã«å‡ºã¦ãã‚‹<code>val</code>ã¨å®šç¾©ã•ã‚Œã¦ã„ã‚‹å¤‰æ•°ã‚‚readonlyã§ã™ã€‚(ä½™è«‡ã§ã™ãŒã€immutableã§ã¯ã‚ã‚Šã¾ã›ã‚“ã®ã§æ³¨æ„ã—ã¦ä¸‹ã•ã„ã€‚)</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='kotlin'><span class='line'><span class="k">override</span> <span class="k">fun</span> <span class="nf">destroyItem</span><span class="p">(</span><span class="n">container</span><span class="p">:</span> <span class="n">ViewGroup</span><span class="p">?,</span> <span class="n">position</span><span class="p">:</span> <span class="n">Int</span><span class="p">,</span> <span class="n">obj</span><span class="p">:</span> <span class="n">Any</span><span class="p">?)</span> <span class="p">{</span>
</span><span class='line'>    <span class="n">container</span> <span class="k">as</span><span class="p">?</span> <span class="n">ViewPager</span> <span class="o">?:</span> <span class="k">return</span>
</span><span class='line'>    <span class="n">obj</span> <span class="k">as</span><span class="p">?</span> <span class="n">View</span> <span class="o">?:</span> <span class="k">return</span>
</span><span class='line'>    <span class="n">container</span><span class="p">.</span><span class="n">removeView</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>mutableå¤‰æ•°<code>var</code>ã®å ´åˆã€<code>as?</code>å¾Œã«å¤‰æ›´å¯èƒ½ãªã®ã§ã€è‡ªå‹•çš„ã«ã‚­ãƒ£ã‚¹ãƒˆã—ã¦ã‚‚ã‚‰ãˆãªã„ã®ã§æ³¨æ„ã€‚Kotlinã§ã¯ç†ç”±ãŒãªã„é™ã‚Šã€<code>var</code>ã‚’ä½¿ã‚ãªã„ã»ã†ãŒè‰¯ã„ã§ã™ã€‚</p>

<h2>Utilç³»</h2>

<p>XxxUtilsã¨ã‹ä½œã£ã¦ã€å…¨ãƒ¡ã‚½ãƒƒãƒ‰ã‚’staticã«ã—ã¦ã€privateã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã‚’ä½œã£ã¦ãƒ»ãƒ»ãƒ»ã¿ãŸã„ãªã‚„ã‚Šæ–¹ã‚’Javaã§ã¯ã¡ã‚‡ãã¡ã‚‡ãã—ã¦ã„ã¾ã—ãŸã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">LogUtil</span> <span class="o">{</span>
</span><span class='line'>  <span class="kd">private</span> <span class="nf">LogUtil</span><span class="o">()</span> <span class="o">{}</span>
</span><span class='line'>
</span><span class='line'>  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">initLog</span><span class="o">(</span><span class="n">String</span> <span class="n">tag</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">Timber</span><span class="o">.</span><span class="na">plant</span><span class="o">(</span><span class="n">ExtTree</span><span class="o">(</span><span class="n">tag</span><span class="o">))</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>kotlinã§ã¯Topãƒ¬ãƒ™ãƒ«ã«ãƒ¡ã‚½ãƒƒãƒ‰ã‚’æ›¸ã‘ã°ã€ã“ã®ã‚ˆã†ãªUtilç³»ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’æ›¸ãã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='kotlin'><span class='line'><span class="k">fun</span> <span class="nf">initLog</span><span class="p">(</span><span class="n">tag</span><span class="p">:</span> <span class="n">String</span><span class="p">)</span> <span class="p">=</span> <span class="n">Timber</span><span class="p">.</span><span class="n">plant</span><span class="p">(</span><span class="n">ExtTree</span><span class="p">(</span><span class="n">tag</span><span class="p">))</span>
</span></code></pre></td></tr></table></div></figure>


<p>ä½¿ã„æ–¹ã‚‚Javaã®ã¨ãã¨å¤‰ã‚ã‚Šã¾ã›ã‚“ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='kotlin'><span class='line'><span class="k">import</span> <span class="nn">package.initLog</span>
</span><span class='line'>
</span><span class='line'><span class="k">fun</span> <span class="nf">foo</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>  <span class="n">initLog</span><span class="p">(</span><span class="s">&quot;MyApp&quot;</span><span class="p">)</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Stringãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ</h2>

<p>Javaã§Stringã®çµåˆã‚’ã™ã‚‹å ´åˆã€ã“ã‚“ãªæ„Ÿã˜ã«ãªã‚Šã¾ã™ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="k">return</span> <span class="n">originalResponse</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">()</span>
</span><span class='line'>                    <span class="o">.</span><span class="na">header</span><span class="o">(</span><span class="s">&quot;Cache-Control&quot;</span><span class="o">,</span> <span class="s">&quot;public, max-age=&quot;</span> <span class="o">+</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">3</span><span class="o">)</span>
</span><span class='line'>                    <span class="o">.</span><span class="na">build</span><span class="o">();</span>
</span></code></pre></td></tr></table></div></figure>


<p>Kotlinã«ã¯Stringãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¨ã—ã¦Stringå†…ã«<code>${}</code>ã§å¤‰æ•°ã‚’æ›¸ãã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='kotlin'><span class='line'><span class="k">return</span> <span class="n">originalResponse</span><span class="p">.</span><span class="n">newBuilder</span><span class="p">()</span>
</span><span class='line'>                    <span class="p">.</span><span class="n">header</span><span class="p">(</span><span class="s">&quot;Cache-Control&quot;</span><span class="p">,</span> <span class="s">&quot;public, max-age=${60 * 3}&quot;</span><span class="p">)</span>
</span><span class='line'>                    <span class="p">.</span><span class="n">build</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure>


<p>å¤‰æ•°ä¸€ã¤ã ã‘ã§ã‚ã‚‹å ´åˆã€<code>{}</code>ã®çœç•¥ã‚‚å‡ºæ¥ã¾ã™ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='kotlin'><span class='line'><span class="k">val</span> <span class="py">foo</span> <span class="p">=</span> <span class="m">1</span>
</span><span class='line'><span class="k">val</span> <span class="py">bar</span> <span class="p">=</span> <span class="s">&quot;Text$foo&quot;</span> <span class="c1">// &lt;= &quot;Text1&quot;ã¨ã„ã†æ–‡å­—åˆ—ã«</span>
</span></code></pre></td></tr></table></div></figure>


<h2>è¤‡æ•°è¡Œã®String</h2>

<p>Javaã®Stringã§è¤‡æ•°è¡Œã‚’ç”Ÿæˆã™ã‚‹å ´åˆã€çµæ§‹è¾›ã„ã§ã™ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="n">String</span> <span class="n">text</span> <span class="o">=</span> <span class="s">&quot;aaa\nbbb\nccc&quot;</span><span class="o">;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Kotlinã§ã¯<code>"""</code>ã‚’ä½¿ã†ã“ã¨ã§è¤‡æ•°è¡Œã®Stringã®å®šç¾©ã‚’å‡ºæ¥ã¾ã™ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='kotlin'><span class='line'><span class="k">val</span> <span class="py">text</span> <span class="p">=</span> <span class="s">&quot;&quot;&quot;aaa</span>
</span><span class='line'>              <span class="n">bbb</span>
</span><span class='line'>              <span class="n">ccc</span><span class="s">&quot;&quot;&quot;.trimMargin();</span>
</span></code></pre></td></tr></table></div></figure>


<p>.trimMargin()ã®ã“ã¨ã¨ã‹ã€ãƒãƒ¼ã‚¸ãƒ³ã®é–‹å§‹ä½ç½®ã¨ã‹è¤‡æ•°è¡Œã®Stringã¯çµæ§‹å¤šæ©Ÿèƒ½ã§ã™ãŒã€è©³ç´°çŸ¥ã‚ŠãŸã‘ã‚Œã°<a href="https://kotlinlang.org/docs/reference/basic-types.html#string-literals">å…¬å¼ã®string-literals</a>ã‚’ç¢ºèªã—ã¦ã­ã€‚</p>

<h2>è¤‡æ•°if -> when</h2>

<p>Javaã§ã¯ifãŒè¤‡æ•°ã‚ã‚‹å ´åˆã€ã¡ã‚‡ã£ã¨ã¤ã‚‰ã„ã§ã™ã€‚</p>

<p>ä¾‹ãˆã°ä»¥ä¸‹ã®ã‚ˆã†ãªã‚³ãƒ¼ãƒ‰ãŒã‚ã£ãŸã¨ã—ã¾ã™ã€‚(Javaã§behaviorã‚’ç‹¬è‡ªå®Ÿè£…ã—ãŸã¨ãã«ä½¿ã£ã¦ã„ãŸã‚³ãƒ¼ãƒ‰)</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="k">if</span> <span class="o">(</span><span class="n">isAnimating</span><span class="o">)</span> <span class="k">return</span><span class="o">;</span>
</span><span class='line'><span class="k">if</span> <span class="o">(</span><span class="n">consumed</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">hide</span><span class="o">(</span><span class="n">child</span><span class="o">);</span>
</span><span class='line'><span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">show</span><span class="o">(</span><span class="n">child</span><span class="o">);</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>ã“ã‚Œã‚’Kotlinã§ã‚‚ãã®ã¾ã¾if/elseæ›¸ã‘ã¾ã™ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='kotlin'><span class='line'><span class="k">if</span> <span class="p">(</span><span class="n">isAnimating</span><span class="p">)</span> <span class="k">return</span>
</span><span class='line'><span class="k">if</span> <span class="p">(</span><span class="n">consumed</span> <span class="p">&gt;</span> <span class="m">0</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="n">hide</span><span class="p">(</span><span class="n">child</span><span class="p">)</span>
</span><span class='line'><span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>    <span class="n">show</span><span class="p">(</span><span class="n">child</span><span class="p">)</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>ã—ã‹ã—ã€ã‚‚ã†å°‘ã—ç°¡å˜ã«whenã§ã¾ã¨ã‚ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='kotlin'><span class='line'><span class="k">when</span> <span class="p">{</span>
</span><span class='line'>    <span class="n">isAnimating</span> <span class="p">-&gt;</span> <span class="k">return</span>
</span><span class='line'>    <span class="n">consumed</span> <span class="p">&gt;</span> <span class="m">0</span> <span class="p">-&gt;</span> <span class="n">animateHide</span><span class="p">(</span><span class="n">child</span><span class="p">)</span>
</span><span class='line'>    <span class="k">else</span> <span class="p">-&gt;</span> <span class="n">animateShow</span><span class="p">(</span><span class="n">child</span><span class="p">)</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>whenã¯Javaã§ã„ã†Switchæ–‡ã«è¿‘ã„ã§ã™ãŒã€ä¸Šè¨˜ã®ã‚ˆã†ã«whenã®å¾Œã«æ¡ä»¶ã‚’ä»˜ã‘ãªã‹ã£ãŸã‚Šã€å¤‰æ•°ã®å‹ã®caseæ–‡ã«å‡ºæ¥ãŸã‚Šã¨ã‚ã¡ã‚ƒãã¡ã‚ƒæ°—æŒã¡ã‚ˆããªã‚Œã¾ã™ã€‚</p>

<h2>å¼</h2>

<p>Kotlinã§ã¯ifã‚„whenãªã©è«¸ã€…ãŒå¼ã§ã™ã€‚</p>

<p>ä¾‹ãˆã°ã€ifã®çµæœã‚’å¤‰æ•°ã«ä»£å…¥ã™ã‚‹å ´åˆã€</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kt">int</span> <span class="n">foo</span><span class="o">;</span>
</span><span class='line'><span class="k">if</span><span class="o">(</span><span class="n">flag</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">foo</span> <span class="o">=</span> <span class="mi">10</span><span class="o">;</span>
</span><span class='line'><span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">foo</span> <span class="o">=</span> <span class="mi">100</span><span class="o">;</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>kotlinã§ã¯ã“ã‚“ãªæ„Ÿã˜ã«ãªã‚Šã¾ã™ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='kotlin'><span class='line'><span class="k">val</span> <span class="py">foo</span> <span class="p">=</span> <span class="k">if</span> <span class="p">(</span><span class="n">flag</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="m">10</span>
</span><span class='line'><span class="p">}</span>  <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>    <span class="m">100</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>å˜ç´”ãªå ´åˆã€<code>{}</code>ã¯çœç•¥ã™ã‚‹ã®ã§ä¸€è¡Œã§æ›¸ãã“ã¨ãŒå¤šã„ã§ã™ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='kotlin'><span class='line'><span class="k">val</span> <span class="py">foo</span> <span class="p">=</span> <span class="k">if</span> <span class="p">(</span><span class="n">flag</span><span class="p">)</span> <span class="m">10</span> <span class="k">else</span> <span class="m">100</span>
</span></code></pre></td></tr></table></div></figure>


<p>æ¡ä»¶ã«ã‚ˆã‚Šé•ã£ãŸå€¤ã‚’ä»£å…¥ã—ã¦ã„ã‚‹ã®ã§ã™ãŒ<code>val</code>ã§å®šç¾©å‡ºæ¥ã‚‹ã®ãŒãƒã‚¤ãƒ³ãƒˆã§ã™ã€‚</p>

<p>ã¡ãªã¿ã«ã€<a href="https://github.com/hotchemi/PermissionsDispatcher">PermissionsDispatcher</a>ã•ã‚“ã§ã‚‚åˆ©ç”¨ã—ã¦ã„ã¦ã€ãƒ¡ã‚½ãƒƒãƒ‰ã®å¼•æ•°ã¨ã—ã¦ä½¿ã£ãŸã‚Šã‚‚ã—ã¦ã„ã¾ã™ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='kotlin'><span class='line'><span class="n">builder</span><span class="p">.</span><span class="n">beginControlFlow</span><span class="p">(</span><span class="s">&quot;if (\$N\$T.shouldShowRequestPermissionRationale(\$N, \$N))&quot;</span><span class="p">,</span> <span class="k">if</span> <span class="p">(</span><span class="n">isPositiveCondition</span><span class="p">)</span> <span class="s">&quot;&quot;</span> <span class="k">else</span> <span class="s">&quot;!&quot;</span><span class="p">,</span> <span class="n">PERMISSION_UTILS</span><span class="p">,</span> <span class="n">targetParam</span><span class="p">,</span> <span class="n">permissionField</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>ãƒã‚¹ãƒˆã•ã›ã‚‹ã“ã¨ã‚‚å‡ºæ¥ã‚‹ã®ã§ã™ãŒã€è¤‡é›‘ã«ãªã‚‹ã®ã§è¦‹ã«ãã„å ´åˆã¯ãƒ­ãƒ¼ã‚«ãƒ«å¤‰æ•°ã«åˆ‡ã‚Šå‡ºã™ã®ãŒè‰¯ã„ã¨æ€ã„ã¾ã™ã€‚</p>

<h2>Annotation</h2>

<p>Dagger2ã‚’ä½¿ã†å ´åˆã€Activityã‚„Fragmentã‚¹ã‚³ãƒ¼ãƒ—ã‚’ä½œã‚‹ãŸã‚ã«ç‹¬è‡ªAnnotationä½œã£ãŸã‚Šã—ã¾ã™ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="nd">@Scope</span>
</span><span class='line'><span class="nd">@Retention</span><span class="o">(</span><span class="n">RetentionPolicy</span><span class="o">.</span><span class="na">RUNTIME</span><span class="o">)</span>
</span><span class='line'><span class="kd">public</span> <span class="nd">@interface</span> <span class="n">ActivityScope</span> <span class="o">{</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p><code>@interface</code>ã¨ã„ã†ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’ä½¿ã£ã¦ã„ã¾ã—ãŸãŒã€Kotlinã§ã¯<code>annotation</code>ã¨è¡¨ç¾ã—ã¾ã™ã€‚ç›´æ„Ÿçš„ã§è‰¯ã„ã§ã™ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='kotlin'><span class='line'><span class="n">@Scope</span>
</span><span class='line'><span class="n">@Retention</span>
</span><span class='line'><span class="k">annotation</span> <span class="k">class</span> <span class="nc">ActivityScope</span>
</span></code></pre></td></tr></table></div></figure>


<p><code>Retention</code>ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ãŒ<code>RetentionPolicy.RUNTIME</code>ãªã®ã§ã€æŒ‡å®šã‚’çœç•¥å‡ºæ¥ã‚‹ã®ã‚‚ã‚¹ãƒƒã‚­ãƒªã—ã¦ã„ã¦æ°—æŒã¡è‰¯ã„ã§ã™ã€‚</p>

<h2>Singleton</h2>

<p>Javaã§ã¯(ç°¡æ˜“çš„ãª)ã‚·ãƒ³ã‚°ãƒ«ãƒˆãƒ³ã‚’ä½œæˆã™ã‚‹å ´åˆã€ä»¥ä¸‹ã®ã‚ˆã†ã«æ›¸ãå¿…è¦ãŒã‚ã‚Šã¾ã—ãŸã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MoshiUtil</span> <span class="o">{</span>
</span><span class='line'>    <span class="kd">private</span> <span class="kd">static</span> <span class="n">Moshi</span> <span class="n">moshi</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">public</span> <span class="kd">static</span> <span class="n">Moshi</span> <span class="nf">getMoshi</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>        <span class="k">if</span> <span class="o">(</span><span class="n">moshi</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>            <span class="n">moshi</span> <span class="o">=</span> <span class="n">Moshi</span><span class="o">.</span><span class="na">Builder</span><span class="o">().</span><span class="na">add</span><span class="o">(</span><span class="n">DateAdapter</span><span class="o">()).</span><span class="na">build</span><span class="o">();</span>
</span><span class='line'>        <span class="o">}</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">moshi</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Kotlinã§ã¯ã€<code>object</code>ã¨ã—ã¦å®šç¾©ã™ã‚Œã°ã‚¢ãƒ—ãƒªå†…ã§ã‚·ãƒ³ã‚°ãƒ«ãƒˆãƒ³ã¨ã—ã¦åˆ©ç”¨å¯èƒ½ã§ã™ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='kotlin'><span class='line'><span class="k">object</span> <span class="nc">MoshiUtil</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">val</span> <span class="py">moshi</span><span class="p">:</span> <span class="n">Moshi</span> <span class="k">by</span> <span class="n">lazy</span> <span class="p">{</span>
</span><span class='line'>        <span class="n">Moshi</span><span class="p">.</span><span class="n">Builder</span><span class="p">().</span><span class="n">add</span><span class="p">(</span><span class="n">DateAdapter</span><span class="p">()).</span><span class="n">build</span><span class="p">()</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>ä½¿ã„æ–¹ã‚‚Javaã®æ™‚ã¨åŒã˜ã§ã™ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='kotlin'><span class='line'><span class="n">MoshiUtil</span><span class="p">.</span><span class="n">moshi</span><span class="p">.</span><span class="n">adapter</span><span class="p">(</span><span class="n">BlackjackHand</span><span class="o">::</span><span class="n">java</span><span class="p">.</span><span class="k">class</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<h2>rx.Observableã®ThreadæŒ‡å®šæ–¹æ³•</h2>

<p>ã¡ã‚‡ã“ã£ã¨ã—ãŸã“ã¨ãªã®ã§ã™ãŒã€Rxã®å®Ÿè¡Œã‚¹ãƒ¬ãƒƒãƒ‰æ–¹æ³•ã®æŒ‡å®šã‚‚æ°—æŒã¡ã‚ˆãæ›¸ã‘ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="n">load</span><span class="o">()</span>
</span><span class='line'>  <span class="o">.</span><span class="na">subscribeOn</span><span class="o">(</span><span class="n">AndroidSchedulers</span><span class="o">.</span><span class="na">mainThread</span><span class="o">())</span>
</span><span class='line'>  <span class="o">.</span><span class="na">observeOn</span><span class="o">(</span><span class="n">AndroidSchedulers</span><span class="o">.</span><span class="na">mainThread</span><span class="o">())</span>
</span><span class='line'>  <span class="o">.</span><span class="na">subscribe</span><span class="o">();</span>
</span></code></pre></td></tr></table></div></figure>


<p>Kotlinã®æ‹¡å¼µãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’åˆ©ç”¨ã—ã€ã‚¹ãƒ¬ãƒƒãƒ‰ã®æŒ‡å®šæ–¹æ³•ã‚’å®šç¾©ã—ã¾ã™ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class='kotlin'><span class='line'><span class="k">val</span> <span class="err">&lt;</span><span class="py">T</span><span class="p">&gt;</span> <span class="n">Observable</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;.</span><span class="n">observeOnUI</span><span class="p">:</span> <span class="n">Observable</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span>
</span><span class='line'>    <span class="k">get</span><span class="p">()</span> <span class="p">=</span> <span class="n">observeOn</span><span class="p">(</span><span class="n">AndroidSchedulers</span><span class="p">.</span><span class="n">mainThread</span><span class="p">())</span>
</span><span class='line'>
</span><span class='line'><span class="k">val</span> <span class="err">&lt;</span><span class="py">T</span><span class="p">&gt;</span> <span class="n">Observable</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;.</span><span class="n">observeOnIO</span><span class="p">:</span> <span class="n">Observable</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span>
</span><span class='line'>    <span class="k">get</span><span class="p">()</span> <span class="p">=</span> <span class="n">observeOn</span><span class="p">(</span><span class="n">Schedulers</span><span class="p">.</span><span class="n">io</span><span class="p">())</span>
</span><span class='line'>
</span><span class='line'><span class="k">val</span> <span class="err">&lt;</span><span class="py">T</span><span class="p">&gt;</span> <span class="n">Observable</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;.</span><span class="n">observeOnComputation</span><span class="p">:</span> <span class="n">Observable</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span>
</span><span class='line'>    <span class="k">get</span><span class="p">()</span> <span class="p">=</span> <span class="n">observeOn</span><span class="p">(</span><span class="n">Schedulers</span><span class="p">.</span><span class="n">computation</span><span class="p">())</span>
</span><span class='line'>
</span><span class='line'><span class="k">val</span> <span class="err">&lt;</span><span class="py">T</span><span class="p">&gt;</span> <span class="n">Observable</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;.</span><span class="n">subscribeOnUI</span><span class="p">:</span> <span class="n">Observable</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span>
</span><span class='line'>    <span class="k">get</span><span class="p">()</span> <span class="p">=</span> <span class="n">subscribeOn</span><span class="p">(</span><span class="n">AndroidSchedulers</span><span class="p">.</span><span class="n">mainThread</span><span class="p">())</span>
</span><span class='line'>
</span><span class='line'><span class="k">val</span> <span class="err">&lt;</span><span class="py">T</span><span class="p">&gt;</span> <span class="n">Observable</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;.</span><span class="n">subscribeOnIO</span><span class="p">:</span> <span class="n">Observable</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span>
</span><span class='line'>    <span class="k">get</span><span class="p">()</span> <span class="p">=</span> <span class="n">subscribeOn</span><span class="p">(</span><span class="n">Schedulers</span><span class="p">.</span><span class="n">io</span><span class="p">())</span>
</span><span class='line'>
</span><span class='line'><span class="k">val</span> <span class="err">&lt;</span><span class="py">T</span><span class="p">&gt;</span> <span class="n">Observable</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;.</span><span class="n">subscribeOnComputation</span><span class="p">:</span> <span class="n">Observable</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span>
</span><span class='line'>    <span class="k">get</span><span class="p">()</span> <span class="p">=</span> <span class="n">subscribeOn</span><span class="p">(</span><span class="n">Schedulers</span><span class="p">.</span><span class="n">computation</span><span class="p">()).</span><span class="n">unsubscribeOn</span><span class="p">(</span><span class="n">Schedulers</span><span class="p">.</span><span class="n">computation</span><span class="p">())</span>
</span></code></pre></td></tr></table></div></figure>


<p>ã“ã®æ‹¡å¼µãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’åˆ©ç”¨ã™ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ã«æ›¸ã‘ã¾ã™ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='kotlin'><span class='line'><span class="n">load</span><span class="p">()</span>
</span><span class='line'>  <span class="p">.</span><span class="n">subscribeOnIO</span>
</span><span class='line'>  <span class="p">.</span><span class="n">observeOnIO</span>
</span><span class='line'>  <span class="p">.</span><span class="n">subscribe</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Databindingã®BindingAdapteræŒ‡å®šæ–¹æ³•</h2>

<p>Databindingã®BindingAdapterã®<a href="https://developer.android.com/reference/android/databinding/BindingAdapter.html">å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ã‚³ãƒ¼ãƒ‰</a>ã‚’Kotlinã§æ›¸ã„ã¦ã¿ã¾ã™ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="nd">@BindingAdapter</span><span class="o">(</span><span class="s">&quot;android:bufferType&quot;</span><span class="o">)</span>
</span><span class='line'><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">setBufferType</span><span class="o">(</span><span class="n">TextView</span> <span class="n">view</span><span class="o">,</span> <span class="n">TextView</span><span class="o">.</span><span class="na">BufferType</span> <span class="n">bufferType</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">view</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="n">view</span><span class="o">.</span><span class="na">getText</span><span class="o">(),</span> <span class="n">bufferType</span><span class="o">);</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>ã“ã‚ŒãŒã“ã‚“ãªæ„Ÿã˜ã«ãªã‚Šã¾ã™ã€‚<code>view</code>ãŒæ¶ˆãˆã¾ã—ãŸã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="nd">@BindingAdapter</span><span class="o">(</span><span class="s">&quot;android:bufferType&quot;</span><span class="o">)</span>
</span><span class='line'><span class="n">fun</span> <span class="n">TextView</span><span class="o">.</span><span class="na">setBufferType</span><span class="o">(</span><span class="n">TextView</span><span class="o">.</span><span class="na">BufferType</span> <span class="n">bufferType</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">setText</span><span class="o">(</span><span class="n">getText</span><span class="o">(),</span> <span class="n">bufferType</span><span class="o">)</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Databindingã®onClickãªã©ã®ã‚¤ãƒ™ãƒ³ãƒˆæŒ‡å®šæ–¹æ³•</h2>

<p>ã“ã‚Œã‚‚æ‹¡å¼µãƒ¡ã‚½ãƒƒãƒ‰ã§ã„ãã¾ã™ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="nt">&lt;android.support.design.widget.FloatingActionButton</span>
</span><span class='line'>                <span class="na">android:layout_width=</span><span class="s">&quot;wrap_content&quot;</span>
</span><span class='line'>                <span class="na">android:layout_height=</span><span class="s">&quot;wrap_content&quot;</span>
</span><span class='line'>                <span class="na">android:layout_marginTop=</span><span class="s">&quot;@dimen/spacing&quot;</span>
</span><span class='line'>                <span class="na">android:onClick=</span><span class="s">&quot;@{viewModel::onClickTopFab}&quot;</span>
</span><span class='line'>                <span class="na">app:backgroundTint=</span><span class="s">&quot;@color/action_green&quot;</span>
</span><span class='line'>                <span class="na">app:fabSize=</span><span class="s">&quot;normal&quot;</span>
</span><span class='line'>                <span class="na">app:layout_anchor=</span><span class="s">&quot;@id/app_bar&quot;</span>
</span><span class='line'>                <span class="na">app:layout_anchorGravity=</span><span class="s">&quot;bottom|end&quot;</span>
</span><span class='line'>                <span class="na">app:srcCompat=</span><span class="s">&quot;@drawable/plus&quot;</span><span class="nt">/&gt;</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="n">fun</span> <span class="nf">onClickFab</span><span class="o">(</span><span class="n">View</span> <span class="n">view</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">Toast</span><span class="o">.</span><span class="na">makeText</span><span class="o">(</span><span class="n">view</span><span class="o">.</span><span class="na">getContext</span><span class="o">(),</span> <span class="n">R</span><span class="o">.</span><span class="na">string</span><span class="o">.</span><span class="na">message_fab</span><span class="o">,</span> <span class="n">Toast</span><span class="o">.</span><span class="na">LENGTH_LONG</span><span class="o">).</span><span class="na">show</span><span class="o">();</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>kotlinã§ã¯ã“ã‚“ãªæ„Ÿã˜ã€‚Toastè¡¨ç¤ºç”¨ã®æ‹¡å¼µãƒ¡ã‚½ãƒƒãƒ‰ã‚‚å®šç¾©ã—ã¦ã„ã¾ã™ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='kotlin'><span class='line'><span class="k">fun</span> <span class="nf">View</span><span class="p">.</span><span class="n">onClickFab</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>    <span class="n">Toast</span><span class="p">.</span><span class="n">makeText</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">R</span><span class="p">.</span><span class="n">string</span><span class="p">.</span><span class="n">message_fab</span><span class="p">,</span> <span class="n">Toast</span><span class="p">.</span><span class="n">LENGTH_LONG</span><span class="p">).</span><span class="n">show</span><span class="p">()</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>ã¡ã‚‡ã£ã¨æ‰‹ãŒæ»‘ã‚‹ã¨</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='kotlin'><span class='line'><span class="k">fun</span> <span class="nf">Context</span><span class="p">.</span><span class="n">showLongToast</span><span class="p">(</span><span class="n">@StringRes</span> <span class="n">id</span><span class="p">:</span> <span class="n">Int</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="n">Toast</span><span class="p">.</span><span class="n">makeText</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="n">id</span><span class="p">,</span> <span class="n">Toast</span><span class="p">.</span><span class="n">LENGTH_LONG</span><span class="p">).</span><span class="n">show</span><span class="p">()</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">fun</span> <span class="nf">View</span><span class="p">.</span><span class="n">onClickFab</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>    <span class="n">context</span><span class="p">.</span><span class="n">showLongToast</span><span class="p">(</span><span class="n">R</span><span class="p">.</span><span class="n">string</span><span class="p">.</span><span class="n">message_fab</span><span class="p">)</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>topãƒ¬ãƒ™ãƒ«ã®æ‹¡å¼µãƒ¡ã‚½ãƒƒãƒ‰ã¯ç”¨æ³•ãƒ»ç”¨é‡ã‚’å®ˆã£ã¦æ­£ã—ããŠä½¿ã„ä¸‹ã•ã„ã€‚</p>

<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<!-- 728x90 -->


<p><ins class="adsbygoogle"
     style="display:inline-block;width:728px;height:90px"
     data-ad-client="ca-pub-3940616565912592"
     data-ad-slot="7693358062"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>


<h2>createIntent/newInstance</h2>

<p>è‡ªåˆ†ã¯createIntent/newInstanceãƒ‘ã‚¿ãƒ¼ãƒ³å¤§å¥½ãã§ã™ã€‚</p>

<p>ã“ã‚Œã‚‚æ°—æŒã¡ã‚ˆããªã‚Œã¾ã™ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">public</span> <span class="kd">static</span> <span class="n">Intent</span> <span class="nf">createIntent</span><span class="o">(</span><span class="n">Context</span> <span class="n">context</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">Intent</span> <span class="n">intent</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">Intent</span><span class="o">(</span><span class="n">context</span><span class="o">,</span> <span class="n">MyActivity</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">intent</span><span class="o">;</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>applyã‚’ä½¿ã£ã¦ã€ä¸€è¡Œã«ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='kotlin'><span class='line'><span class="n">companion</span> <span class="k">object</span> <span class="err">{</span>
</span><span class='line'>    <span class="k">fun</span> <span class="nf">createIntent</span><span class="p">(</span><span class="n">context</span><span class="p">:</span> <span class="n">Context</span><span class="p">)</span> <span class="p">=</span> <span class="n">Intent</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">MyActivity</span><span class="o">::</span><span class="k">class</span><span class="p">.</span><span class="n">java</span><span class="p">).</span><span class="n">apply</span> <span class="p">{</span> <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>newInstanceã‚‚ã‚„ã£ã¦ã¿ã¾ã™ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">public</span> <span class="kd">static</span> <span class="n">SimpleDialogFragment</span> <span class="nf">newInstance</span><span class="o">(</span><span class="n">MyPacel</span> <span class="n">entity</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">SimpleDialogFragment</span> <span class="n">fragment</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">SimpleDialogFragment</span><span class="o">();</span>
</span><span class='line'>    <span class="n">Bundle</span> <span class="n">bundle</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">Bundle</span><span class="o">();</span>
</span><span class='line'>    <span class="n">bundle</span><span class="o">.</span><span class="na">putParcelable</span><span class="o">(</span><span class="n">PARCELABLE_KEY</span><span class="o">,</span> <span class="n">entity</span><span class="o">);</span>
</span><span class='line'>    <span class="n">fragment</span><span class="o">.</span><span class="na">setArguments</span><span class="o">(</span><span class="n">bundle</span><span class="o">);</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">fragment</span><span class="o">;</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã—ãŸã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½œã‚ŠãŸã„ã ã‘ãªã®ã§ã™ãŒã€çµæ§‹å†—é•·çš„ã§è¾›ã„ã€‚ã€‚ã€‚</p>

<p>Kotlinã§çŸ­ãã—ã¦ã¿ã¾ã™ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='kotlin'><span class='line'><span class="k">fun</span> <span class="nf">newInstance</span><span class="p">(</span><span class="n">entity</span><span class="p">:</span> <span class="n">MyPacel</span><span class="p">)</span> <span class="p">=</span>
</span><span class='line'>ã€€   <span class="n">SimpleDialogFragment</span><span class="p">().</span><span class="n">apply</span> <span class="p">{</span>
</span><span class='line'>         <span class="n">arguments</span> <span class="p">=</span> <span class="n">Bundle</span><span class="p">().</span><span class="n">apply</span> <span class="p">{</span>
</span><span class='line'>             <span class="n">putParcelable</span><span class="p">(</span><span class="n">PARCELABLE_KEY</span><span class="p">,</span> <span class="n">entity</span><span class="p">)</span>
</span><span class='line'>         <span class="p">}</span>
</span><span class='line'>     <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>nestãŒæ¿€ã—ã„ã®ã§ãƒãƒ©ã—ã¦ã„ãã¾ã™ã€‚ã¾ãšã¯ã“ã®éƒ¨åˆ†ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='kotlin'><span class='line'><span class="n">arguments</span> <span class="p">=</span> <span class="n">Bundle</span><span class="p">().</span><span class="n">apply</span> <span class="p">{</span>
</span><span class='line'>    <span class="n">putParcelable</span><span class="p">(</span><span class="n">PARCELABLE_KEY</span><span class="p">,</span> <span class="n">entity</span><span class="p">)</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>ã“ã‚Œã‚’ãƒ¡ã‚½ãƒƒãƒ‰åŒ–ã™ã‚‹ã¨</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='kotlin'><span class='line'><span class="k">private</span> <span class="k">fun</span> <span class="nf">entity</span><span class="p">(</span><span class="n">bundle</span><span class="p">:</span> <span class="n">Bundle</span><span class="p">,</span> <span class="n">entity</span><span class="p">:</span> <span class="n">MyPacel</span><span class="p">):</span> <span class="n">Bundle</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">bundle</span><span class="p">.</span><span class="n">apply</span> <span class="p">{</span>
</span><span class='line'>        <span class="n">putParcelable</span><span class="p">(</span><span class="n">PARCELABLE_KEY</span><span class="p">,</span> <span class="n">entity</span><span class="p">)</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>bundleå¤‰æ•°ã«é–¢ã™ã‚‹å‡¦ç†ãªã®ã§ã€Bundleã®æ‹¡å¼µãƒ¡ã‚½ãƒƒãƒ‰ã¨è€ƒãˆã‚‹ã¨è‰¯ã•æ°—ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='kotlin'><span class='line'><span class="k">private</span> <span class="k">fun</span> <span class="nf">Bundle</span><span class="p">.</span><span class="n">entity</span><span class="p">(</span><span class="n">entity</span><span class="p">:</span> <span class="n">MyPacel</span><span class="p">):</span> <span class="n">Bundle</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="n">apply</span> <span class="p">{</span>
</span><span class='line'>        <span class="n">putParcelable</span><span class="p">(</span><span class="n">PARCELABLE_KEY</span><span class="p">,</span> <span class="n">entity</span><span class="p">)</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>returnæ–‡ä¸€æ–‡ãªã®ã§ã€çœç•¥ã€‚thisã‚‚å¿…è¦ãªã„ã®ã§ã€çœç•¥ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='kotlin'><span class='line'><span class="k">private</span> <span class="k">fun</span> <span class="nf">Bundel</span><span class="p">.</span><span class="n">entity</span><span class="p">(</span><span class="n">entity</span><span class="p">:</span> <span class="n">MyPacel</span><span class="p">)</span> <span class="p">=</span> <span class="n">apply</span> <span class="p">{</span> <span class="n">putParcelable</span><span class="p">(</span><span class="n">PARCELABLE_KEY</span><span class="p">,</span> <span class="n">entity</span><span class="p">)</span> <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>ã‚¤ãƒã‚³ã‚³</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='kotlin'><span class='line'><span class="k">fun</span> <span class="nf">newInstance</span><span class="p">(</span><span class="n">entity</span><span class="p">:</span> <span class="n">MyPacel</span><span class="p">)</span> <span class="p">=</span>
</span><span class='line'>     <span class="n">SimpleDialogFragment</span><span class="p">().</span><span class="n">apply</span> <span class="p">{</span>
</span><span class='line'>         <span class="n">arguments</span> <span class="p">=</span> <span class="n">Bundle</span><span class="p">().</span><span class="n">entity</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>
</span><span class='line'>     <span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">private</span> <span class="k">fun</span> <span class="nf">Bundel</span><span class="p">.</span><span class="n">entity</span><span class="p">(</span><span class="n">entity</span><span class="p">:</span> <span class="n">MyPacel</span><span class="p">)</span> <span class="p">=</span> <span class="n">apply</span> <span class="p">{</span> <span class="n">putParcelable</span><span class="p">(</span><span class="n">PARCELABLE_KEY</span><span class="p">,</span> <span class="n">entity</span><span class="p">)</span> <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>SimpleDialogFragmentã®éƒ¨åˆ†ã‚‚åŒã˜ã‚ˆã†ã«æ‹¡å¼µãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ã£ã¦æ›¸ãã¨ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='kotlin'><span class='line'><span class="k">fun</span> <span class="nf">newInstance</span><span class="p">(</span><span class="n">entity</span><span class="p">:</span> <span class="n">MyPacel</span><span class="p">)</span> <span class="p">=</span> <span class="n">MyFragment</span><span class="p">().</span><span class="n">entity</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="k">private</span> <span class="k">fun</span> <span class="nf">MyFragment</span><span class="p">.</span><span class="n">entity</span><span class="p">(</span><span class="n">entity</span><span class="p">:</span> <span class="n">MyPacel</span><span class="p">)</span> <span class="p">=</span> <span class="n">apply</span> <span class="p">{</span> <span class="n">arguments</span> <span class="p">=</span> <span class="n">Bundle</span><span class="p">().</span><span class="n">entity</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span> <span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">private</span> <span class="k">fun</span> <span class="nf">Bundle</span><span class="p">.</span><span class="n">entity</span><span class="p">(</span><span class="n">entity</span><span class="p">:</span> <span class="n">MyPacel</span><span class="p">)</span> <span class="p">=</span> <span class="n">apply</span> <span class="p">{</span> <span class="n">putParcelable</span><span class="p">(</span><span class="n">KEY</span><span class="p">,</span> <span class="n">entity</span><span class="p">)</span> <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>ã ã„ã¶ã‚·ãƒ³ãƒ—ãƒ«ã«ãªã‚Šã¾ã—ãŸã€‚ãƒ¨ã‚¤ãƒ¨ãƒ¨ã‚¤ãƒ¨ã€‚</p>

<h2>setVisibleOrGone</h2>

<p>Databindingå‰ã«ã¯çµæ§‹ä½¿ã†ã“ã¨ãŒå¤šã‹ã£ãŸã®ã§ã™ãŒã€ä»Šã¨ãªã£ã¦ã¯ãƒ»ãƒ»ãƒ»ã§ã‚‚ä¸€å¿œã€‚</p>

<p>Viewã‚’æ¶ˆã—ã¦ã—ã¾ã†ã‹è¡¨ç¤ºã™ã‚‹ã‹ã‚’Booleanå€¤ã§åˆ¤åˆ¥ã™ã‚‹ã‚ˆã†ãªUtilç³»ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’æ›¸ãã¨ã™ã‚‹ã¨</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">setVisibleOrGone</span><span class="o">(</span><span class="n">View</span> <span class="n">view</span><span class="o">,</span> <span class="kt">boolean</span> <span class="n">isVisible</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>    <span class="k">if</span><span class="o">(</span><span class="n">view</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="k">return</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">if</span><span class="o">(</span><span class="n">isVisible</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">view</span><span class="o">.</span><span class="na">setVisiblity</span><span class="o">(</span><span class="n">View</span><span class="o">.</span><span class="na">VISIBLE</span><span class="o">);</span>
</span><span class='line'>    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">view</span><span class="o">.</span><span class="na">setVisiblity</span><span class="o">(</span><span class="n">View</span><span class="o">.</span><span class="na">GONE</span><span class="o">);</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>ã“ã‚Œã‚’kotlinã§æ›¸ãã¨ä¸€è¡Œã§ã„ã‘ã¾ã™ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='kotlin'><span class='line'><span class="k">fun</span> <span class="nf">View</span><span class="o">?.</span><span class="n">setVisibleOrGone</span><span class="p">(</span><span class="n">isVisible</span><span class="p">:</span> <span class="n">Boolean</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">this</span><span class="o">?.</span><span class="n">visibility</span> <span class="p">=</span> <span class="k">if</span> <span class="p">(</span><span class="n">isVisible</span><span class="p">)</span> <span class="n">View</span><span class="p">.</span><span class="n">VISIBLE</span> <span class="k">else</span> <span class="n">View</span><span class="p">.</span><span class="n">GONE</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>nullableã®Viewã®æ‹¡å¼µãƒ¡ã‚½ãƒƒãƒ‰ã€nullå®‰å…¨ã€setter/getterã®çœç•¥ã€ifå¼åˆ©ç”¨ã¨è‰²ã€…Javaã«ã¯ãªã„æ©Ÿèƒ½ã‚’åˆ©ç”¨ã—ã¦ã„ã¾ã™ã€‚</p>

<h2>BaseObservable</h2>

<p>å…¬å¼ã«ã‚ã‚‹ã€ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã‚’Kotlinã§æ°—æŒã¡ã‚ˆãæ›¸ã„ã¦ã¿ã¾ã™ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">private</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">User</span> <span class="kd">extends</span> <span class="n">BaseObservable</span> <span class="o">{</span>
</span><span class='line'>   <span class="kd">private</span> <span class="n">String</span> <span class="n">firstName</span><span class="o">;</span>
</span><span class='line'>   <span class="kd">private</span> <span class="n">String</span> <span class="n">lastName</span><span class="o">;</span>
</span><span class='line'>   <span class="nd">@Bindable</span>
</span><span class='line'>   <span class="kd">public</span> <span class="n">String</span> <span class="nf">getFirstName</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>       <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">firstName</span><span class="o">;</span>
</span><span class='line'>   <span class="o">}</span>
</span><span class='line'>   <span class="nd">@Bindable</span>
</span><span class='line'>   <span class="kd">public</span> <span class="n">String</span> <span class="nf">getLastName</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>       <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">lastName</span><span class="o">;</span>
</span><span class='line'>   <span class="o">}</span>
</span><span class='line'>   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setFirstName</span><span class="o">(</span><span class="n">String</span> <span class="n">firstName</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>       <span class="k">this</span><span class="o">.</span><span class="na">firstName</span> <span class="o">=</span> <span class="n">firstName</span><span class="o">;</span>
</span><span class='line'>       <span class="n">notifyPropertyChanged</span><span class="o">(</span><span class="n">BR</span><span class="o">.</span><span class="na">firstName</span><span class="o">);</span>
</span><span class='line'>   <span class="o">}</span>
</span><span class='line'>   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setLastName</span><span class="o">(</span><span class="n">String</span> <span class="n">lastName</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>       <span class="k">this</span><span class="o">.</span><span class="na">lastName</span> <span class="o">=</span> <span class="n">lastName</span><span class="o">;</span>
</span><span class='line'>       <span class="n">notifyPropertyChanged</span><span class="o">(</span><span class="n">BR</span><span class="o">.</span><span class="na">lastName</span><span class="o">);</span>
</span><span class='line'>   <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Kotlinã§æ›¸ãå‰ã«ã€ãã‚‚ãã‚‚å…·ä½“çš„ã«ã‚„ã‚‹ã“ã¨ã¯ä»¥ä¸‹</p>

<ul>
<li>getterã«<code>@Bindable</code>ã‚’ã¤ã‘ã‚‹</li>
<li>setterã®æœ€å¾Œã«<code>notifyPropertyChanged(BR.firstName);</code>ã‚’å‘¼ã¶</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='kotlin'><span class='line'><span class="k">class</span> <span class="nc">User</span> <span class="p">:</span> <span class="n">BaseObservable</span> <span class="p">{</span>
</span><span class='line'>    <span class="n">@get</span><span class="p">:</span><span class="n">Bindable</span>
</span><span class='line'>    <span class="k">var</span> <span class="py">firstName</span><span class="p">:</span> <span class="n">String</span>
</span><span class='line'>        <span class="k">set</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>            <span class="n">field</span> <span class="p">=</span> <span class="n">value</span>
</span><span class='line'>            <span class="n">notifyPropertyChanged</span><span class="p">(</span><span class="n">BR</span><span class="p">.</span><span class="n">firstName</span><span class="p">)</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">@get</span><span class="p">:</span><span class="n">Bindable</span>
</span><span class='line'>    <span class="k">var</span> <span class="py">lastName</span><span class="p">:</span> <span class="n">String</span>
</span><span class='line'>        <span class="k">set</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>            <span class="n">field</span> <span class="p">=</span> <span class="n">value</span>
</span><span class='line'>            <span class="n">notifyPropertyChanged</span><span class="p">(</span><span class="n">BR</span><span class="p">.</span><span class="n">lastName</span><span class="p">)</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>setter/getterã‚’æ›¸ã‹ãªãã¦è‰¯ã„ã®ã§ã‚·ãƒ³ãƒ—ãƒ«ã«ãªã£ã¦ã¾ã™ã€‚</p>

<p>ã‚‚ã†ã¡ã‚‡ã„ã‚­ãƒ¬ã‚¤ã«ãªã‚Œã°ã„ã„ã§ã™ãŒã€ã‚ã–ã‚ã–ãƒ¡ã‚½ãƒƒãƒ‰æ›¸ã‹ãªãã¦è‰¯ã„ã¨ã„ã†ã ã‘ã§ã‚‚æ°—æŒã¡ã„ã„ã§ã™ã€‚</p>

<h2>Delegate</h2>

<p>ç¶™æ‰¿ã™ã‚‹ãªï¼ç§»è­²ã—ã‚ï¼ã¨è¨€ã‚ã‚Œã¦ã‚‚Javaä½¿ã£ã¦ã‚‹ã¨ç¶™æ‰¿ã—ã¡ã‚ƒã„ã‚¬ãƒãªã®ã§ã™ãŒã€Kotlinã®DelegateãŒã‚ã‚‹ã¨ã“ã‚Œã‚’ç©æ¥µçš„ã«åˆ©ç”¨ã—ãŸã„ãªã¨æ€ãˆã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p>

<p>ViewModelã«Rxã®Subscriptionã®æ©Ÿèƒ½ã‚’å®Ÿè£…ã—ã€<code>Activity#onDestroy</code>æ™‚ã«<code>unsubscribe()</code>ã—ãŸã„ã¨ã„ã†æ™‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nf">MyViewModel</span><span class="o">(</span><span class="n">CompositeSubscription</span> <span class="n">compositeSubscription</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>    <span class="c1">// ...</span>
</span><span class='line'>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">unsubscribe</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">compositeSubscription</span><span class="o">.</span><span class="na">unsubscribe</span><span class="o">();</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Kotlinã§delegateã™ã‚‹ã¨<code>unsubscribe()</code>ã¯æ›¸ã‹ãªãã¦è‰¯ããªã‚Šã¾ã™ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='kotlin'><span class='line'><span class="k">class</span> <span class="nc">MyViewModel</span> <span class="n">@Inject</span> <span class="n">constructor</span><span class="p">(</span><span class="k">var</span> <span class="py">compositeSubscription</span><span class="p">:</span> <span class="n">CompositeSubscription</span><span class="p">)</span> <span class="p">:</span> <span class="n">Subscription</span> <span class="k">by</span> <span class="n">compositeSubscription</span> <span class="p">{</span>
</span><span class='line'>    <span class="c1">// ...</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Activityã§ã¯ã“ã‚“ãªæ„Ÿã˜ã€‚<code>MyViewModel</code>ã§å®Ÿè£…ã—ã¦ã„ãªã„ã®ã«<code>unsubscribe()</code>ã‚’å‘¼ã¶ã“ã¨ãŒå‡ºæ¥ã‚‹ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='kotlin'><span class='line'><span class="k">class</span> <span class="nc">ThirdActivity</span> <span class="p">:</span> <span class="n">AppCompatActivity</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">@field</span><span class="p">:[</span><span class="n">Inject</span><span class="p">]</span>
</span><span class='line'>    <span class="n">lateinit</span> <span class="k">var</span> <span class="py">viewModel</span><span class="p">:</span> <span class="n">MyViewModel</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// ...</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">override</span> <span class="k">fun</span> <span class="nf">onDestroy</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>        <span class="k">super</span><span class="p">.</span><span class="n">onDestroy</span><span class="p">()</span>
</span><span class='line'>        <span class="n">viewModel</span><span class="p">.</span><span class="n">unsubscribe</span><span class="p">()</span>
</span><span class='line'>    <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>droidkaigi2016ã®<a href="https://github.com/konifar/droidkaigi2016/blob/master/app/src/main/java/io/github/droidkaigi/confsched/widget/ArrayRecyclerAdapter.java">ArrayRecyclerAdapter</a>ã‚’ä»¥ä¸‹ã®ã‚ˆã†ãªã«ã™ã‚‹ã“ã¨ã‚‚ã§ãã‚‹ã‘ã©ã€ä½™è¨ˆãªãƒ¡ã‚½ãƒƒãƒ‰ã‚‚ç”Ÿãˆã‚‹ã®ã§ã€ç”¨æ³•ã¨ç”¨é‡ã‚’(çœç•¥</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
</pre></td><td class='code'><pre><code class='kotlin'><span class='line'><span class="k">abstract</span> <span class="k">class</span> <span class="nc">MutableListRecyclerAdapter</span><span class="p">&lt;</span><span class="n">T</span><span class="p">,</span> <span class="n">VH</span> <span class="p">:</span> <span class="n">RecyclerView</span><span class="p">.</span><span class="n">ViewHolder</span><span class="p">&gt;(</span><span class="k">private</span> <span class="k">val</span> <span class="py">list</span><span class="p">:</span> <span class="n">MutableList</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;)</span> <span class="p">:</span>
</span><span class='line'>        <span class="n">RecyclerView</span><span class="p">.</span><span class="n">Adapter</span><span class="p">&lt;</span><span class="n">VH</span><span class="p">&gt;(),</span> <span class="n">Iterable</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;,</span> <span class="n">MutableList</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span> <span class="k">by</span> <span class="n">list</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">var</span> <span class="py">itemClickListener</span><span class="p">:</span> <span class="n">View</span><span class="p">.</span><span class="n">OnClickListener</span><span class="p">?</span> <span class="p">=</span> <span class="k">null</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">override</span> <span class="k">fun</span> <span class="nf">getItemCount</span><span class="p">()</span> <span class="p">=</span> <span class="n">list</span><span class="p">.</span><span class="n">size</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">@UiThread</span> <span class="k">fun</span> <span class="nf">addAllWithNotification</span><span class="p">(</span><span class="n">items</span><span class="p">:</span> <span class="n">Collection</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;)</span> <span class="p">{</span>
</span><span class='line'>        <span class="k">val</span> <span class="py">position</span> <span class="p">=</span> <span class="n">itemCount</span>
</span><span class='line'>        <span class="n">addAll</span><span class="p">(</span><span class="n">items</span><span class="p">)</span>
</span><span class='line'>        <span class="n">notifyItemChanged</span><span class="p">(</span><span class="n">position</span><span class="p">)</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">@UiThread</span> <span class="k">fun</span> <span class="nf">reset</span><span class="p">(</span><span class="n">items</span><span class="p">:</span> <span class="n">Collection</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;)</span> <span class="p">{</span>
</span><span class='line'>        <span class="n">clear</span><span class="p">()</span>
</span><span class='line'>        <span class="n">addAll</span><span class="p">(</span><span class="n">items</span><span class="p">)</span>
</span><span class='line'>        <span class="n">notifyDataSetChanged</span><span class="p">()</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h2>é…å»¶åˆæœŸåŒ–</h2>

<p>Javaã§ç°¡å˜ã«ã‚„ã‚‹å ´åˆã€getterã‚’ä½œæˆã—ã€propertyã‚¢ã‚¯ã‚»ã‚¹ã¯ç¦æ­¢ã—ã€ãã®getterçµŒç”±ã§å€¤ã‚’å–å¾—ã™ã‚‹ã¨ã„ã†ãƒ«ãƒ¼ãƒ«ã®ä¸‹ã‹ã‚ã†ã˜ã¦å‡ºæ¥ã‚‹é…å»¶åˆæœŸåŒ–å‡¦ç†ã§ã™ã€‚</p>

<p>ä¾‹ãˆã°ã€Databindingã®<code>setContentView</code>ã‚’åˆ©ç”¨ã—ã¦ã€<code>binding</code>å¤‰æ•°ã‚’åˆæœŸåŒ–ã—ã¾ã™ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">private</span> <span class="n">MyBinding</span> <span class="n">binding</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="kd">private</span> <span class="n">MyBinding</span> <span class="nf">getBinding</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>    <span class="k">if</span><span class="o">(</span><span class="n">binding</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">binding</span> <span class="o">=</span> <span class="n">DataBindingUtil</span><span class="o">.</span><span class="na">setContentView</span><span class="o">&lt;</span><span class="n">MyBinding</span><span class="o">&gt;(</span><span class="k">this</span><span class="o">,</span> <span class="n">R</span><span class="o">.</span><span class="na">layout</span><span class="o">.</span><span class="na">my</span><span class="o">);</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">binding</span><span class="o">;</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Kotlinã§ã¯<code>by lazy</code>ã‚’åˆ©ç”¨ã—ã¦æ›¸ãã¾ã™ã€‚ä¸€æ—¦<code>binding</code>å¤‰æ•°ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ãŸã‚‰<code>by lazy</code>å†…ã®å‡¦ç†ãŒå®Ÿè¡Œã•ã‚Œã€åˆæœŸåŒ–ã•ã‚Œã¾ã™ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='kotlin'><span class='line'><span class="k">private</span> <span class="k">val</span> <span class="py">binding</span> <span class="k">by</span> <span class="n">lazy</span> <span class="p">{</span>
</span><span class='line'>    <span class="n">DataBindingUtil</span><span class="p">.</span><span class="n">setContentView</span><span class="p">&lt;</span><span class="n">MyBinding</span><span class="p">&gt;(</span><span class="k">this</span><span class="p">,</span> <span class="n">R</span><span class="p">.</span><span class="n">layout</span><span class="p">.</span><span class="n">my</span><span class="p">)</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>valã§ã‚ã‚‹ã®ã‚‚è‰¯ã„ã§ã™ã€‚</p>

<p>ã¡ãªã¿ã«ã€enumã«<code>ordinal</code>ã§ã¯ãªã„æ•°å€¤ã®idã‚’æŒ¯ã‚‹ã“ã¨ãŒã‚ã£ã¦ã€ãã®idã‹ã‚‰é€†å¼•ãã—ãŸã„æ™‚ã«ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã—ãŸ<code>SparseArray</code>ã‚’åˆ©ç”¨ã—ã¦é€†å¼•ãã—ã¾ã™ãŒã€ã“ã®æ™‚ã‚‚<code>by lazy</code>ä½¿ã„ã¾ã™ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='kotlin'><span class='line'><span class="n">companion</span> <span class="k">object</span> <span class="err">{</span>
</span><span class='line'>    <span class="k">private</span> <span class="k">val</span> <span class="py">lookup</span><span class="p">:</span> <span class="n">SparseArray</span><span class="p">&lt;</span><span class="n">MyType</span><span class="p">&gt;</span> <span class="k">by</span> <span class="n">lazy</span> <span class="p">{</span>
</span><span class='line'>        <span class="n">SparseArray</span><span class="p">&lt;</span><span class="n">MyType</span><span class="p">&gt;().</span><span class="n">apply</span> <span class="p">{</span>
</span><span class='line'>            <span class="n">EnumSet</span><span class="p">.</span><span class="n">allOf</span><span class="p">(</span><span class="n">MyType</span><span class="o">::</span><span class="k">class</span><span class="p">.</span><span class="n">java</span><span class="p">).</span><span class="n">forEach</span> <span class="p">{</span>
</span><span class='line'>                <span class="k">this</span><span class="n">@apply</span><span class="p">.</span><span class="n">put</span><span class="p">(</span><span class="n">it</span><span class="p">.</span><span class="n">typeId</span><span class="p">,</span> <span class="n">it</span><span class="p">)</span>
</span><span class='line'>            <span class="p">}</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">fun</span> <span class="nf">fromTypeId</span><span class="p">(</span><span class="n">typeId</span><span class="p">:</span> <span class="n">Int</span><span class="p">):</span> <span class="n">MyType</span> <span class="p">{</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">lookup</span><span class="p">.</span><span class="k">get</span><span class="p">(</span><span class="n">typeId</span><span class="p">)</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h2>parameter name</h2>

<p>Javaã§ã¯ãã‚‚ãã‚‚å‡ºæ¥ãªã„ã®ã§ã™ãŒã€ã“ã‚“ãªPOJOã‚¯ãƒ©ã‚¹ãŒã‚ã£ãŸã¨ã—ã¾ã™ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">User</span> <span class="o">{</span>
</span><span class='line'>    <span class="kd">private</span> <span class="n">String</span> <span class="n">firstName</span><span class="o">;</span>
</span><span class='line'>    <span class="kd">private</span> <span class="n">String</span> <span class="n">lastName</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">public</span> <span class="nf">User</span><span class="o">(</span><span class="n">firstName</span><span class="o">,</span> <span class="n">lastName</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="k">this</span><span class="o">.</span><span class="na">firstName</span> <span class="o">=</span> <span class="n">firstName</span><span class="o">;</span>
</span><span class='line'>        <span class="k">this</span><span class="o">.</span><span class="na">lastName</span> <span class="o">=</span> <span class="n">lastName</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// ãã®ä»–ãƒ¡ã‚½ãƒƒãƒ‰çœç•¥</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="k">new</span> <span class="nf">User</span><span class="o">(</span><span class="s">&quot;å&quot;</span><span class="o">,</span> <span class="s">&quot;å§“&quot;</span><span class="o">);</span>
</span><span class='line'><span class="k">new</span> <span class="nf">User</span><span class="o">(</span><span class="s">&quot;å§“&quot;</span><span class="o">,</span> <span class="s">&quot;å&quot;</span><span class="o">);</span> <span class="c1">// é–“é•ã£ã¦ã„ã‚‹ã‘ã©ã€ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«OK</span>
</span></code></pre></td></tr></table></div></figure>


<p>ç¬¬ä¸€å¼•æ•°ã¨ç¬¬äºŒå¼•æ•°ãŒfirstãªã®ã‹ã€lastãªã®ã‹ã‚ã‹ã‚‰ãªããªã‚Šã¾ã™ã€‚ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã§ã—ã‹æ¤œçŸ¥ã§ããªã„ã®ãŒè¾›ã„ã§ã™ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='kotlin'><span class='line'><span class="n">User</span><span class="p">(</span><span class="n">firstName</span> <span class="p">=</span> <span class="s">&quot;å&quot;</span><span class="p">,</span> <span class="n">lastName</span> <span class="p">=</span> <span class="s">&quot;å§“&quot;</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>å¼•æ•°ã«åå‰ã‚’è¨­å®šã—ã¦ã€ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã³å‡ºã›ã¾ã™ã€‚ã“ã‚“ãªã“ã¨ã—ã¦ã‚‚å±ã‚‰ã‚Œã¾ã›ã‚“ã—ã€é–“é•ã£ãŸæŒ™å‹•ã‚’èµ·ã“ã—ã¾ã›ã‚“ã€‚åŒã˜ã‚ˆã†ãªå‹ãŒå¤šã„ãƒ¡ã‚½ãƒƒãƒ‰å‘¼ã³å‡ºã—ã§ã¯ç©æ¥µçš„ã«ä½¿ã†ã¨æ°—æŒã¡è‰¯ã„ã§ã™ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='kotlin'><span class='line'><span class="n">User</span><span class="p">(</span><span class="n">lastName</span> <span class="p">=</span> <span class="s">&quot;å§“&quot;</span><span class="p">,</span> <span class="n">firstName</span> <span class="p">=</span> <span class="s">&quot;å&quot;</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<h2>æœ€å¾Œã«</h2>

<p>ãƒªã‚¹ãƒˆã‚¢ãƒƒãƒ—ã—ã¦ã¿ãŸã‚‰çµæ§‹å‡ºã¦ãã¾ã—ãŸã€‚ã€‚ã€‚</p>

<p>è½é¸ã—ãŸé …ç›®ã¯<a href="https://gist.github.com/shiraji/2caf8190d282ab3594a21b467980267e">gist</a>ã§å…¬é–‹ã—ã¦ã„ã¾ã™ã€‚</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[How to Contribute R.swift (for Japanese Android Engineer)]]></title>
    <link href="http://shiraji.github.io/blog/2016/12/03/how-to-contribute-swift-library-r-dot-swift/"/>
    <updated>2016-12-03T00:00:00+09:00</updated>
    <id>http://shiraji.github.io/blog/2016/12/03/how-to-contribute-swift-library-r-dot-swift</id>
    <content type="html"><![CDATA[<p>This entry is for Japanese speaker. Those who are interested to contribute R.swift, please refer to <a href="https://github.com/mac-cain13/R.swift/blob/master/Documentation/Contribute.md">this doc</a></p>

<p>ã“ã‚Œã¯<a href="http://qiita.com/advent-calendar/2016/ios">iOS Advent Calendar 2016</a>ã®12/3ã®è¨˜äº‹ã§ã™ã€‚</p>

<p>Swiftã§printlnã‚’æ›¸ã„ã¦ãƒãƒã‚‹ãƒ¬ãƒ™ãƒ«ã®ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãŒä¸€é€±é–“(å®Ÿç¨¼åƒæ™‚é–“ ç´„8æ™‚é–“)ã§R.swiftã«ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ãƒˆã—ãŸãŠè©±ã€‚(ã ã£ãŸã‘ã©ã€ãƒ¡ãƒ³ãƒ†ãƒŠã•ã‚“ãŒåˆ¥ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå§‹ã‚ã¡ã‚ƒã£ã¦ã¾ã ãƒãƒ¼ã‚¸ã•ã‚Œã¦ã„ãªã„ã€‚-> ã“ã®è¨˜äº‹ã®ç¿Œæ—¥2016/12/04ã«ãƒãƒ¼ã‚¸ã•ã‚Œã¾ã—ãŸãƒ¼ï¼)</p>

<p>Swifté–‹ç™ºã—ã¦ã„ã‚‹äººã«ã¨ã£ã¦ã¯å¸¸è­˜ãªè©±ãŒå¤šæ•°ã ã¨æ€ã„ã¾ã™ãŒã€Androidé–‹ç™ºã‚„Kotlinè§¦ã£ã¦ã„ã¦ã€Swiftã‚‚ã‚„ã£ã¦ã¿ãŸã„ï¼ã¨ã‹Swiftã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªé–‹ç™ºã—ã¦ã¿ãŸã„ï¼ã¨ã„ã†äººå‘ã‘ã§ã™ã€‚R.swiftã®ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ãƒˆæ–¹æ³•ã¨ã—ã¦ç´¹ä»‹ã—ã¦ã„ã¾ã™ãŒã€ä»–ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚‚åŒã˜æ„Ÿã˜ãªã®ã§ã¯ãªã„ã‹ãªãƒ¼ã¨æ€ã£ã¦ã¾ã™ã€‚</p>

<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<!-- 728x90 -->


<p><ins class="adsbygoogle"
     style="display:inline-block;width:728px;height:90px"
     data-ad-client="ca-pub-3940616565912592"
     data-ad-slot="7693358062"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>




<!-- more -->


<h1>æƒ³å®šèª­è€…</h1>

<ul>
<li>Androidé–‹ç™ºã‚„Kotlinè§¦ã£ã¦ã„ã„ã¦ã€iOSã®é–‹ç™ºã‚‚èˆˆå‘³ãŒã‚ã‚‹</li>
<li>Swiftã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ãƒˆã—ã¦ã¿ãŸã„ã‘ã©ã€ã—ãŸã“ã¨ãŒãªã„</li>
</ul>


<p>ç”³ã—è¨³ãªã„ã§ã™ãŒã€iOS/Swifté–‹ç™ºçµŒé¨“ãŒé•·ã„äººã¯æƒ³å®šå¤–ã§ã™ã€‚</p>

<h1>è‡ªå·±ç´¹ä»‹</h1>

<p>KotlinãŒå¥½ããªAndroidã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã§ã™ã€‚</p>

<ul>
<li>SwiftåŠ›: printlnã¨ã‹æ›¸ã„ã¦ã€ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ã«ãªã£ã¦ã€ãªã‚“ã§ã‚„ï¼Ÿã£ã¦æ‚©ã‚€ãã‚‰ã„</li>
<li>XcodeåŠ›: æ–°è¦ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆã¯ä»»ã›ã‚ï¼</li>
<li>ãã®ä»–: cocoapodã¯çŸ¥ã£ã¦ãŸã€‚ObjCã¯æ›¸ã„ãŸã“ã¨ã‚ã£ãŸã‘ã©ã€ãƒ–ãƒ©ãƒ³ã‚¯ãŒ2å¹´ã»ã©ã‚ã‚‹ã€‚</li>
</ul>


<p>iOSé–‹ç™ºã¯ç´ äººã«æ¯›ãŒç”ŸãˆãŸç¨‹åº¦ã®ãƒ¬ãƒ™ãƒ«ã®äººé–“ã¨ã„ã†ã“ã¨ã§ã™ã€‚</p>

<h1>çµŒç·¯</h1>

<ul>
<li>Swift3ã®å‹‰å¼·ã—ãŸã„ã€‚</li>
<li>ã‚ã€ãã†ã„ãˆã°ã€ã“ã‚“ãª<a href="http://shiraji.github.io/blog/2016/01/10/pull_req_study/">è¨˜äº‹</a>ãŒãƒ»ãƒ»ãƒ»</li>
<li>ã‚„ã‚‹ã‹ï¼</li>
</ul>


<h1>ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆé¸å®š</h1>

<p>ãƒ—ãƒ«ãƒªã‚¯é§†å‹•é–‹ç™ºã®ãƒ«ãƒ¼ãƒ«ã¯ä»¥ä¸‹ã§ã™ã€‚</p>

<ul>
<li>GitHubã®ã‚¹ã‚¿ãƒ¼ãŒ500ä»¥ä¸Šã€‚å‡ºæ¥ã‚Œã°5000ä»¥ä¸Š</li>
<li>é–‹ç™ºãŒæ´»ç™º</li>
<li>IssueãŒãƒ©ãƒ™ãƒ«ãªã©ã§ç®¡ç†ã•ã‚Œã¦ã„ã‚‹</li>
<li>æ”¾ç½®ã•ã‚Œã¦ã„ã‚‹pull requestãŒå°‘ãªã„</li>
<li>GitHubã§å®Œçµã—ã¦ã„ã‚‹</li>
<li>ä½¿ã£ãŸã“ã¨ã‚ã‚‹ãªã—ã¯æ°—ã«ã—ãªã„</li>
</ul>


<p>ã“ã‚Œã«å‰‡ã£ã¦ã€å‹‰å¼·ã§ããã†ãªæ˜Ÿå¤šã„ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’æ¢ã—ã¦ã¿ã¾ã—ãŸã€‚</p>

<table>
<thead>
<tr>
<th style="text-align:center;"> åå‰ </th>
<th style="text-align:center;"> ãƒ©ã‚¤ãƒ–ãƒ©ãƒªæ¦‚è¦ </th>
<th style="text-align:center;"> æ¤œè¨ã—ãŸç†ç”± </th>
<th style="text-align:left;"> æ¤œè¨çµæœ </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;"><a href="https://github.com/ikesyo/Himotoki">Himotoki</a></td>
<td style="text-align:center;">ã‚¿ã‚¤ãƒ—ã‚»ãƒ¼ãƒ•ãªJSONãƒ‡ã‚³ãƒ¼ãƒ‰ãƒ©ã‚¤ãƒ–ãƒ©ãƒª</td>
<td style="text-align:center;">ãƒ¡ãƒ³ãƒ†ãƒŠãƒ¼ãŒæ—¥æœ¬äººã®ikesyoã•ã‚“ã¨ã„ã†å®‰å¿ƒæ„Ÿã‹ã‚‰ã€‚<br>(æã‚Œå¤šãã¦é–¢ã‚ã£ãŸã“ã¨ãŒãªã„ã®ã§ã™ãŒãƒ»ãƒ»ãƒ»)</td>
<td style="text-align:left;">issueãªã—ï¼(ã‚¹ã‚²ã‚§ãƒ»ãƒ»ãƒ»</td>
</tr>
<tr>
<td style="text-align:center;"><a href="https://github.com/onevcat/Kingfisher">Kingfisher</a></td>
<td style="text-align:center;">Imageã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãƒ»ã‚­ãƒ£ãƒƒã‚·ãƒ³ã‚°ãƒ©ã‚¤ãƒ–ãƒ©ãƒª</td>
<td style="text-align:center;">ãªã‚“ã‹åå‰ãŒã‹ã£ã“ã‚ˆã‹ã£ãŸ</td>
<td style="text-align:left;">é–‹ç™ºæ´»ç™ºâ—‹<br>ãƒ©ãƒ™ãƒªãƒ³ã‚°ãŒãªã„â˜“</td>
</tr>
<tr>
<td style="text-align:center;"><a href="https://github.com/Alamofire/Alamofire">Alamofire</a></td>
<td style="text-align:center;">Swiftç‰ˆHTTPãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯</td>
<td style="text-align:center;">Swiftã‚„ã‚‹ãªã‚‰ã“ã‚Œã§ã—ã‚‡ã¨ã„ã†çŸ­çµ¡çš„ãªç™ºæƒ³</td>
<td style="text-align:left;">é–‹ç™ºæ´»ç™ºâ—‹<br>ãƒ©ãƒ™ãƒªãƒ³ã‚°ã‚ã‚Šâ—‹<br>ãƒ¡ã‚¤ãƒ³ãƒ†ãƒŠãƒ¼å¤šãã†â—‹<br>HTTPå‘¨ã‚Šã®çŸ¥è­˜å¿…é ˆã£ã½ã„â–³</td>
</tr>
<tr>
<td style="text-align:center;"><a href="https://github.com/mac-cain13/R.swift">R.swift</a></td>
<td style="text-align:center;">ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¿ã‚¤ãƒ ã§ã‚³ãƒ¼ãƒ‰ç”Ÿæˆ<br>Androidã§è¨€ã†Rã‚¯ãƒ©ã‚¹ã‚’ä½¿ãˆã‚‹ã‚ˆã†ã«ã™ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒª</td>
<td style="text-align:center;">è‡ªåˆ†ãŒAndroidå‡ºèº«è€…ã ã‹ã‚‰</td>
<td style="text-align:left;">é–‹ç™ºæ´»ç™ºâ—‹<br>ãƒ©ãƒ™ãƒªãƒ³ã‚°ãŒã—ã£ã‹ã‚Šâ—‹<br>ãƒ¡ã‚¤ãƒ³ãƒ†ãƒŠãƒ¼ãŒè¤‡æ•°ã„ã‚‹ã£ã½ã„â—‹<br>è‡ªåˆ†ãŒæŒã£ã¦ã„ã‚‹çŸ¥è­˜ã§ã„ã‘ã‚‹ã£ã½ã„â—‹</td>
</tr>
</tbody>
</table>


<p>ã¨ã„ã†ã“ã¨ã§ä»Šå›ã¯<a href="https://github.com/mac-cain13/R.swift">R.swift</a>ã‚’é¸æŠã—ã¾ã—ãŸã€‚</p>

<h1>å®Ÿéš›ã«å‹‰å¼·å‡ºæ¥ãŸäº‹</h1>

<p>ä»Šå›ã®ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ãƒˆã§ä»¥ä¸‹ã®é …ç›®ã‚’å‹‰å¼·ã—ã¾ã—ãŸã€‚</p>

<ul>
<li>ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ãƒ“ãƒ«ãƒ‰æ–¹æ³•</li>
<li>ã‚µãƒ³ãƒ—ãƒ«ã‚¢ãƒ—ãƒªã®ãƒ“ãƒ«ãƒ‰æ–¹æ³•</li>
<li>Swiftã®æ–‡æ³•(optional/guard/ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³å‡¦ç†ãªã©)</li>
<li>Cãƒ©ã‚¤ãƒ–ãƒ©ãƒª/Cã‚³ãƒ¼ãƒ‰ã®å°å…¥æ–¹æ³•</li>
<li>ãƒªãƒ•ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³?(Mirror)</li>
<li>XCTestã®æ›¸ãæ–¹</li>
</ul>


<p>ãªã‹ãªã‹æ¿ƒã„ä¸€é€±é–“ã§ã—ãŸã€‚</p>

<h2>ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ãƒ“ãƒ«ãƒ‰æ–¹æ³•</h2>

<p>ã“ã“ã‚’rswiftã«å¤‰ãˆã‚‹ã€‚</p>

<p><img src="https://raw.githubusercontent.com/wiki/shiraji/images/blog/images/how-to-contribute-swift-library-r-dot-swift/change_to_rswift_scheme.png" alt="change_to_rswift_scheme.png" /></p>

<p><img src="https://raw.githubusercontent.com/wiki/shiraji/images/blog/images/how-to-contribute-swift-library-r-dot-swift/change_scheme.png" alt="change_scheme.png" /></p>

<p>Runã§ã¯ãªãã€Buildã§OK</p>

<p><img src="https://raw.githubusercontent.com/wiki/shiraji/images/blog/images/how-to-contribute-swift-library-r-dot-swift/build_rswift.png" alt="build_rswift.png" /></p>

<h2>ã‚µãƒ³ãƒ—ãƒ«ã‚¢ãƒ—ãƒªã®ãƒ“ãƒ«ãƒ‰æ–¹æ³•</h2>

<p>ã“ã“ã‚’ResourceAppã«å¤‰ãˆã‚‹ã€‚</p>

<p><img src="https://raw.githubusercontent.com/wiki/shiraji/images/blog/images/how-to-contribute-swift-library-r-dot-swift/change_to_rswift_scheme2.png" alt="change_to_rswift_scheme2.png" /></p>

<p>ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚³ãƒ¼ãƒ‰å†…ã«<code>print()</code>ã‚’æ›¸ã‘ã°<code>rswift.log</code>ã¨ã„ã†ã¨ã“ã‚ã«ãƒ­ã‚°ãŒå‡ºåŠ›ã•ã‚Œã‚‹ã‚ˆã†ã«è¨­å®šã•ã‚Œã¦ã„ã¾ã™ã€‚ã“ã‚Œã‚’åˆ©ç”¨ã—ã¦ã€å¤‰æ›´ã‚’ç¢ºèªã—ã¦ã„ãã¾ã™ã€‚</p>

<h2>Swiftã®æ–‡æ³•</h2>

<p>è‡ªåˆ†ã¯æœ¬ã‚’èª­ã‚“ã§å‹‰å¼·ã™ã‚‹ã¨ã„ã†ã‚¿ã‚¤ãƒ—ã§ã¯ãªãã€try-errorã§å®Ÿéš›ã«è§¦ã£ã¦å‹‰å¼·ã™ã‚‹ã‚¿ã‚¤ãƒ—ã§ã™ã€‚</p>

<p>Swiftã®æ–‡æ³•ã‚‚æ›¸ããªãŒã‚‰è¦šãˆã¦ã„ãã¾ã—ãŸãŒã€ã¡ã‚‡ãã¡ã‚‡ãã“ã‚Œã©ã†ã‚„ã‚Œã°ã„ã„ã®ï¼Ÿã£ã¦ã„ã†ã®ã«ã¶ã¤ã‹ã‚Šã¾ã—ãŸã€‚ç‰¹ã«Kotlinã®smartcastã®çŸ¥è­˜ãŒé‚ªé­”ã—ã¦ãã¾ã—ãŸã€‚ã€‚ã€‚<code>if let guard</code>ãªã©ã¯æ–‡æ³•ãŒçµæ§‹ç‰¹æ®Šãªã®ã§æœ€å¾Œã¾ã§æ…£ã‚Œã¾ã›ã‚“ã§ã—ãŸã€‚ã‚ã¨ã€ä¸€ç•ªã®å•é¡Œã¯Swift3ã‚’èª¿ã¹ãŸã„ã®ã§ã™ãŒã€å¤§é‡ã«Swift2ãªã©ã®å¤ã„æ—¥æœ¬èªãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒå‡ºã¦ãã¾ã™ã€‚iOSé–‹ç™ºè€…è¾›ã„ãªãƒ¼ã¨ã„ã†æ„Ÿã˜ã§ã—ãŸã€‚Optionalã‚‚ã‚³ãƒ³ã‚»ãƒ—ãƒˆã¯Kotlinã¨ä¼¼ã¦ã„ã‚‹ã®ã§ã™ãŒãƒ»ãƒ»ãƒ»ã€‚ã“ã®è¾ºã‚Šã§Kotlinã¨SwiftãŒä¼¼ã¦ã„ã‚‹ã¨è¨€ã£ã¦ã„ãŸäººã‚’ç½µã‚ŠãŸããªã£ã¦ã¾ã—ãŸã€‚</p>

<p>ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³å‡¦ç†ã«é–¢ã—ã¦ã¯Rubyã‚„Java8ã€Kotlinãªã©ä»–ã®è¨€èªã§ã‚‚ã‚ˆãã‚ã‚‹ã‚‚ã®ãªã®ã§ã€ãã“ã¾ã§è‹¦ã—ã¾ãªã‹ã£ãŸã§ã™ã€‚</p>

<h2>Cãƒ©ã‚¤ãƒ–ãƒ©ãƒª/Cã‚³ãƒ¼ãƒ‰ã®å°å…¥æ–¹æ³•</h2>

<p>æ®‹å¿µãªãŒã‚‰ä»Šå›æ¡ç”¨ã¯ã—ãªã‹ã£ãŸã®ã§ã™ãŒã€Cã‚³ãƒ¼ãƒ‰ã®å°å…¥ã‚’è©¦ã¿ã¾ã—ãŸã€‚</p>

<p>Androidã§ã‚ã‚Œã°ã€NDKã‚’å…¥ã‚Œã¦ã€Cã‚³ãƒ¼ãƒ‰ã¨jnlã‚’ç”¨æ„ã—ã¦ãƒ¼ã¨æœ¬å½“ã«å¤šãã®ã“ã¨ã‚’ã‚„ã‚‰ãªã„ã¨Cã‚³ãƒ¼ãƒ‰ã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã¯å‡ºæ¥ã¾ã›ã‚“ã€‚iOSé–‹ç™ºã®ã“ã‚Œã¯å¼·ã¿ã§ã€æ¯”è¼ƒçš„ç°¡å˜ã«åˆ©ç”¨å‡ºæ¥ã¾ã™ã€‚</p>

<p>å°å…¥æ–¹æ³•ã¨ã—ã¦ã¯</p>

<ol>
<li>.h/.cãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«è¿½åŠ ã—ã¾ã™ã€‚ä»Šå›ã¯<code>wildmatch.h</code>/<code>wildmatch.c</code></li>
<li>rswift-Bridging-Header.hãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã€åˆ©ç”¨ã—ãŸã„.hã‚’importã—ã¾ã™ã€‚<code>#import "wildmatch.h"</code></li>
<li>Swiftã§<code>wildmatch.h</code>ã«ã‚ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã³å‡ºã—ã¾ã™</li>
</ol>


<p>ã“ã‚“ãªã“ã¨ã§åˆ©ç”¨å‡ºæ¥ã¦ã—ã¾ã†ã‚“ã‹ï¼ã¨é©šæ„•ã—ã¾ã—ãŸã€‚Xcodeã®ã‚³ãƒ³ãƒ†ãƒ³ãƒˆã‚¢ã‚·ã‚¹ãƒˆã«ã‚‚å³æ™‚åæ˜ ã•ã‚Œã‚‹ã—ã€é©šãã£ã±ãªã—ã§ã—ãŸã€‚</p>

<h2>ãƒªãƒ•ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³?(Mirror)</h2>

<p>Swiftã«ã‚‚Javaã®ãƒªãƒ•ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ãŒã‚ã‚Šã¾ã—ãŸã€‚<code>Mirror</code>ã¨ã„ã†ã‚¯ãƒ©ã‚¹ã‚’åˆ©ç”¨ã—ã¾ã™ã€‚å®Ÿã¯ã“ã‚Œä½¿ã„æ–¹ãŒé–“é•ã£ã¦ã„ãŸã®ã‹ã†ã¾ãå‹•ãã¾ã›ã‚“ã§ã—ãŸã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="k">let</span> <span class="n">imageMirror</span> <span class="o">=</span> <span class="n">Mirror</span><span class="p">(</span><span class="nl">reflecting</span><span class="p">:</span> <span class="n">R</span><span class="p">.</span><span class="n">image</span><span class="p">.</span><span class="nb">self</span><span class="p">)</span>
</span><span class='line'><span class="n">print</span><span class="p">(</span><span class="n">imageMirror</span><span class="p">.</span><span class="n">children</span><span class="p">.</span><span class="n">count</span><span class="p">)</span> <span class="c1">// show 0.</span>
</span></code></pre></td></tr></table></div></figure>


<p>ã¡ãªã¿ã«ã“ã®ã‚³ãƒ¼ãƒ‰ã§ã‚ã‚Œã°å‹•ãã¾ã™ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="k">let</span> <span class="n">imageMirror</span> <span class="o">=</span> <span class="n">Mirror</span><span class="p">(</span><span class="nl">reflecting</span><span class="p">:</span> <span class="n">R</span><span class="p">.</span><span class="n">image</span><span class="p">.</span><span class="n">settings</span><span class="p">)</span>
</span><span class='line'><span class="n">print</span><span class="p">(</span><span class="n">imageMirror</span><span class="p">.</span><span class="n">children</span><span class="p">.</span><span class="n">count</span><span class="p">)</span> <span class="c1">// show children count.</span>
</span></code></pre></td></tr></table></div></figure>


<p>ãŸã¶ã‚“selfã¨ã‹ã®ã›ã„ã ã‚ã†ãªãƒ¼ã¨æ€ã„ã¾ã—ãŸãŒã€æ·±è¿½ã„ã¯ã›ãšã€‚</p>

<h2>XCTestã®æ›¸ãæ–¹</h2>

<p>ã–ã£ãã‚Šã§ã™ãŒã€JUnit3ã¨ã»ã¼åŒã˜ã§ã™ã€‚</p>

<ul>
<li><code>setup</code>/<code>tearDown</code>ãƒ¡ã‚½ãƒƒãƒ‰ãŒå­˜åœ¨ã—ã¦ã„ã‚‹</li>
<li><code>test</code>prefixã‚’ãã‚Œãã‚Œã®ãƒ†ã‚¹ãƒˆãƒ¡ã‚½ãƒƒãƒ‰ã«ã¤ã‘ã‚‹</li>
</ul>


<p>Buildã—ãŸã¨ã“ã‚ã«Testã¨ã„ã†é¸æŠè‚¢ãŒã‚ã‚‹ã®ã§ã€ãã‚Œã‚’é¸ã‚‰ã‚“ã§å®Ÿè¡Œã€‚Javaé–‹ç™ºã«æ…£ã‚Œã¦ã„ã‚‹ãªã‚‰ç‰¹ã«å•é¡Œãªã‹ã£ãŸã§ã™ã€‚</p>

<p>ã‚ã‚‹ç¨‹åº¦é–‹ç™ºã—ãŸå¾Œã«æ°—ã¥ã„ãŸã®ã§ã€ä»Šå›ã¯åˆ©ç”¨ã—ãªã‹ã£ãŸã®ã§ã™ãŒã€XCTestã§ã®TDDé–‹ç™ºã‚‚å¯èƒ½ã§ã™ã€‚ãŸã¶ã‚“ãã¡ã‚‰ã®ã»ã†ãŒæ¨å¥¨ã•ã‚Œã¦ã„ã‚‹ã®ã§ã¯ãªã„ã§ã—ã‚‡ã†ã‹ã€‚</p>

<h1>è‹¦æˆ¦ã—ãŸã¨ã“ã‚</h1>

<p>ãƒ¡ãƒ³ãƒ†ãƒŠã•ã‚“ã«ã‚‚æŒ‡æ‘˜ã‚’å—ã‘ãŸã®ã§ã™ãŒã€ã‚„ã£ã±ã‚Šã¨ã“ã‚ã©ã“ã‚Swiftã‚‰ã—ããªã„æ›¸ãæ–¹ã‚’ã—ã¦ã—ã¾ã£ã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚ãŸã¶ã‚“Kotlinã®ç™–ãŒå‡ºã¦ã„ã‚‹ã®ã§ã¯ãªã„ã‹ã¨ã€‚ã¾ã SwiftåŠ›ãŒä½ã™ãã¦ã©ã“ã®ã“ã¨ã‚’è¨€ã£ã¦ã„ã‚‹ã®ã‹ä¸æ˜ã§ã—ãŸã€‚</p>

<p>ã¾ãŸã€Swiftã®<code>if let</code>ã‚„<code>guard</code>ã«ã¯çµæ§‹è‹¦æˆ¦ã—ã¾ã—ãŸã€‚ä¾‹ãˆã°ä»Šå›ã“ã‚“ãªæ„Ÿã˜ã§ã€<code>ignoreFile</code>ã¨ã„ã†å¤‰æ•°ã‚’åˆæœŸåŒ–ã™ã‚‹ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãã¾ã—ãŸã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'>  <span class="k">if</span> <span class="k">let</span> <span class="n">rswiftignoreURL</span> <span class="o">=</span> <span class="n">callInformation</span><span class="p">.</span><span class="n">rswiftignoreURL</span> <span class="p">{</span>
</span><span class='line'>    <span class="n">ignoreFile</span> <span class="o">=</span> <span class="n">try</span> <span class="n">IgnoreFile</span><span class="p">(</span><span class="nl">ignoreFileURL</span><span class="p">:</span> <span class="n">rswiftignoreURL</span><span class="p">)</span> <span class="c1">// Exceptionã‚­ãƒ£ãƒƒãƒã¯åˆ¥é€”ã—ã¦ã„ã‚‹</span>
</span><span class='line'>  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>    <span class="n">ignoreFile</span> <span class="o">=</span> <span class="n">IgnoreFile</span><span class="p">()</span>
</span><span class='line'>  <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p><code>let rswiftignoreURL</code>ãŒ</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="k">if</span> <span class="k">let</span> <span class="n">rswiftignoreURL</span> <span class="o">=</span> <span class="n">callInformation</span><span class="p">.</span><span class="n">rswiftignoreURL</span> <span class="p">{</span>
</span><span class='line'>    <span class="n">ignoreFile</span> <span class="o">=</span> <span class="n">try</span> <span class="n">IgnoreFile</span><span class="p">(</span><span class="nl">ignoreFileURL</span><span class="p">:</span> <span class="n">rswiftignoreURL</span><span class="p">)</span> <span class="c1">// Exceptionã‚­ãƒ£ãƒƒãƒã¯åˆ¥é€”ã—ã¦ã„ã‚‹</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>ã“ã®ã‚¹ã‚³ãƒ¼ãƒ—å†…ã§ä½¿ãˆã‚‹ã“ã¨ã«é•å’Œæ„ŸãŒã‚ã‚Šã¾ã—ãŸã€‚</p>

<p>Kotlinã®å ´åˆã¯<code>?.let</code>ã‚’åˆ©ç”¨ã—ãŸå ´åˆã€lambdaã®<code>{}</code>å†…ã§å¤‰æ•°å®šç¾©ã—ã¾ã™ã€‚(ä¸Šè¨˜Swiftã‚³ãƒ¼ãƒ‰ã¯<code>else</code>ã‚‚ã‚ã‚‹ã®ã§å†ç¾ã™ã‚‹ã«ã¯ã€<code>?.let</code>ã§ã¯ã ã‚ã ã‘ã©ã€‚ã‚ã¨<code>it</code>ã‚‚ã‚ã‚‹ã‘ã©ã€ãã‚Œã¯çœç•¥ã€‚)</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='kotlin'><span class='line'><span class="k">val</span> <span class="py">ignoreFile</span> <span class="p">=</span> <span class="n">callInformation</span><span class="p">.</span><span class="n">rswiftignoreURL</span><span class="o">?.</span><span class="n">let</span> <span class="p">{</span> <span class="n">ignoreFileURL</span> <span class="p">-&gt;</span>
</span><span class='line'>    <span class="n">IgnoreFile</span><span class="p">(</span><span class="n">ignoreFileURL</span><span class="p">:</span> <span class="n">ignoreFileURL</span><span class="p">)</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h1>æœ€å¾Œã«</h1>

<p>ãƒ¡ã‚¤ãƒ³ãƒ†ãƒŠã•ã‚“ãŒPRæŠ•ã’ã¦ã‹ã‚‰ã€æ˜‡è¯ã—ã¦ã„ã“ã†ãœã‚¹ã‚¿ã‚¤ãƒ«ã®è‡ªåˆ†ã«ã¨ã£ã¦ç†æƒ³çš„ãªäººã§ã—ãŸã€‚å½¼ï¼Ÿã®ãŠã‹ã’ã§ã€ã‚ã‹ã‚‹ç‚¹ã¾ã§ã‚„ã£ã¦ã¿ã¦çµæœã‚’è²¼ã£ã¦ã€è³ªå•ã™ã‚‹ã‚¹ã‚¿ã‚¤ãƒ«ã§å‹‰å¼·ã—ã¤ã¤ã‚³ãƒ¼ãƒ‰ã‚’å®Œæˆã•ã›ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã—ãŸã€‚</p>

<p>ã¿ã‚“ãªä½¿ã£ã¦ã­ï¼</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Tips for Creating Intellij Plugin in Kotlin]]></title>
    <link href="http://shiraji.github.io/blog/2016/09/18/create-intellij-plugin-2/"/>
    <updated>2016-09-18T21:14:03+09:00</updated>
    <id>http://shiraji.github.io/blog/2016/09/18/create-intellij-plugin-2</id>
    <content type="html"><![CDATA[<p>This is the second blog post for &ldquo;Tips of creating Intellij plugin&rdquo;.</p>

<p>This entry is focus on tips for creating intellij plugin in Kotlin. (But I still believe it is useful for Java developers.)</p>

<p>For more basic tips, please read <a href="http://shiraji.github.io/blog/2016/03/28/create-intellij-plugin/">Tips for Creating Intellij Plugin</a></p>

<h1>Topics</h1>

<ul>
<li>How to find parent</li>
<li>How to find children</li>
<li>How to find files</li>
</ul>


<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<!-- 728x90 -->


<p><ins class="adsbygoogle"
     style="display:inline-block;width:728px;height:90px"
     data-ad-client="ca-pub-3940616565912592"
     data-ad-slot="7693358062"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>




<!-- more -->


<h1>How to find parent</h1>

<p>Finding parent is just calling <code>PsiElement#getParent()</code>. However, in most case, I want to find a specific type of parent. In that case, using extension methods in <code>psiUtils.kt</code> is the best way to do it. <a href="https://github.com/shiraji/kotlin/blob/1.0.3/compiler/frontend/src/org/jetbrains/kotlin/psi/psiUtil/psiUtils.kt#L115-L129">psiUtils.kt</a> provides variety of useful extension methods.</p>

<p>For instance, if I want to find the function that the element belong,</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='kotlin'><span class='line'><span class="k">val</span> <span class="py">parentFunc</span> <span class="p">=</span> <span class="n">element</span><span class="p">.</span><span class="n">getStrictParentOfType</span><span class="p">&lt;</span><span class="n">KtNamedFunction</span><span class="p">&gt;()</span>
</span></code></pre></td></tr></table></div></figure>


<p>This method return <code>null</code> if there is no applicable element. (In the example, if the element is not located inside a function, it will be null.)</p>

<p>For Java developers, use <code>PsiTreeUtil.getParentOfType()</code></p>

<h1>How to find children</h1>

<p>After finding <code>psiUtils.kt</code>, I was expected to find children using something like <code>getStrictChildrenOfType</code> or something. Guess what. I was wrong. There are more useful methods in <a href="https://github.com/shiraji/kotlin/blob/1.0.3/compiler/frontend/src/org/jetbrains/kotlin/psi/psiUtil/psiUtils.kt#L173-L233">psiUtils.kt</a>. The reason why it is not <code>getStrictChildrenOfType</code> is I guess it requires to recursive tree visiting.</p>

<p>To find all children of specific types, use <code>collectDescendantsOfType</code></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='kotlin'><span class='line'><span class="n">element</span><span class="p">.</span><span class="n">collectDescendantsOfType</span><span class="p">&lt;</span><span class="n">KtExpression</span><span class="p">&gt;()</span>
</span></code></pre></td></tr></table></div></figure>


<p></p>

<p>To find existance of children of specific type, use <code>anyDescendantOfType</code></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='kotlin'><span class='line'><span class="n">element</span><span class="p">.</span><span class="n">anyDescendantOfType</span><span class="p">&lt;</span><span class="n">KtNamedFunction</span><span class="p">&gt;()</span>
</span></code></pre></td></tr></table></div></figure>


<p>To find the one child of specific type, use <code>findDescendantOfType</code></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='kotlin'><span class='line'><span class="n">element</span><span class="p">.</span><span class="n">findDescendantOfType</span><span class="p">&lt;</span><span class="n">KtFunctionLiteral</span><span class="p">&gt;()</span>
</span></code></pre></td></tr></table></div></figure>


<h1>How to find files</h1>

<p>When I want to iterate though all resource files in my project, following one liner archive it</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='kotlin'><span class='line'><span class="n">FileTypeIndex</span><span class="p">.</span><span class="n">getFiles</span><span class="p">(</span><span class="n">XmlFileType</span><span class="p">.</span><span class="n">INSTANCE</span><span class="p">,</span> <span class="n">ProjectScope</span><span class="p">.</span><span class="n">getProjectScope</span><span class="p">(</span><span class="n">project</span><span class="p">))</span>
</span></code></pre></td></tr></table></div></figure>


<p>(Watch out <code>.idea/</code> folder. It is also include as &ldquo;Project&rdquo; so this line also grabs all xml files in &ldquo;.idea&rdquo;.)</p>

<p>This method find all files in specific types of specific scope. The above line finds all xml files in my project.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[How to Kontribute (for Japanese)]]></title>
    <link href="http://shiraji.github.io/blog/2016/07/14/how-to-kontribute/"/>
    <updated>2016-07-14T13:07:08+09:00</updated>
    <id>http://shiraji.github.io/blog/2016/07/14/how-to-kontribute</id>
    <content type="html"><![CDATA[<p>This entry is for Japanese. For English speaker, please refer <a href="https://github.com/JetBrains/kotlin">kotlin repo</a></p>

<h1>æœ€åˆã«</h1>

<p>kotlinã«contributeã—å§‹ã‚ã¾ã—ãŸã€‚ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«æ›¸ã„ã¦ãªã„éƒ¨åˆ†ãŒã‚ã£ãŸã®ã§ã€ä¸»ã«è‡ªåˆ†ç”¨ã«ãªã‚Šã¾ã™ãŒã€æ›¸ã„ã¦ãŠãã¾ã™ã€‚</p>

<p>ã“ã®æ–‡ç« ã¯2016/07ã«æ›¸ã‹ã‚ŒãŸã®ã§ã€ãã®å¾Œã€contributeæ–¹æ³•ãŒå¤‰ã‚ã£ã¦ã„ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚</p>

<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<!-- 728x90 -->


<p><ins class="adsbygoogle"
     style="display:inline-block;width:728px;height:90px"
     data-ad-client="ca-pub-3940616565912592"
     data-ad-slot="7693358062"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>




<!-- more -->


<p>contributeã™ã‚‹å‰ã«<a href="https://github.com/JetBrains/kotlin/blob/master/ReadMe.md">README</a>ã¯å¿…ãšèª­ã¿è¾¼ã‚“ã§ãã ã•ã„ã€‚</p>

<h1>é–‹ç™ºç’°å¢ƒ</h1>

<h2>JDKå‘¨ã‚Š</h2>

<p>ç‰¹ã«ã€JDKã®è¨­å®šã¯è¤‡é›‘ã§ã™ã€‚jdk1.6, 1.7, 1.8å…¨ã¦ãŒå¿…è¦ã§ã€ãã‚Œã‚‰ã‚’ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆé€šã‚ŠæŒ‡å®šã—ã¾ã™ã€‚</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>JDK_17=`/usr/libexec/java_home -v 1.7`</span></code></pre></td></tr></table></div></figure>


<p>ã“ã‚“ãªæ„Ÿã˜ã§è¨­å®šã—ã¦ã„ãã¾ã—ãŸã€‚</p>

<h3>Windows user</h3>

<p>è‡ªåˆ†ã¯Windowsã§ã®é–‹ç™ºã‚’ã—ã¦ã„ãªã„ã®ã§ã™ãŒã€Windowsã§é–‹ç™ºã™ã‚‹å ´åˆã€JDKã¯Oracleã•ã‚“ãŒå‡ºã—ã¦ã„ã‚‹ã‚‚ã®ãŒè‰¯ã„ã‚ˆã†ã§ã™ã€‚</p>

<p>Macã§ã‚ã‚Œã°ã€OpenJDKã§ã‚‚Orableã®ã‚„ã¤ã§ã‚‚ã©ã¡ã‚‰ã§ã‚‚å•é¡Œãªããƒ“ãƒ«ãƒ‰ã§ãã‚‹ãã†ã§ã™ã€‚</p>

<h2>build</h2>

<p><strong>buildã‚³ãƒãƒ³ãƒ‰ã¯2017/09/20ã«gradleã‚’åˆ©ç”¨ã™ã‚‹å¤§ããªå¤‰æ›´ãŒå…¥ã‚Šã¾ã—ãŸã€‚æ™‚é–“ãŒå‡ºæ¥ãŸã‚‰åæ˜ ã—ã¾ã™ã€‚</strong></p>

<p>pullã«ã¯çµæ§‹æ™‚é–“ã‹ã‹ã‚Šã¾ã™ã€‚buildã‚³ãƒãƒ³ãƒ‰ã¯ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«ã‚ã‚‹é€šã‚Šã€</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>ant -f update_dependencies.xml
</span><span class='line'>ant -f build.xml</span></code></pre></td></tr></table></div></figure>


<p>kotliné–‹ç™ºç”¨ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚‚å¿…è¦ã§ã™ã€‚</p>

<p>å…¨ã¦ãŒæƒã‚ãªã„é™ã‚Šã€ãƒ“ãƒ«ãƒ‰å‡ºæ¥ã¾ã›ã‚“ã€‚ã“ã®ã‚ãŸã‚Šã§æ–­å¿µã™ã‚‹ã®ã¯ã‚‚ã£ãŸã„ãªã„ã®ã§ã€ã‚ã‹ã‚‰ãªã‘ã‚Œã°ã€slackã®kotlinlangã®kontributorãƒãƒ£ãƒ³ãƒãƒ«ã§èã„ã¦ãã ã•ã„ã€‚</p>

<p>kotlinlangã®slackã¯<a href="https://kotlinlang.org/community.html%E3%81%93%E3%81%93%E3%81%AB%E8%A9%B3%E7%B4%B0%E3%81%8C%E3%81%82%E3%82%8A%E3%81%BE%E3%81%99%E3%80%82">https://kotlinlang.org/community.html%E3%81%93%E3%81%93%E3%81%AB%E8%A9%B3%E7%B4%B0%E3%81%8C%E3%81%82%E3%82%8A%E3%81%BE%E3%81%99%E3%80%82</a></p>

<h3>ANTã®è¨­å®š</h3>

<p>ã‚ˆããƒãƒã‚‹ã®ãŒã€antã®è¨­å®šã§ã™ã€‚Heapã‚µã‚¤ã‚ºã‚’å¢—ã‚„ã•ãªã„ã¨ãƒ“ãƒ«ãƒ‰å‡ºæ¥ãªã„ã“ã¨ãŒå¤šã€…ç™ºç”Ÿã—ã¾ã™ã€‚</p>

<p>ä»¥ä¸‹ã®ã‚ˆã†ã«<code>ANT_OPTS</code>ã‚’è¨­å®šã—ã¦ä¸‹ã•ã„ã€‚Xmxã®æ•°å€¤ã¯ä»»æ„ã€‚</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>export ANT_OPTS="-Xmx2048m -XX:MaxPermSize=2048m"</span></code></pre></td></tr></table></div></figure>


<h2>run</h2>

<p>.idea/runConfigurationã‚’è¦‹ã¦ã‚‚ã‚‰ã†ã¨ã‚ã‹ã‚‹ã®ã§ã™ãŒã€ã‹ãªã‚Šå¤šãã®runè¨­å®šãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚</p>

<p>ãƒ“ãƒ«ãƒ‰ãŒæˆåŠŸã™ã‚Œã°ã€ãã‚Œã‚‰ã‚’runã™ã‚‹ã ã‘ã§ã€å‹•ãã¾ã™ã€‚IDEAã‚’runã™ã‚‹ã¨è‡ªåˆ†ã®ä¿®æ­£ã‚’å–ã‚Šè¾¼ã‚“ã IntellijãŒç«‹ã¡ä¸ŠãŒã‚Šã¾ã™ã€‚</p>

<h3>run test</h3>

<p>Unitãƒ†ã‚¹ãƒˆã‚‚IDEAãªã©ã¨åŒã˜ã§runè¨­å®šã‹ã‚‰èµ·å‹•ã—ã¾ã™ã€‚</p>

<p>ä¸€ã¤ä¸€ã¤ã®ãƒ†ã‚¹ãƒˆã‚’èµ·å‹•ã™ã‚‹ã“ã¨ã‚‚å‡ºæ¥ã¾ã™ãŒã€working directoryãŒãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆrootã‚’æŒ‡å®šã—ãªã„é™ã‚Šå‹•ã‹ãªã„ã®ã§æ³¨æ„ã€‚All IDEA Plugin Testsã®è¨­å®šã‚’å‚è€ƒã«ã—ã¦ãã ã•ã„ã€‚</p>

<h3>Plugin &ldquo;GitHub&rdquo; was not loaded: required plugin &ldquo;Git4Idea&rdquo; not installed.</h3>

<p><code>ideaSDK/config-idea</code>ã®ä¸­èº«ã‚’å…¨ã¦æ¶ˆã›ã°ã„ã„ã‚‰ã—ã„ã€‚</p>

<p>ã§ã‚‚ãã‚Œã§å‹•ããƒã‚·ãƒ³ã¨å‹•ã‹ãªã„ãƒã‚·ãƒ³ãŒã‚ã£ãŸã€‚ã“ã‚Œã«é–¢ã—ã¦ã¯è¬ã€‚å‹•ã‹ãªã„ãƒã‚·ãƒ³ã¯ã‚‚ã†ä¸€å›ç’°å¢ƒæ§‹ç¯‰ã—ãªãŠã—ã¦ã¿ã¾ã™ã€‚</p>

<h4>è¿½è¨˜</h4>

<p>ç†ç”±ãŒã‚ã‹ã‚Šã¾ã—ãŸã€‚ãƒ†ã‚¹ãƒˆæ™‚ã«SDKã«è¨­å®šã•ã‚Œã¦ã„ã‚‹ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’å…¨ã¦èª­ã¿è¾¼ã¿ã¾ã™ã€‚</p>

<p><code>File &gt; Project Structure &gt; 1.8 &gt; Classpath</code></p>

<p>ç§ã®å ´åˆã€ã“ã“ã«ã€CEç‰ˆã®githubãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®ãƒ‘ã‚¹ãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã—ãŸã€‚ã“ã‚Œã‚’å‰Šé™¤ã™ã‚‹ã¨å‹•ãã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚</p>

<p>åˆ¥ãƒ—ãƒ©ã‚°ã‚¤ãƒ³é–‹ç™ºã§ä½¿ã£ã¦ã„ãŸã‚‚ã®ãŒæ®‹ã£ã¦ã„ã¾ã—ãŸã€‚</p>

<h1>é–‹ç™º</h1>

<p>READMEã«ã‚‚ã‚ã‚Šã¾ã™ãŒã€kotlinã«ã¯ã¾ã ã¾ã ã„ã£ã±ã„ã‚„ã‚‹ã“ã¨ãŒã‚ã‚‹ã®ã§ã€contributeã—æ”¾é¡Œã§ã™ã€‚</p>

<p><a href="https://youtrack.jetbrains.com/oauth?state=%2Fissues%2FKT%3Fq%3Dtag%3A%2520%257BUp%2520For%2520Grabs%257D%2520%2523Unresolved">YouTrack</a>ã‹ã‚‰ã‚„ã‚ŠãŸã„ã‚‚ã®ã‚’é¸ã‚“ã§ä¸‹ã•ã„ã€‚</p>

<p>ãã®ã‚¹ãƒ¬ãƒƒãƒ‰ã«ã‚„ã‚‹ã‚ã“ã‚Œï¼ã¨ã‚³ãƒ¡ãƒ³ãƒˆã™ã‚‹ã¨è‰¯ã„ã§ã™ã€‚ã‚„ã£ã¦ã„ã„ã®ã‹ã‚ã‹ã‚‰ãªã„å ´åˆã¯ã€kontributorãƒãƒ£ãƒ³ãƒãƒ«ã§ã‚„ã£ã¦ã„ã„ã‹ï¼Ÿã¨ã„ã†è³ªå•ã‚’æŠ•ã’ã¦ä¸‹ã•ã„ã€‚JetBrainsã®å–¶æ¥­æ™‚é–“ã«ãªã‚Œã°ã ã„ãŸã„å›ç­”ãŒæ¥ã¾ã™ã€‚</p>

<h2>ãƒ–ãƒ©ãƒ³ãƒå</h2>

<p>ç‰¹ã«ãƒ«ãƒ¼ãƒ«ãªã„ã‚‰ã—ã„ã€‚ãªã‚“ã§ã‚‚è‰¯ã„ã€‚masterã¯ã•ã™ãŒã«ãƒãƒŠãƒ¼é•åã ã¨æ€ã†ã€‚</p>

<h2>ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸</h2>

<p>ã‚ã‚“ã¾ã‚Šãƒ«ãƒ¼ãƒ«ãŒã‚ã‚‹ã‚ˆã†ã«è¦‹ãˆãªã„ã€‚<code>#KT-12345 Fixed</code>ã¯ã¤ã‘ãŸã»ã†ãŒè‰¯ã•æ°—ã€‚</p>

<h2>ãƒ†ã‚¹ãƒˆ</h2>

<p>åŸºæœ¬æ›¸ã„ãŸã‚³ãƒ¼ãƒ‰ã«å¯¾ã—ã¦è€ƒãˆã‚‰ã‚Œã‚‹ã‚±ãƒ¼ã‚¹ã®ãƒ†ã‚¹ãƒˆã‚’æ›¸ãã“ã¨ã«ãªã‚‹ã€‚<code>XxxTestGenerated</code>ã¨ã„ã†åå‰ã®ã‚¯ãƒ©ã‚¹ã¯Run Configurationã®Generate Testsã§è‡ªå‹•ç”Ÿæˆã•ã‚ŒãŸãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã€‚ã“ã‚Œã‚‰ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã¯ç·¨é›†ã—ãªã„ã€‚</p>

<p>ä¾‹ãˆã°ã€Inspectionã®ãƒ†ã‚¹ãƒˆã®å ´åˆã€<a href="https://github.com/shiraji/kotlin/blob/1.0.3/idea/tests/org/jetbrains/kotlin/idea/codeInsight/InspectionTestGenerated.java">InspectionTestGenerated</a>ãŒã‚ã‚Šã€ã“ã‚Œã«ãƒ†ã‚¹ãƒˆã‚’è¿½åŠ ã™ã‚‹ã«ã¯<code>idea/testData/inspections</code>é…ä¸‹ã«ãƒ•ã‚©ãƒ«ãƒ€ã‚’ä½œæˆã—ã€ãã®ä¸‹ã«ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’ä½œæˆã™ã‚‹ã€‚ãã®å¾Œã€"Generate Tests"ã‚’èµ·å‹•ã•ã›ã‚‹ã¨ã€ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ãŒè¿½åŠ ã•ã‚Œã‚‹ã€‚</p>

<h3>æ–°è¦ã®Unit Test</h3>

<p>æ–°è¦ã®Unit Testã‚’æ›¸ãã“ã¨ã«ãªã‚‹Issueã‚‚ã‚ã‚‹ã€‚</p>

<p>ãã®å ´åˆã€é€šå¸¸é€šã‚Šã€JUnitã§ãƒ†ã‚¹ãƒˆã‚’ä½œæˆã—ã¦ã‚‚ã„ã„ã®ã ã‘ã©ã€<code>KotlinCodeInsightTestCase</code>ã‚’ç¶™æ‰¿ã—ãŸã€abstract classã‚’ä½œæˆã—ã€<a href="https://github.com/shiraji/kotlin/blob/1.0.3/ultimate/tests/org/jetbrains/kotlin/tests/GenerateTests.kt">GenerateTests.kt</a>ã«è¿½è¨˜ã™ã‚‹ã¨ã€ä¸Šè¨˜"Generate Tests"ã®å¯¾è±¡ã¨ãªã‚Šã€abstractã‚¯ãƒ©ã‚¹ã§ä½œã£ãŸãƒ­ã‚¸ãƒƒã‚¯ã«å‰‡ã£ãŸè‡ªå‹•ãƒ†ã‚¹ãƒˆã‚’ä½œæˆã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã‚‹ã€‚</p>

<p>ä¾‹ãˆã°ã€ã“ã®<a href="https://github.com/JetBrains/kotlin/commit/391a0fdde5788ad7c8e854e7eba03a4e186256b5">PR</a>ã§ã¯<code>AbstractConcatenatedStringGeneratorTest</code>ã‚’ä½œæˆã—ã¦ã€<code>ConcatenatedStringGenerator</code>ã‚¯ãƒ©ã‚¹ã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹è‡ªå‹•ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚’ä½œæˆã—ã¦ã„ã‚‹ã€‚</p>

<h2>Pull Request</h2>

<p>ç‰¹ã«æ°—ã«ã›ãšæŠ•ã’ã¦OKã€‚</p>

<p>æŠ•ã’ãŸå¾Œã«ã€ãã®URLã‚’å¯¾è±¡ã®YouTrackã®issueã®ã‚³ãƒ¡ãƒ³ãƒˆã«è²¼ã‚Šä»˜ã‘ã¦æ¬²ã—ã„ã¨ã®ã“ã¨ã€‚</p>

<h2>ãƒãƒ¼ã‚¸</h2>

<p>ãƒãƒ¼ã‚¸ã¯cherry-pickï¼Ÿã§ãƒãƒ¼ã‚¸å…ˆã‚’JetBrainsã®ä¸­ã®äººãŒã‚„ã£ã¦ãã‚Œã‚‹ã€‚å¾®ä¿®æ­£ã¾ã§ã—ã¦ãã‚Œã‚‹ã€‚Authorã¯è‡ªåˆ†ã«ãªã‚‹ã€‚(CommiterãŒJBã®ä¸­ã®äººã€‚)</p>

<p>ã“ã‚“ãªæ„Ÿã˜ã€‚</p>

<p><a href="https://github.com/JetBrains/kotlin/commits?author=shiraji">https://github.com/JetBrains/kotlin/commits?author=shiraji</a></p>

<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<!-- 728x90 -->


<p><ins class="adsbygoogle"
     style="display:inline-block;width:728px;height:90px"
     data-ad-client="ca-pub-3940616565912592"
     data-ad-slot="7693358062"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>


<h1>ãƒ“ãƒ«ãƒ‰å‡ºæ¥ãªããªã£ãŸã‚‰ï¼Ÿ</h1>

<p>kotlinãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã¯çµæ§‹ãªé »åº¦ã§æ›´æ–°ã•ã‚Œã¦ã„ãã¾ã™ã€‚</p>

<p>æ€¥ã«ãƒ“ãƒ«ãƒ‰å‡ºæ¥ãªããªã£ãŸå ´åˆã€ã¾ãšã€kotlinãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’æœ€æ–°ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«ã—ã¦ã„ã‚‹ã®ã‹ç¢ºèªã—ã¦ä¸‹ã•ã„ã€‚</p>

<p>ã¾ãŸã€masterã«ãƒãƒ¼ã‚¸ã•ã‚Œã¦ã„ã‚‹ã‚‚ã®ãŒæ™‚ã€…ãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼ã‚’èµ·ã“ã—ãŸã‚Šã—ã¾ã™ã€‚ã“ã†ãªã‚‹ã¨ãã®ä¿®æ­£ãŒå…¥ã‚‹ã¾ã§ç‰¹ã«ä½•ã‚‚å‡ºæ¥ã¾ã›ã‚“ã€‚æˆ‘æ…¢ã—ã¦å¾…ã¡ã¾ã—ã‚‡ã†ï¼</p>

<p>ãŸã ã€2~3æ—¥ãƒ“ãƒ«ãƒ‰å‡ºæ¥ãªã„ã¨ã„ã†ã®ã¯ä½•ã‹ã—ã‚‰ç’°å¢ƒãŒãŠã‹ã—ã„å ´åˆãŒã‚ã‚Šã¾ã™ã€‚ãã®æ™‚ã¯ä»¥ä¸‹ã®ä½œæ¥­ã‚’ã—ã¦ã¿ã¾ã™ã€‚</p>

<ul>
<li><code>ideaSDK/config-idea</code>ä»¥ä¸‹ã‚’å‰Šé™¤ã™ã‚‹(Runæ™‚ã«ä½¿ã†ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’å‰Šé™¤)</li>
<li><code>ant -f update_dependencies.xml</code>ã‚’å®Ÿè¡Œã™ã‚‹</li>
<li><code>ant dist</code>ã‚’å®Ÿè¡Œã™ã‚‹</li>
</ul>


<p>ãã‚Œã§ã‚‚ã ã‚ãªã‚‰kontributorãƒãƒ£ãƒ³ãƒãƒ«ã§èã„ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p>

<h1>é›‘æ„Ÿ</h1>

<p>æ®ºä¼ã¨ã—ã¦ãŠã‚‰ãšã€ã‚„ã‚ŠãŸã„ï¼ã¨æ‰‹ã‚’ã‚ã’ãŸã‚‰ã‚„ã‚‰ã›ã¦ãã‚Œã‚‹ã€‚ã¡ã‚‡ã£ã¨ã‚ã‹ã‚“ã­ã€‚ã¨ãªã£ã¦ã‚‚è³ªå•ã™ã‚Œã°æ•™ãˆã¦ãã‚Œã‚‹ã€‚</p>

<p>kontributorãƒãƒ£ãƒ³ãƒãƒ«ã§èã‘ã°ã ã„ãŸã„å•é¡Œã¯è§£æ±ºã™ã‚‹ã€‚ã‚„ã£ã¦ã»ã—ã„Issueã¨ã‹ã‚‚èã‘ã°ç­”ãˆã¦ãã‚Œã‚‹ã€‚éå¸¸ã«ã‚„ã‚Šã‚„ã™ã„æ„Ÿã˜ã§ã—ãŸã€‚</p>

<p>IDEå‘¨ã‚Šã¯ä»Šã¾ã§çµæ§‹ã‚³ãƒ¼ãƒ‰æ›¸ã„ã¦ãŸã‚Šèª­ã‚“ã§ãŸã‚Šã—ã¦ã„ã‚‹ã®ã§ã€å¼•ãç¶šãcontributeã—ã¦ã„ã“ã†ã‹ãªã¨è€ƒãˆã¦ã„ã¾ã™ã€‚</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[How to Create Intellij Custom Wizard]]></title>
    <link href="http://shiraji.github.io/blog/2016/07/11/create_intellij_wizard/"/>
    <updated>2016-07-11T13:22:11+09:00</updated>
    <id>http://shiraji.github.io/blog/2016/07/11/create_intellij_wizard</id>
    <content type="html"><![CDATA[<p>Japanese text is following.(æ—¥æœ¬èªã¯è‹±èªã®ä¸‹ã§ã™ã€‚)</p>

<h1>Motivation</h1>

<p>When I created Intellij custom wizard called <a href="https://github.com/shiraji/intellij-plugin-with-gradle-wizard">gradle-intellij-plugin wizard</a>,
I read JetBrains <a href="http://www.jetbrains.org/intellij/sdk/docs/tutorials/project_wizard.html">official documentation</a>.
They explains how to <a href="http://www.jetbrains.org/intellij/sdk/docs/tutorials/project_wizard/module_types.html">support module types</a> and <a href="http://www.jetbrains.org/intellij/sdk/docs/tutorials/project_wizard/adding_new_steps.html">how to add new steps</a>.
However, what I want to know is how to add custom fields, how to add custom files, and how to customize files based on custom fields.</p>

<p>There is no such documentation at this point, so I decided to write this entry for me.</p>

<h1>Topics</h1>

<ul>
<li>How to add custom view</li>
<li>How to get the user input in <code>ModuleWizardStep</code></li>
<li>How to create a file</li>
<li>How to change the file contents</li>
</ul>


<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<!-- 728x90 -->


<p><ins class="adsbygoogle"
     style="display:inline-block;width:728px;height:90px"
     data-ad-client="ca-pub-3940616565912592"
     data-ad-slot="7693358062"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>




<!-- more -->


<h1>How to add custom fields</h1>

<p>To add custom views, it really simple.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="nd">@Override</span>
</span><span class='line'><span class="kd">public</span> <span class="n">JComponent</span> <span class="nf">getComponent</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>    <span class="k">return</span> <span class="k">new</span> <span class="nf">JLabel</span><span class="o">(</span><span class="s">&quot;Provide some setting here&quot;</span><span class="o">);</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Add custom views to <code>JComponent</code> and return <code>getComponent()</code>.</p>

<p>If you make a form file which binds to your <code>ModuleWizardStep</code>, then just return root panel.</p>

<p>In my case, I created GUI <a href="https://github.com/shiraji/intellij-plugin-with-gradle-wizard/blob/1.0.1/src/main/kotlin/com/github/shiraji/ipgwizard/step/IPGWizardSupportLanguageStep.form">form file</a>
Then, bind the form file to <a href="https://github.com/shiraji/intellij-plugin-with-gradle-wizard/blob/1.0.1/src/main/kotlin/com/github/shiraji/ipgwizard/step/IPGWizardSupportLanguageStep.java">IPGWizardSupportLanguageStep</a>.</p>

<p>It ends up</p>

<p><img src="https://raw.githubusercontent.com/shiraji/intellij-plugin-with-gradle-wizard/master/website/images/language.png" alt="language" /></p>

<p>In order to add &ldquo;Project SDK&rdquo; field, you need to override <code>getModuleType()</code> in your <code>ModuleBuilder</code></p>

<p>For instance, to pick standard Java sdk, write following code in kotlin.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='kotlin'><span class='line'><span class="k">override</span> <span class="k">fun</span> <span class="nf">getModuleType</span><span class="p">()</span> <span class="p">=</span> <span class="n">StdModuleTypes</span><span class="p">.</span><span class="n">JAVA</span>
</span></code></pre></td></tr></table></div></figure>


<h1>How to get the user input in <code>ModuleWizardStep</code></h1>

<p>If a user click &ldquo;Next&rdquo; button, <code>ModuleWizardStep#updateDataModel()</code> will be called. You should pass/save the user input in the method.</p>

<p>In my case, it looks really bad design, but it directly passes the language to builder.</p>

<p><a href="https://github.com/shiraji/intellij-plugin-with-gradle-wizard/blob/1.0.1/src/main/kotlin/com/github/shiraji/ipgwizard/step/IPGWizardSupportLanguageStep.java#L43-L46">https://github.com/shiraji/intellij-plugin-with-gradle-wizard/blob/1.0.1/src/main/kotlin/com/github/shiraji/ipgwizard/step/IPGWizardSupportLanguageStep.java#L43-L46</a></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="nd">@Override</span>
</span><span class='line'><span class="kd">public</span> <span class="kt">void</span> <span class="nf">updateDataModel</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">builder</span><span class="o">.</span><span class="na">setLanguage</span><span class="o">(</span><span class="n">languages</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">languageComboBox</span><span class="o">.</span><span class="na">getSelectedIndex</span><span class="o">()));</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<h1>How to create a file</h1>

<p>To create a file for new project, You can use <code>VfsUtil.saveText(VirtualFile, text)</code>.</p>

<p>I found really great method in intellij-community repo.</p>

<p><a href="https://github.com/JetBrains/intellij-community/blob/9d6477485d37e796036ee524788231f2f47e6ada/plugins/gradle/src/org/jetbrains/plugins/gradle/service/project/wizard/GradleModuleBuilder.java#L332-L360">https://github.com/JetBrains/intellij-community/blob/9d6477485d37e796036ee524788231f2f47e6ada/plugins/gradle/src/org/jetbrains/plugins/gradle/service/project/wizard/GradleModuleBuilder.java#L332-L360</a></p>

<p>I wish they open this method.</p>

<h1>How to change the file contents</h1>

<p>Use file template. You can check official documentation of <a href="https://www.jetbrains.com/help/idea/2016.1/file-and-code-templates.html">File and Code Templates</a></p>

<p>One thing I want to add is condition. The file template support conditions in following syntax.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="err">#</span><span class="k">if</span> <span class="o">(</span><span class="n">$</span><span class="o">{</span><span class="n">LANGUAGE</span><span class="o">}</span> <span class="o">&amp;&amp;</span> <span class="n">$</span><span class="o">{</span><span class="n">LANGUAGE</span><span class="o">}</span> <span class="o">==</span> <span class="s">&quot;Kotlin&quot;</span><span class="o">)</span>
</span><span class='line'><span class="n">apply</span> <span class="nl">plugin:</span> <span class="err">&#39;</span><span class="n">kotlin</span><span class="err">&#39;</span>
</span><span class='line'><span class="err">#</span><span class="k">else</span>
</span><span class='line'><span class="n">apply</span> <span class="nl">plugin:</span> <span class="err">&#39;</span><span class="n">java</span><span class="err">&#39;</span>
</span><span class='line'><span class="err">#</span><span class="n">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Watch out the indentation. You will generate useless spaces.</p>

<hr />

<p>æ—¥æœ¬èª</p>

<h1>ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³</h1>

<p>Intellijã®ã‚«ã‚¹ã‚¿ãƒ wizard <a href="https://github.com/shiraji/intellij-plugin-with-gradle-wizard">gradle-intellij-plugin wizard</a>ã‚’ä½œã£ãŸæ™‚ã€JetBrainsã®<a href="http://www.jetbrains.org/intellij/sdk/docs/tutorials/project_wizard.html">å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</a>ã‚’èª­ã¿ã¾ã—ãŸã€‚</p>

<p>ãŸã ã€ã“ã®å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯<a href="http://www.jetbrains.org/intellij/sdk/docs/tutorials/project_wizard/module_types.html">support module types</a>ã¨<a href="http://www.jetbrains.org/intellij/sdk/docs/tutorials/project_wizard/adding_new_steps.html">how to add new steps</a>ã—ã‹ãªãã€ã‚«ã‚¹ã‚¿ãƒ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ä½œæˆæ–¹æ³•ã‚„ã€ãƒ•ã‚¡ã‚¤ãƒ«ã®è¿½åŠ æ–¹æ³•ã€ãƒ•ã‚¡ã‚¤ãƒ«ã®ç·¨é›†æ–¹æ³•ãªã©ãŒã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚</p>

<p>ãã“ã§ã€ã“ã®ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã§ãã®è¾ºã‚Šã®èª¬æ˜ã‚’ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚</p>

<h1>ãƒˆãƒ”ãƒƒã‚¯</h1>

<ul>
<li>ã‚«ã‚¹ã‚¿ãƒ ãƒ“ãƒ¥ãƒ¼ã®è¿½åŠ æ–¹æ³•</li>
<li><code>ModuleWizardStep</code>å†…ã§ã®å…¥åŠ›æƒ…å ±ã®å–å¾—æ–¹æ³•</li>
<li>ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆæ–¹æ³•</li>
<li>ãƒ•ã‚¡ã‚¤ãƒ«ã®å†…å®¹å¤‰æ›´æ–¹æ³•</li>
</ul>


<h1>ã‚«ã‚¹ã‚¿ãƒ ãƒ“ãƒ¥ãƒ¼ã®è¿½åŠ æ–¹æ³•</h1>

<p>ã‚«ã‚¹ã‚¿ãƒ ãƒ“ãƒ¥ãƒ¼ã®è¿½åŠ æ–¹æ³•ã¯æ­£ç›´è¨€ã†ã¨ã‹ãªã‚Šç°¡å˜ã§ã™ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="nd">@Override</span>
</span><span class='line'><span class="kd">public</span> <span class="n">JComponent</span> <span class="nf">getComponent</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>    <span class="k">return</span> <span class="k">new</span> <span class="nf">JLabel</span><span class="o">(</span><span class="s">&quot;Provide some setting here&quot;</span><span class="o">);</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>ã“ã®ãƒ¡ã‚½ãƒƒãƒ‰å†…ã§ã‚«ã‚¹ã‚¿ãƒ ãƒ“ãƒ¥ãƒ¼ã‚’ä½œæˆã—ã€returnã™ã‚Œã°OKã§ã™ã€‚</p>

<p>ã‚‚ã—ã€ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ãŸ<code>ModuleWizardStep</code>ã‚’formãƒ•ã‚¡ã‚¤ãƒ«ã«ãƒã‚¤ãƒ³ãƒ‰ã—ã¦ã„ã‚‹ã®ã§ã‚ã‚Œã°ã€ãƒ«ãƒ¼ãƒˆã®panelã‚’returnã™ã‚‹ã ã‘ã§ã™ã€‚</p>

<p>è‡ªåˆ†ã®å ´åˆã€<a href="https://github.com/shiraji/intellij-plugin-with-gradle-wizard/blob/1.0.1/src/main/kotlin/com/github/shiraji/ipgwizard/step/IPGWizardSupportLanguageStep.form">ãƒ•ã‚©ãƒ¼ãƒ ãƒ•ã‚¡ã‚¤ãƒ«</a>
ã“ã‚Œã‚’ã“ã£ã¡ã«ãƒã‚¤ãƒ³ãƒ‰ã—ã¦ã„ã¾ã™ã€‚
 <a href="https://github.com/shiraji/intellij-plugin-with-gradle-wizard/blob/1.0.1/src/main/kotlin/com/github/shiraji/ipgwizard/step/IPGWizardSupportLanguageStep.java">IPGWizardSupportLanguageStep</a>.</p>

<p>æœ€çµ‚çš„ã«å‡ºæ¥ä¸ŠãŒã‚‹ã®ãŒ</p>

<p><img src="https://raw.githubusercontent.com/shiraji/intellij-plugin-with-gradle-wizard/master/website/images/language.png" alt="language" /></p>

<p>&ldquo;Project SDK"ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’ä½œæˆã™ã‚‹ã«ã¯ã€<code>getModuleType()</code>ã‚’ç¶™æ‰¿ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p>

<p>ä¾‹ãˆã°ã€ã‚¹ã‚¿ãƒ³ãƒ€ãƒ¼ãƒ‰ãªJava SDKã‚’è¿½åŠ ã—ãŸã„å ´åˆã€ä»¥ä¸‹ã®ã‚ˆã†ã«Koltinã§è¨˜è¿°ã—ã¾ã™ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='kotlin'><span class='line'><span class="k">override</span> <span class="k">fun</span> <span class="nf">getModuleType</span><span class="p">()</span> <span class="p">=</span> <span class="n">StdModuleTypes</span><span class="p">.</span><span class="n">JAVA</span>
</span></code></pre></td></tr></table></div></figure>


<h1><code>ModuleWizardStep</code>å†…ã§ã®å…¥åŠ›æƒ…å ±ã®å–å¾—æ–¹æ³•</h1>

<p>ãƒ¦ãƒ¼ã‚¶ãŒ"Next"ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ã€<code>ModuleWizardStep#updateDataModel()</code>ãŒå‘¼ã°ã‚Œã¾ã™ã€‚ã“ã®ãƒ¡ã‚½ãƒƒãƒ‰å†…ã§å€¤ã‚’å–å¾—ã—ãŸã‚Šã€ä¿å­˜ã—ãŸã‚Šã—ã¾ã™ã€‚</p>

<p>è‡ªåˆ†ã®å ´åˆã€ã‹ãªã‚Šè¨­è¨ˆãŒã‚¯ã‚½ã ã‘ã©ã€builderã«ç›´æ¥è¨­å®šã—ã¡ã‚ƒã£ã¦ã¾ã™ã€‚(å‹•ã‘ã°ãˆãˆã‚„ã‚ï¼Ÿ)</p>

<p><a href="https://github.com/shiraji/intellij-plugin-with-gradle-wizard/blob/1.0.1/src/main/kotlin/com/github/shiraji/ipgwizard/step/IPGWizardSupportLanguageStep.java#L43-L46">https://github.com/shiraji/intellij-plugin-with-gradle-wizard/blob/1.0.1/src/main/kotlin/com/github/shiraji/ipgwizard/step/IPGWizardSupportLanguageStep.java#L43-L46</a></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="nd">@Override</span>
</span><span class='line'><span class="kd">public</span> <span class="kt">void</span> <span class="nf">updateDataModel</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">builder</span><span class="o">.</span><span class="na">setLanguage</span><span class="o">(</span><span class="n">languages</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">languageComboBox</span><span class="o">.</span><span class="na">getSelectedIndex</span><span class="o">()));</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<h1>ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆæ–¹æ³•</h1>

<p>ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ–°ã—ã„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«è¿½åŠ ã™ã‚‹ã«ã¯ã€<code>VfsUtil.saveText(VirtualFile, text)</code>ã‚’ä½¿ã„ã¾ã™ã€‚</p>

<p>intellij-communityã®ãƒ¬ãƒã‚¸ãƒˆãƒªã«ã‚ã£ã¡ã‚ƒè‰¯ã„ãƒ¡ã‚½ãƒƒãƒ‰ãŒã‚ã‚Šã¾ã—ãŸã€‚</p>

<p><a href="https://github.com/JetBrains/intellij-community/blob/9d6477485d37e796036ee524788231f2f47e6ada/plugins/gradle/src/org/jetbrains/plugins/gradle/service/project/wizard/GradleModuleBuilder.java#L332-L360">https://github.com/JetBrains/intellij-community/blob/9d6477485d37e796036ee524788231f2f47e6ada/plugins/gradle/src/org/jetbrains/plugins/gradle/service/project/wizard/GradleModuleBuilder.java#L332-L360</a></p>

<p>ã“ã‚Œå…¬é–‹ã—ã¦ãã‚ŒãŸã‚‰ã„ã„ã®ã«ã­ã€‚</p>

<h1>ãƒ•ã‚¡ã‚¤ãƒ«ã®å†…å®¹å¤‰æ›´æ–¹æ³•</h1>

<p>Intellijã®File templateã®ä»•çµ„ã¿ã‚’ä½¿ã„ã¾ã™ã€‚File templateã®<a href="https://www.jetbrains.com/help/idea/2016.1/file-and-code-templates.html">File and Code Templates</a>ã‚’èª­ã‚€ã¨è‰¯ã„ã§ã™ã€‚</p>

<p>ä¸€ã¤ã€æ¡ä»¶æ–‡ã«é–¢ã—ã¦è¨˜è¼‰ãŒãªã‹ã£ãŸã®ã§ã€è¿½åŠ ã§èª¬æ˜ã—ã¾ã™ã€‚æ¡ä»¶æ–‡ã®æ–‡æ³•ã¯ä»¥ä¸‹ã§ã™ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="err">#</span><span class="k">if</span> <span class="o">(</span><span class="n">$</span><span class="o">{</span><span class="n">LANGUAGE</span><span class="o">}</span> <span class="o">&amp;&amp;</span> <span class="n">$</span><span class="o">{</span><span class="n">LANGUAGE</span><span class="o">}</span> <span class="o">==</span> <span class="s">&quot;Kotlin&quot;</span><span class="o">)</span>
</span><span class='line'><span class="n">apply</span> <span class="nl">plugin:</span> <span class="err">&#39;</span><span class="n">kotlin</span><span class="err">&#39;</span>
</span><span class='line'><span class="err">#</span><span class="k">else</span>
</span><span class='line'><span class="n">apply</span> <span class="nl">plugin:</span> <span class="err">&#39;</span><span class="n">java</span><span class="err">&#39;</span>
</span><span class='line'><span class="err">#</span><span class="n">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>spaceã„ã£ã±ã„ç”Ÿæˆã—ã¡ã‚ƒã†ã®ã§ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆæ°—ã‚’ã¤ã‘ã¦ä¸‹ã•ã„ã€‚</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Difference Between Generating Java and Generating Kotlin for Developing IntelliJ Plugin]]></title>
    <link href="http://shiraji.github.io/blog/2016/05/14/difference-between-psijavafile-and-ktfile/"/>
    <updated>2016-05-14T23:33:07+09:00</updated>
    <id>http://shiraji.github.io/blog/2016/05/14/difference-between-psijavafile-and-ktfile</id>
    <content type="html"><![CDATA[<h1>Motivation</h1>

<p>I am a maintainer of <a href="https://github.com/shiraji/permissions-dispatcher-plugin">PermissionsDispatcher Plugin</a> which generates Java and Kotlin for <a href="https://github.com/hotchemi/PermissionsDispatcher">PermissionsDispatcher</a>
Since Kotlin is getting famous for Android developers, I thought IntelliJ plugins, which generate Android code, should support both Java and Kotlin. (By the way, <a href="http://blog.jetbrains.com/kotlin/2016/05/kotlin-1-0-2-is-here/">Kotlin 1.0.2</a> now supports Android lint! This definitely will lead more developers use Kotlin!)</p>

<p>However, while I was developing this plugin, I found really hard to generate both Java and Kotlin code.</p>

<p>So, this blog post describes what are the differences between generating Java and generating Kotlin using IntelliJ plugin.</p>

<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<!-- 728x90 -->


<p><ins class="adsbygoogle"
     style="display:inline-block;width:728px;height:90px"
     data-ad-client="ca-pub-3940616565912592"
     data-ad-slot="7693358062"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>




<!-- more -->


<h1>Environment</h1>

<p>Before start taking about the differences, the followings are the environment for this blog post.</p>

<ul>
<li>Kotlin for writing the plugin</li>
<li>Gradle for build</li>
<li><a href="https://github.com/JetBrains/gradle-intellij-plugin">gradle-intellij-plugin</a></li>
</ul>


<h1><code>getClasses</code> for <code>PsiJavaFile</code> vs <code>KtFile</code></h1>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='kotlin'><span class='line'><span class="n">e</span><span class="p">.</span><span class="n">getData</span><span class="p">(</span><span class="n">CommonDataKeys</span><span class="p">.</span><span class="n">PSI_FILE</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>returns <code>PsiJavaFile</code> or <code>KtFile</code>. Both of them implements <code>PsiClassOwner</code> which means both of them has the method <code>PsiClass[] getClasses()</code>.</p>

<p>This method is useful for <code>PsiJavaFile</code>, it lets access classes of the file. The plugin can read/write contents of the classes.</p>

<p>For <code>KtFile</code>, I expected the same. I want to read/write code of classes. Yes, you can read <code>.class</code> file. It is not classes inside <code>.kt</code> file. So, even though, it has methods <code>add</code>, <code>addBefore</code> or <code>addAfter</code>, <code>KtFile#classes#add</code> throw an exception says the plugin won&rsquo;t be able to write contents to <code>.class</code> file!</p>

<p>If you want to get objects for generating code of Kotlin, then use <code>KtFile#getDeclarations</code>.</p>

<h1><code>PsiFactory</code></h1>

<p>This could be because I could not find the best way to generate code&hellip;but PsiFactory of Java and Kotlin is different</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='Kotlin'><span class='line'><span class="k">val</span> <span class="py">psiElementFactory</span><span class="p">:</span> <span class="n">PsiElementFactory</span> <span class="p">=</span> <span class="n">JavaPsiFacade</span><span class="p">.</span><span class="n">getElementFactory</span><span class="p">(</span><span class="n">project</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='Kotlin'><span class='line'><span class="k">val</span> <span class="py">psiFactory</span><span class="p">:</span> <span class="n">KtPsiFactory</span> <span class="p">=</span> <span class="n">KtPsiFactory</span><span class="p">(</span><span class="n">project</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<h1>Generating annotations</h1>

<p><code>PsiMethod</code> has modifierList</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='kotlin'><span class='line'><span class="n">method</span><span class="p">.</span><span class="n">modifierList</span><span class="p">.</span><span class="n">addAnnotation</span><span class="p">(</span><span class="s">&quot;Foo&quot;</span><span class="p">)</span><span class="err">`</span>
</span></code></pre></td></tr></table></div></figure>


<p>On the other hand, <code>KtNamedFunction</code> has <code>addAnnotationEntry</code></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='kotlin'><span class='line'><span class="n">function</span><span class="p">.</span><span class="n">addAnnotationEntry</span><span class="p">(</span><span class="n">psiFactory</span><span class="p">.</span><span class="n">createAnnotationEntry</span><span class="p">(</span><span class="s">&quot;@Foo&quot;</span><span class="p">))</span>
</span></code></pre></td></tr></table></div></figure>


<p>To insert new line after annotation, you need to add new line manually.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='kotlin'><span class='line'><span class="k">val</span> <span class="py">entry</span> <span class="p">=</span> <span class="n">function</span><span class="p">.</span><span class="n">addAnnotationEntry</span><span class="p">(</span><span class="n">psiFactory</span><span class="p">.</span><span class="n">createAnnotationEntry</span><span class="p">(</span><span class="s">&quot;@Foo&quot;</span><span class="p">))</span>
</span><span class='line'><span class="n">entry</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">psiFactory</span><span class="p">.</span><span class="n">createNewLine</span><span class="p">())</span>
</span></code></pre></td></tr></table></div></figure>


<h1>Generating methods</h1>

<p><code>PsiClass</code> is easy to add method. Use <code>createMethodFromText</code> and <code>add</code> to <code>PsiClass</code></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='kotlin'><span class='line'><span class="k">val</span> <span class="py">methodTemplate</span> <span class="p">=</span> <span class="s">&quot;&quot;&quot;void foo() {</span>
</span><span class='line'><span class="p">}</span><span class="s">&quot;&quot;&quot;.trimMargin()</span>
</span><span class='line'><span class="k">val</span> <span class="py">method</span> <span class="p">=</span> <span class="n">JavaPsiFacade</span><span class="p">.</span><span class="n">getElementFactory</span><span class="p">(</span><span class="n">project</span><span class="p">).</span><span class="n">createMethodFromText</span><span class="p">(</span><span class="n">methodTemplate</span><span class="p">,</span> <span class="n">psiClass</span><span class="p">)</span>
</span><span class='line'><span class="n">psiClass</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">method</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>For kotlin, it&rsquo;s almost the same.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='kotlin'><span class='line'><span class="k">val</span> <span class="py">psiFactory</span> <span class="p">=</span> <span class="n">KtPsiFactory</span><span class="p">(</span><span class="n">project</span><span class="p">)</span>
</span><span class='line'><span class="k">val</span> <span class="py">function</span> <span class="p">=</span> <span class="n">psiFactory</span><span class="p">.</span><span class="n">createFunction</span><span class="p">(</span><span class="s">&quot;&quot;&quot;void foo() {</span>
</span><span class='line'><span class="p">}</span><span class="s">&quot;&quot;&quot;.trimMargin())</span>
</span><span class='line'><span class="n">ktClass</span><span class="p">.</span><span class="n">getBody</span><span class="p">()</span><span class="o">!!</span><span class="p">.</span><span class="n">addBefore</span><span class="p">(</span><span class="n">function</span><span class="p">,</span> <span class="n">ktClass</span><span class="p">.</span><span class="n">getBody</span><span class="p">()</span><span class="o">!!</span><span class="p">.</span><span class="n">rBrace</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Tips for Creating Intellij Plugin]]></title>
    <link href="http://shiraji.github.io/blog/2016/03/28/create-intellij-plugin/"/>
    <updated>2016-03-28T23:00:00+09:00</updated>
    <id>http://shiraji.github.io/blog/2016/03/28/create-intellij-plugin</id>
    <content type="html"><![CDATA[<h1>Summery</h1>

<p>There are tips for creating intellij plugins</p>

<ul>
<li>Logging</li>
<li>plugin.xml</li>
<li>Action</li>
</ul>


<p>This is note for myself. I won&rsquo;t add description if the sample is clear enough for me.</p>

<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<!-- 728x90 -->


<p><ins class="adsbygoogle"
     style="display:inline-block;width:728px;height:90px"
     data-ad-client="ca-pub-3940616565912592"
     data-ad-slot="7693358062"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>




<!-- more -->


<h1>Logging</h1>

<p>Simply use Sys-out</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='Java'><span class='line'><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;logging...&quot;</span><span class="o">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>However, sys-out shows logs on the console. If you want to show pop up, use notification</p>

<h2>Notification</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='Kotlin'><span class='line'><span class="n">Notifications</span><span class="p">.</span><span class="n">Bus</span><span class="p">.</span><span class="n">notify</span><span class="p">(</span><span class="n">Notification</span><span class="p">(</span><span class="s">&quot;Plugin ID&quot;</span><span class="p">,</span>
</span><span class='line'>                <span class="s">&quot;Title&quot;</span><span class="p">,</span>
</span><span class='line'>                <span class="s">&quot;Content&quot;</span><span class="p">,</span>
</span><span class='line'>                <span class="n">NotificationType</span><span class="p">.</span><span class="n">INFORMATION</span><span class="p">))</span>
</span></code></pre></td></tr></table></div></figure>


<h1>plugin.xml</h1>

<h2>URL of the plugin</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="nt">&lt;idea-plugin</span> <span class="na">url=</span><span class="s">&quot;https://plugins.jetbrains.com/plugin/8262?pr=&quot;</span> <span class="na">version=</span><span class="s">&quot;2&quot;</span><span class="nt">&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<h2>vendor</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="nt">&lt;vendor</span> <span class="na">email=</span><span class="s">&quot;isogai.shiraji@gmail.com&quot;</span> <span class="na">url=</span><span class="s">&quot;https://github.com/shiraji&quot;</span><span class="nt">&gt;</span>Shiraji<span class="nt">&lt;/vendor&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<h2>idea-version</h2>

<p>To use kotlin, IDE version should be higher than 143.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="nt">&lt;idea-version</span> <span class="na">since-build=</span><span class="s">&quot;143&quot;</span><span class="nt">/&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<h1>Action class</h1>

<h2>Creating new action</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'>right click src &gt; New &gt; action
</span></code></pre></td></tr></table></div></figure>


<h2>Methods</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='kotlin'><span class='line'><span class="k">override</span> <span class="k">fun</span> <span class="nf">actionPerformed</span><span class="p">(</span><span class="n">e</span><span class="p">:</span> <span class="n">AnActionEvent</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Update method</h2>

<p>To decide show the action or not, I need to override the update method.</p>

<p>This method should be less than 0.1 sec to complete.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='kotlin'><span class='line'><span class="k">override</span> <span class="k">fun</span> <span class="nf">update</span><span class="p">(</span><span class="n">e</span><span class="p">:</span> <span class="n">AnActionEvent</span><span class="p">?)</span> <span class="p">{</span>
</span><span class='line'>    <span class="n">e</span> <span class="o">?:</span> <span class="k">return</span>
</span><span class='line'>    <span class="k">super</span><span class="p">.</span><span class="n">update</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">if</span> <span class="p">(!</span><span class="n">FindPullRequestModel</span><span class="p">(</span><span class="n">e</span><span class="p">).</span><span class="n">isEnable</span><span class="p">())</span> <span class="p">{</span>
</span><span class='line'>        <span class="n">e</span><span class="p">.</span><span class="n">presentation</span><span class="p">.</span><span class="n">isEnabled</span> <span class="p">=</span> <span class="k">false</span>
</span><span class='line'>        <span class="n">e</span><span class="p">.</span><span class="n">presentation</span><span class="p">.</span><span class="n">isVisible</span> <span class="p">=</span> <span class="k">false</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>



]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[ForwardingAstVisitor's Life Cycle (Android Lint)]]></title>
    <link href="http://shiraji.github.io/blog/2016/02/24/forwardingAstVisitor/"/>
    <updated>2016-02-24T14:37:58+09:00</updated>
    <id>http://shiraji.github.io/blog/2016/02/24/forwardingAstVisitor</id>
    <content type="html"><![CDATA[<h1>Summary</h1>

<ul>
<li><code>ForwardingAstVisitor</code> has life cycle</li>
<li>visitXxx -> afterXxx -> endXxx</li>
<li>Begin <code>visitCompilationUnit</code>, End <code>afterVisitCompilationUnit</code></li>
<li>Go from top to bottom. No surprise, except annotation.</li>
<li>Does not talk about visitIf or any of visitXxx where Xxx is keyword</li>
</ul>


<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<!-- 728x90 -->


<p><ins class="adsbygoogle"
     style="display:inline-block;width:728px;height:90px"
     data-ad-client="ca-pub-3940616565912592"
     data-ad-slot="7693358062"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>




<!-- more -->


<h1>Motivation</h1>

<p>The past few weeks, I am working on creating custom lints for <a href="https://github.com/hotchemi/PermissionsDispatcher">PermissionsDispatcher</a>.</p>

<p>Using <code>ForwardingAstVisitor</code> is the easiest way to implement custom lint. I found there are 75 &ldquo;visit&rdquo; methods in the class. For instance, <code>visitMethodDeclaration</code> is called for iterating all method declarations. <code>visitIdentifier</code> is for all identifiers. Trust me, there is even <code>visitIf</code> and <code>visitSwitch</code> that are called for each <code>if</code> and <code>switch</code>.</p>

<p>However, I could not find any documentations that describes which &ldquo;visit&rdquo; method comes first. So&hellip;this is the post that describes what is the &ldquo;lifecycle&rdquo; of <code>ForwardingAstVisitor</code>.</p>

<h1>Basic Rules</h1>

<p>There are 4 types of methods, <code>visit</code>, <code>visitNode</code>, <code>afterVisit</code>, <code>endVisit</code> for <code>ForwardingAstVisitor</code>.</p>

<ul>
<li><code>visitXxx</code> comes first</li>
<li><code>visitNode</code> comes second for dive into the node</li>
<li><code>afterVisitXxx</code> comes if there is no more method call inside <code>visitXxx</code></li>
<li>Finally, <code>endVisit</code> comes for wrap up.</li>
</ul>


<p>For instance, followings are the method call for checking <code>@Override</code>:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>visitAnnotation                     : target node -&gt; @Override
</span><span class='line'>| visitNode                         : target node -&gt; @Override
</span><span class='line'>| | visitTypeReference              : target node -&gt; Override
</span><span class='line'>| | | visitNode                     : target node -&gt; Override
</span><span class='line'>| | | | visitTypeReferencePart      : target node -&gt; Override
</span><span class='line'>| | | | | visitNode                 : target node -&gt; Override
</span><span class='line'>| | | | | | visitIdentifier         : target node -&gt; Override
</span><span class='line'>| | | | | | | visitNode             : target node -&gt; Override
</span><span class='line'>| | | | | | afterVisitIdentifier    : target node -&gt; Override
</span><span class='line'>| | | | | endVisit                  : target node -&gt; Override
</span><span class='line'>| | | | afterVisitTypeReferencePart : target node -&gt; Override
</span><span class='line'>| | | endVisit                      : target node -&gt; Override
</span><span class='line'>| | afterVisitTypeReference         : target node -&gt; Override
</span><span class='line'>| endVisit                          : target node -&gt; Override
</span><span class='line'>afterVisitAnnotation                : target node -&gt; @Override</span></code></pre></td></tr></table></div></figure>


<h1>General Rules</h1>

<p>Now, let see what&rsquo;s happens if I want to lint check for a Java file.</p>

<p>Assuming I am going to check following class</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
</pre></td><td class='code'><pre><code class='Java'><span class='line'><span class="kn">package</span> <span class="n">pkg</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="kn">import</span> <span class="nn">android.Manifest</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">android.support.v7.app.AppCompatActivity</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">permissions.dispatcher.NeedsPermission</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">permissions.dispatcher.RuntimePermissions</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="nd">@RuntimePermissions</span>
</span><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MainActivity</span> <span class="kd">extends</span> <span class="n">AppCompatActivity</span> <span class="o">{</span>
</span><span class='line'>    <span class="nd">@Override</span>
</span><span class='line'>    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">onCreate</span><span class="o">(</span><span class="n">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="kd">super</span><span class="o">.</span><span class="na">onCreate</span><span class="o">(</span><span class="n">savedInstanceState</span><span class="o">);</span>
</span><span class='line'>        <span class="n">setContentView</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">layout</span><span class="o">.</span><span class="na">activity_main</span><span class="o">);</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="nd">@NeedsPermission</span><span class="o">(</span><span class="n">Manifest</span><span class="o">.</span><span class="na">permission</span><span class="o">.</span><span class="na">CAMERA</span><span class="o">)</span>
</span><span class='line'>    <span class="kt">void</span> <span class="nf">showCamera</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="nd">@Override</span>
</span><span class='line'>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onRequestPermissionsResult</span><span class="o">(</span><span class="kt">int</span> <span class="n">requestCode</span><span class="o">,</span> <span class="n">String</span><span class="o">[]</span> <span class="n">permissions</span><span class="o">,</span> <span class="kt">int</span><span class="o">[]</span> <span class="n">grantResults</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="kd">super</span><span class="o">.</span><span class="na">onRequestPermissionsResult</span><span class="o">(</span><span class="n">requestCode</span><span class="o">,</span> <span class="n">permissions</span><span class="o">,</span> <span class="n">grantResults</span><span class="o">);</span>
</span><span class='line'>        <span class="n">MainActivityPermissionsDispatcher</span><span class="o">.</span><span class="na">onRequestPermissionsResult</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="n">requestCode</span><span class="o">,</span> <span class="n">grantResults</span><span class="o">);</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Here is the <a href="https://gist.github.com/shiraji/dc4665d704d8852243c3">debuging code</a>. It&rsquo;s basically Sys-out method name and <code>node</code> parameter. And the output is <a href="https://gist.github.com/shiraji/37993e824c36e31724d5">this</a></p>

<p>OK, Too long&hellip;let me summarize idea.</p>

<ul>
<li>The first visit-method is <code>visitCompilationUnit</code></li>
<li>Next it checks <code>visitPackageDeclaration</code> for <code>package pkg;</code> (Meaning, it starts from the first line of the class)</li>
<li>And goes one by one until it reaches the bottom of the class</li>
<li>The last after-method is <code>afterVisitCompilationUnit</code></li>
</ul>


<h1>Exceptional Rules</h1>

<p>Now, we know the lint checks goes the top to the bottom. However, there is an exception, Annotation.</p>

<p><code>@RuntimePermissions</code> which is located the above of the class declaration in the example above.</p>

<p>Actually, when we run the lint checks, <code>visitClassDeclaration</code> comes <a href="https://gist.github.com/shiraji/37993e824c36e31724d5#file-output-txt-L127">first</a> and then <code>visitAnnotation</code> comes <a href="https://gist.github.com/shiraji/37993e824c36e31724d5#file-output-txt-L167">later</a>.</p>

<p>It seems that the lint handles annotation as a node inside of method declaration.</p>

<p>For example, if we want to store class declaration object which <code>@RuntimePermissions</code>, we cannot do followings:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
</pre></td><td class='code'><pre><code class='Java'><span class='line'><span class="n">List</span><span class="o">&lt;</span><span class="n">ClassDeclaration</span><span class="o">&gt;</span> <span class="n">classDeclarations</span><span class="o">;</span>
</span><span class='line'><span class="kt">boolean</span> <span class="n">hasRuntimePermisions</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="nd">@Override</span>
</span><span class='line'><span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">visitAnnotation</span><span class="o">(</span><span class="n">Annotation</span> <span class="n">node</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">String</span> <span class="n">type</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="na">astAnnotationTypeReference</span><span class="o">().</span><span class="na">getTypeName</span><span class="o">();</span>
</span><span class='line'>    <span class="k">if</span> <span class="o">(</span><span class="s">&quot;permissions.dispatcher.RuntimePermissions&quot;</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">type</span><span class="o">))</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">hasRuntimePermisions</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>    <span class="k">return</span> <span class="kd">super</span><span class="o">.</span><span class="na">visitAnnotation</span><span class="o">(</span><span class="n">node</span><span class="o">);</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="nd">@Override</span>
</span><span class='line'><span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">visitClassDeclaration</span><span class="o">(</span><span class="n">ClassDeclaration</span> <span class="n">node</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>    <span class="k">if</span><span class="o">(</span><span class="n">hasRuntimePermisions</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">classDeclarations</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">node</span><span class="o">);</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>    <span class="k">return</span> <span class="kd">super</span><span class="o">.</span><span class="na">visitClassDeclaration</span><span class="o">(</span><span class="n">node</span><span class="o">);</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Instead, I would use <code>afterVisitClassDeclaration</code> and call <code>requestRepeat</code> to run other detector which uses class declaration objects.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
</pre></td><td class='code'><pre><code class='Java'><span class='line'><span class="n">JavaContext</span> <span class="n">context</span><span class="o">;</span>
</span><span class='line'><span class="n">List</span><span class="o">&lt;</span><span class="n">ClassDeclaration</span><span class="o">&gt;</span> <span class="n">classDeclarations</span><span class="o">;</span>
</span><span class='line'><span class="kt">boolean</span> <span class="n">hasRuntimePermisions</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="nd">@Override</span>
</span><span class='line'><span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">visitAnnotation</span><span class="o">(</span><span class="n">Annotation</span> <span class="n">node</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">String</span> <span class="n">type</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="na">astAnnotationTypeReference</span><span class="o">().</span><span class="na">getTypeName</span><span class="o">();</span>
</span><span class='line'>    <span class="k">if</span> <span class="o">(</span><span class="s">&quot;permissions.dispatcher.RuntimePermissions&quot;</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">type</span><span class="o">))</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">hasRuntimePermisions</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>    <span class="k">return</span> <span class="kd">super</span><span class="o">.</span><span class="na">visitAnnotation</span><span class="o">(</span><span class="n">node</span><span class="o">);</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="nd">@Override</span>
</span><span class='line'><span class="kd">public</span> <span class="kt">void</span> <span class="nf">afterVisitClassDeclaration</span><span class="o">(</span><span class="n">ClassDeclaration</span> <span class="n">node</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>    <span class="k">if</span><span class="o">(</span><span class="n">hasRuntimePermisions</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">classDeclarations</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">node</span><span class="o">);</span>
</span><span class='line'>        <span class="n">context</span><span class="o">.</span><span class="na">requestRepeat</span><span class="o">(</span><span class="k">new</span> <span class="nf">MyOtherDetector</span><span class="o">(),</span> <span class="n">EnumSet</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">Scope</span><span class="o">.</span><span class="na">ALL_JAVA_FILES</span><span class="o">));</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>    <span class="k">return</span> <span class="kd">super</span><span class="o">.</span><span class="na">visitClassDeclaration</span><span class="o">(</span><span class="n">node</span><span class="o">);</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Custom Lint for Library]]></title>
    <link href="http://shiraji.github.io/blog/2016/02/17/custom-lint-for-library/"/>
    <updated>2016-02-17T03:00:00+09:00</updated>
    <id>http://shiraji.github.io/blog/2016/02/17/custom-lint-for-library</id>
    <content type="html"><![CDATA[<h1>Summary</h1>

<ul>
<li>PermissionsDispatcher now have a custom lint</li>
<li>Adding custom lint is not that hard</li>
<li>LintDetectorTest&hellip;? Forget it</li>
</ul>


<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<!-- 728x90 -->


<p><ins class="adsbygoogle"
     style="display:inline-block;width:728px;height:90px"
     data-ad-client="ca-pub-3940616565912592"
     data-ad-slot="7693358062"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>




<!-- more -->


<h1>PermissionsDispatcher now have a custom lint</h1>

<p>First of all, I am one of collaborators of <a href="https://github.com/hotchemi/PermissionsDispatcher">PermissionsDispatcher</a> which makes developers handle runtime permissions very easily.</p>

<p>PermissionsDispatcher now have a custom lint for its library. Initial issue came from <a href="https://github.com/hotchemi/PermissionsDispatcher/issues/56#issuecomment-163499243">this comment</a>.</p>

<p>The library requires the developer to define a method with <code>@NeedsPermission</code>. Like this</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="nd">@NeedsPermission</span><span class="o">(</span><span class="n">Manifest</span><span class="o">.</span><span class="na">permission</span><span class="o">.</span><span class="na">CAMERA</span><span class="o">)</span>
</span><span class='line'><span class="kt">void</span> <span class="nf">showCamera</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>However, this method should not directly access. Instead, the developers must use a method that PermissionsDispatcher generated.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='Java'><span class='line'><span class="kt">void</span> <span class="nf">foo</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">MainActivityPermissionsDispatcher</span><span class="o">.</span><span class="na">showCameraWithCheck</span><span class="o">(</span><span class="k">this</span><span class="o">);</span> <span class="c1">// Yes</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="kt">void</span> <span class="nf">foo2</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">showCamera</span><span class="o">();</span> <span class="c1">// No!</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>In order to make sure the developers did not call this method, we decide to provide custom lint for this library.</p>

<h1>How to add custom lint for library</h1>

<p>To create custom lint for Android application, check links below</p>

<ul>
<li><a href="http://tools.android.com/tips/lint-custom-rules">Writing Custom Lint Rules</a></li>
<li><a href="http://tools.android.com/tips/lint/writing-a-lint-check">Writing a Lint Check</a></li>
<li><a href="http://qiita.com/hotchemi/items/9364d54a0e024a5e6275">@hotchime&rsquo;s blog post at qiita</a> (For Japanese developer)</li>
</ul>


<p>Custom lint for library needs extra settings to inject <code>lint.jar</code> to its .aar file</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
</pre></td><td class='code'><pre><code class='groovy'><span class='line'><span class="n">configurations</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">lintChecks</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="n">dependencies</span> <span class="o">{</span>
</span><span class='line'>    <span class="o">...</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// we have lint module with lintCheck configuration.</span>
</span><span class='line'>    <span class="c1">// check this file: https://github.com/shiraji/PermissionsDispatcher/blob/master/lint/build.gradle</span>
</span><span class='line'>    <span class="n">lintChecks</span> <span class="nf">project</span><span class="o">(</span><span class="nl">path:</span> <span class="s1">&#39;:lint&#39;</span><span class="o">,</span> <span class="nl">configuration:</span> <span class="s1">&#39;lintChecks&#39;</span><span class="o">)</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="n">assemble</span><span class="o">.</span><span class="na">doLast</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">copyJarToOtherModules</span><span class="o">.</span><span class="na">execute</span><span class="o">()</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="n">task</span> <span class="nf">copyLintJar</span><span class="o">(</span><span class="nl">type:</span> <span class="n">Copy</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">from</span><span class="o">(</span><span class="n">configurations</span><span class="o">.</span><span class="na">lintChecks</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">rename</span> <span class="o">{</span> <span class="s1">&#39;lint.jar&#39;</span> <span class="o">}</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>    <span class="n">into</span> <span class="s1">&#39;build/intermediates/lint/&#39;</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="n">project</span><span class="o">.</span><span class="na">afterEvaluate</span> <span class="o">{</span>
</span><span class='line'>    <span class="kt">def</span> <span class="n">compileLintTask</span> <span class="o">=</span> <span class="n">project</span><span class="o">.</span><span class="na">tasks</span><span class="o">.</span><span class="na">find</span> <span class="o">{</span> <span class="n">it</span><span class="o">.</span><span class="na">name</span> <span class="o">==</span> <span class="s1">&#39;compileLint&#39;</span> <span class="o">}</span>
</span><span class='line'>    <span class="n">compileLintTask</span><span class="o">.</span><span class="na">dependsOn</span><span class="o">(</span><span class="n">copyLintJar</span><span class="o">)</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Basically, if there is <code>compileLint</code> task, then make the task depends on <code>copyLintJar</code> task which copies <code>lint.jar</code> to <code>build/intermediates/lint/</code></p>

<p>The user of this library doesn&rsquo;t need to put lint.jar to <code>.android/lint/</code>. Just sync library and then run <code>./gradlew lint</code></p>

<h1>Use LintDetectorTest</h1>

<p>Just don&rsquo;t.</p>

<p>Check this code</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='Java'><span class='line'><span class="n">File</span> <span class="n">f</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">File</span><span class="o">(</span><span class="n">root</span><span class="o">,</span>
</span><span class='line'>            <span class="s">&quot;tools/base/lint/libs/lint-tests/src/test/java/&quot;</span><span class="o">.</span><span class="na">replace</span><span class="o">(</span><span class="sc">&#39;/&#39;</span><span class="o">,</span> <span class="n">File</span><span class="o">.</span><span class="na">separatorChar</span><span class="o">)</span>
</span><span class='line'>            <span class="o">+</span> <span class="n">pkg</span><span class="o">.</span><span class="na">replace</span><span class="o">(</span><span class="sc">&#39;.&#39;</span><span class="o">,</span> <span class="n">File</span><span class="o">.</span><span class="na">separatorChar</span><span class="o">)</span>
</span><span class='line'>            <span class="o">+</span> <span class="n">File</span><span class="o">.</span><span class="na">separatorChar</span> <span class="o">+</span> <span class="n">path</span><span class="o">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>This is the code that reads from <code>$ROOT/tools/base/lint/libs/lint-tests/src/test/java/PACAKGE-NAME-REPLACE-DOT-WITH-SLASH</code>.
I believe most developers doesn&rsquo;t want to put project in the specific directory in order to pass the test cases.</p>

<p>Actually, current version of <code>LintDetectorTest</code> has a lots of problems with loading resources, java source and &ldquo;class&rdquo; file. (Yes! you need to supply .class file to run the test)</p>

<p>In order to use the <code>LintDetectorTest</code>, the developer must override <code>protected InputStream getTestResource(String relativePath, boolean expectExists)</code> like <a href="https://android.googlesource.com/platform/tools/base/+/master/lint/libs/lint-tests/src/test/java/com/android/tools/lint/checks/AbstractCheckTest.java?autodive=0%2F%2F%2F%2F%2F%2F%2F#49">what AOSP did</a></p>

<p><code>LintDetectorTest</code> is still Beta. I assumed there are a lot of work to make it production release.</p>

<p>If it comes to production, I hope it does not require me to pass .java/.class file like this way.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='Java'><span class='line'><span class="n">lintFiles</span><span class="o">(</span><span class="s">&quot;MainActivity.class=&gt;pkg/MainActivity.class&quot;</span><span class="o">));</span>
</span></code></pre></td></tr></table></div></figure>


<h1>Now how to test???</h1>

<p>I don&rsquo;t know.</p>

<p>The only way I came up is <a href="https://github.com/hotchemi/PermissionsDispatcher/pull/75#issuecomment-178650850">manual testing</a>.</p>

<p>So, someone who know better way to test lint, please let me know!</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[ã‚¢ã‚¯ã‚»ã‚¹ä¿®é£¾å­æ¬¡ç¬¬ã§ã€ãƒ¡ã‚½ãƒƒãƒ‰æ•°ãŒå¢—ãˆã¦ã—ã¾ã†å•é¡Œã«ã¤ã„ã¦]]></title>
    <link href="http://shiraji.github.io/blog/2016/01/11/accessor/"/>
    <updated>2016-01-11T10:50:49+09:00</updated>
    <id>http://shiraji.github.io/blog/2016/01/11/accessor</id>
    <content type="html"><![CDATA[<h1>ã¾ã¨ã‚</h1>

<p>privateã‚¢ã‚¯ã‚»ã‚¹ä¿®é£¾å­ã‚’ã¤ã‘ã‚‹ã¨æ¡ä»¶æ¬¡ç¬¬ã§å‹æ‰‹ã«ãƒ¡ã‚½ãƒƒãƒ‰ä½™åˆ†ã«ç”Ÿæˆã•ã‚Œã‚‹ã‹ã‚‰æ°—ã‚’ã¤ã‘ã¦ã­ï¼</p>

<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<!-- 728x90 -->


<p><ins class="adsbygoogle"
     style="display:inline-block;width:728px;height:90px"
     data-ad-client="ca-pub-3940616565912592"
     data-ad-slot="7693358062"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>




<!-- more -->


<h1>æœ€åˆã«</h1>

<p>Jakeã•ã‚“ãŒã“ã®<a href="https://github.com/google/gson/pull/761">pull request</a>ã‚’æŠ•ã’ã¦ã„ã¦ã€å¯Ÿã™ã‚‹ã«$accessorã¨ã„ã†ãƒ¡ã‚½ãƒƒãƒ‰ãŒç”Ÿæˆã•ã‚Œã¦ã—ã¾ã†ã®ã§ã€ãã‚Œã‚’ç”Ÿæˆã—ãªã„ã‚ˆã†ã«ã—ãŸãœï¼Ÿã£ã¦ã“ã¨ã ã¨æ€ã†ã€‚ãŒã€ãªã‚“ã§ãã†ãªã‚‹ã®ã‹ã‚ã‹ã‚‰ãªã„ã€‚
ä»–ã«ã‚‚ã€ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã®ä¿®é£¾å­ã‚’å¤‰æ›´ã—ã¦ã„ã‚‹ã‚“ã ã‘ã©ã€ã“ã‚Œã‚‚ãªã‚“ã®ãŸã‚ãªã®ã‹ã‚ã‹ã‚‰ãªã„ã€‚
ãã“ã§ã€ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ã¦ã¿ã¦ã€å®Ÿéš›ã«ã‚„ã£ã¦ã¿ã¾ã—ãŸã€‚</p>

<p>ã“ã®pull requestã§ã¯ä»¥ä¸‹ã®ï¼”ã¤ã‚’ä¿®æ­£ã—ã¦ã„ã¾ã™ã€‚</p>

<ul>
<li><a href="https://github.com/google/gson/pull/761/files#diff-694e40202daa75f0056c800b5d953297R88">ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã®privateã®å‰Šé™¤</a></li>
<li><a href="https://github.com/google/gson/pull/761/files#diff-a654cd1a9dadb8afb191e239a12e19a5R765">ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã®å®šç¾©</a></li>
<li><a href="https://github.com/google/gson/pull/761/files#diff-0776314ca8e083ca3943426740d1dd69R245">ãƒ¡ãƒ³ãƒãƒ¼å¤‰æ•°ã®privateã®å‰Šé™¤</a></li>
<li><a href="https://github.com/google/gson/pull/761/files#diff-0776314ca8e083ca3943426740d1dd69R465">ãƒ¡ã‚½ãƒƒãƒ‰ã®privateã®å‰Šé™¤</a></li>
</ul>


<h1><a href="https://github.com/google/gson/pull/761/files#diff-694e40202daa75f0056c800b5d953297R88">ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã®privateã®å‰Šé™¤</a></h1>

<p>ã“ã®å¤‰æ›´ãŒã‚ã‹ã‚Šã‚„ã™ã„ã‚ˆã†ã«ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã‚’ä½œæˆã—ã¦ã¿ã¾ã—ãŸã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">class</span> <span class="nc">PrivateConstructor</span> <span class="o">{</span>
</span><span class='line'>  <span class="kd">private</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">AbstractInnerClass</span> <span class="o">{</span>
</span><span class='line'>    <span class="kd">private</span> <span class="nf">AbstractInnerClass</span><span class="o">()</span> <span class="o">{}</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'>  <span class="kd">class</span> <span class="nc">InnerClass</span> <span class="kd">extends</span> <span class="n">AbstractInnerClass</span> <span class="o">{</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">class</span> <span class="nc">DefaultConstructor</span> <span class="o">{</span>
</span><span class='line'>  <span class="kd">private</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">AbstractInnerClass</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">AbstractInnerClass</span><span class="o">()</span> <span class="o">{}</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'>  <span class="kd">class</span> <span class="nc">InnerClass</span> <span class="kd">extends</span> <span class="n">AbstractInnerClass</span> <span class="o">{</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>é•ã„ã¯ã€PrivateConstructorå†…ã«ã‚ã‚‹ã€AbstractInnerClassã®ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã«privateãŒã‚ã‚‹ã‹ã©ã†ã‹ã§ã™ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="o">%</span> <span class="n">javap</span> <span class="o">-</span><span class="n">p</span> <span class="n">PrivateConstructor</span><span class="o">*.</span><span class="na">class</span>
</span><span class='line'><span class="n">Compiled</span> <span class="n">from</span> <span class="s">&quot;PrivateConstructor.java&quot;</span>
</span><span class='line'><span class="kd">class</span> <span class="nc">PrivateConstructor$1</span> <span class="o">{</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'><span class="n">Compiled</span> <span class="n">from</span> <span class="s">&quot;PrivateConstructor.java&quot;</span>
</span><span class='line'><span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">PrivateConstructor$AbstractInnerClass</span> <span class="o">{</span>
</span><span class='line'>  <span class="kd">final</span> <span class="n">PrivateConstructor</span> <span class="k">this</span><span class="n">$0</span><span class="o">;</span>
</span><span class='line'>  <span class="kd">private</span> <span class="nf">PrivateConstructor$AbstractInnerClass</span><span class="o">(</span><span class="n">PrivateConstructor</span><span class="o">);</span>
</span><span class='line'>  <span class="n">PrivateConstructor$AbstractInnerClass</span><span class="o">(</span><span class="n">PrivateConstructor</span><span class="o">,</span> <span class="n">PrivateConstructor$1</span><span class="o">);</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'><span class="n">Compiled</span> <span class="n">from</span> <span class="s">&quot;PrivateConstructor.java&quot;</span>
</span><span class='line'><span class="kd">class</span> <span class="nc">PrivateConstructor$InnerClass</span> <span class="kd">extends</span> <span class="n">PrivateConstructor$AbstractInnerClass</span> <span class="o">{</span>
</span><span class='line'>  <span class="kd">final</span> <span class="n">PrivateConstructor</span> <span class="k">this</span><span class="n">$0</span><span class="o">;</span>
</span><span class='line'>  <span class="n">PrivateConstructor$InnerClass</span><span class="o">(</span><span class="n">PrivateConstructor</span><span class="o">);</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'><span class="n">Compiled</span> <span class="n">from</span> <span class="s">&quot;PrivateConstructor.java&quot;</span>
</span><span class='line'><span class="kd">class</span> <span class="nc">PrivateConstructor</span> <span class="o">{</span>
</span><span class='line'>  <span class="n">PrivateConstructor</span><span class="o">();</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="o">%</span> <span class="n">javap</span> <span class="o">-</span><span class="n">p</span> <span class="n">DefaultConstructor</span><span class="o">*.</span><span class="na">class</span>
</span><span class='line'><span class="n">Compiled</span> <span class="n">from</span> <span class="s">&quot;DefaultConstuctor.java&quot;</span>
</span><span class='line'><span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">DefaultConstructor$AbstractInnerClass</span> <span class="o">{</span>
</span><span class='line'>  <span class="kd">final</span> <span class="n">DefaultConstructor</span> <span class="k">this</span><span class="n">$0</span><span class="o">;</span>
</span><span class='line'>  <span class="n">DefaultConstructor$AbstractInnerClass</span><span class="o">(</span><span class="n">DefaultConstructor</span><span class="o">);</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'><span class="n">Compiled</span> <span class="n">from</span> <span class="s">&quot;DefaultConstuctor.java&quot;</span>
</span><span class='line'><span class="kd">class</span> <span class="nc">DefaultConstructor$InnerClass</span> <span class="kd">extends</span> <span class="n">DefaultConstructor$AbstractInnerClass</span> <span class="o">{</span>
</span><span class='line'>  <span class="kd">final</span> <span class="n">DefaultConstructor</span> <span class="k">this</span><span class="n">$0</span><span class="o">;</span>
</span><span class='line'>  <span class="n">DefaultConstructor$InnerClass</span><span class="o">(</span><span class="n">DefaultConstructor</span><span class="o">);</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'><span class="n">Compiled</span> <span class="n">from</span> <span class="s">&quot;DefaultConstuctor.java&quot;</span>
</span><span class='line'><span class="kd">class</span> <span class="nc">DefaultConstructor</span> <span class="o">{</span>
</span><span class='line'>  <span class="n">DefaultConstructor</span><span class="o">();</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Javaãƒ•ã‚¡ã‚¤ãƒ«å†…ã§ã¯é•ã„ã¯privateã ã‘ã§ã—ãŸãŒã€classãƒ•ã‚¡ã‚¤ãƒ«å†…ã§ã¯ã€ä»¥ä¸‹ã®ãƒ¡ã‚½ãƒƒãƒ‰ãŒå‡ºæ¥ã¦ã„ã¾ã™ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="n">PrivateConstructor$AbstractInnerClass</span><span class="o">(</span><span class="n">PrivateConstructor</span><span class="o">,</span> <span class="n">PrivateConstructor$1</span><span class="o">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>ã“ã‚ŒãŒç”Ÿæˆã•ã‚Œã‚‹ã“ã¨ã§ã€ãƒ¡ã‚½ãƒƒãƒ‰æ•°ãŒDefaultConstuctor.javaã§ã¯3ã¤ãªã®ã«ã€PrivateConstructor.javaã§ã¯4ã¤ã«ãªã£ã¦ã—ã¾ã„ã¾ã™ã€‚
ãªãœã“ã†ãªã‚‹ã®ã‹ã¨ã„ã†ã¨ã€PrivateConstructor$InnerClassãŒç¶™æ‰¿ã™ã‚‹ãŸã‚ã«å¿…è¦ãªã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã‚’å®šç¾©ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ãŸã‚ã§ã™ã€‚</p>

<p>å®Ÿéš›ã“ã‚“ãªã‚¯ãƒ©ã‚¹ã‚’å®šç¾©ã—ã¦ã¿ã‚‹ã¨ã‚ã‹ã‚Šã¾ã™ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">class</span> <span class="nc">PrivateConstructor</span> <span class="o">{</span>
</span><span class='line'>  <span class="kd">private</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">AbstractInnerClass</span> <span class="o">{</span>
</span><span class='line'>    <span class="kd">private</span> <span class="nf">AbstractInnerClass</span><span class="o">()</span> <span class="o">{}</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'>  <span class="c1">// class InnerClass extends AbstractInnerClass {</span>
</span><span class='line'>  <span class="c1">// }</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="o">%</span> <span class="n">javap</span> <span class="o">-</span><span class="n">p</span> <span class="n">PrivateConstructor</span><span class="o">*.</span><span class="na">class</span>
</span><span class='line'><span class="n">Compiled</span> <span class="n">from</span> <span class="s">&quot;PrivateConstructor.java&quot;</span>
</span><span class='line'><span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">PrivateConstructor$AbstractInnerClass</span> <span class="o">{</span>
</span><span class='line'>  <span class="kd">final</span> <span class="n">PrivateConstructor</span> <span class="k">this</span><span class="n">$0</span><span class="o">;</span>
</span><span class='line'>  <span class="kd">private</span> <span class="nf">PrivateConstructor$AbstractInnerClass</span><span class="o">(</span><span class="n">PrivateConstructor</span><span class="o">);</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'><span class="n">Compiled</span> <span class="n">from</span> <span class="s">&quot;PrivateConstructor.java&quot;</span>
</span><span class='line'><span class="kd">class</span> <span class="nc">PrivateConstructor</span> <span class="o">{</span>
</span><span class='line'>  <span class="n">PrivateConstructor</span><span class="o">();</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>PrivateConstructor$AbstractInnerClassã ã‘ã—ã‹å®šç¾©ã•ã‚Œã¦ãŠã‚‰ãšã€privateã®ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹å¿…è¦ãŒãªã„ãŸã‚ã€<code>PrivateConstructor$AbstractInnerClass(PrivateConstructor, PrivateConstructor$1);</code>ã¯ç”Ÿæˆã•ã‚Œã¾ã›ã‚“ã€‚</p>

<h1><a href="https://github.com/google/gson/pull/761/files#diff-a654cd1a9dadb8afb191e239a12e19a5R765">ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã®å®šç¾©</a></h1>

<p>ä»Šå›ã®ä¿®æ­£ã§ä¸€ç•ªãŠã‚‚ã—ã‚ã„ã®ãŒã“ã‚Œã§ã™ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">class</span> <span class="nc">NoDefaultConstructor</span> <span class="o">{</span>
</span><span class='line'>  <span class="kd">private</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">AbstractClass</span> <span class="o">{</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'>  <span class="kd">class</span> <span class="nc">InnerClass</span> <span class="kd">extends</span> <span class="n">AbstractClass</span> <span class="o">{</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>ã“ã‚Œã‚’ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã™ã‚‹ã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="n">Compiled</span> <span class="n">from</span> <span class="s">&quot;NoDefaultConstructor.java&quot;</span>
</span><span class='line'><span class="kd">class</span> <span class="nc">NoDefaultConstructor$1</span> <span class="o">{</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'><span class="n">Compiled</span> <span class="n">from</span> <span class="s">&quot;NoDefaultConstructor.java&quot;</span>
</span><span class='line'><span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">NoDefaultConstructor$AbstractClass</span> <span class="o">{</span>
</span><span class='line'>  <span class="kd">final</span> <span class="n">NoDefaultConstructor</span> <span class="k">this</span><span class="n">$0</span><span class="o">;</span>
</span><span class='line'>  <span class="kd">private</span> <span class="nf">NoDefaultConstructor$AbstractClass</span><span class="o">(</span><span class="n">NoDefaultConstructor</span><span class="o">);</span>
</span><span class='line'>  <span class="n">NoDefaultConstructor$AbstractClass</span><span class="o">(</span><span class="n">NoDefaultConstructor</span><span class="o">,</span> <span class="n">NoDefaultConstructor$1</span><span class="o">);</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'><span class="n">Compiled</span> <span class="n">from</span> <span class="s">&quot;NoDefaultConstructor.java&quot;</span>
</span><span class='line'><span class="kd">class</span> <span class="nc">NoDefaultConstructor$InnerClass</span> <span class="kd">extends</span> <span class="n">NoDefaultConstructor$AbstractClass</span> <span class="o">{</span>
</span><span class='line'>  <span class="kd">final</span> <span class="n">NoDefaultConstructor</span> <span class="k">this</span><span class="n">$0</span><span class="o">;</span>
</span><span class='line'>  <span class="n">NoDefaultConstructor$InnerClass</span><span class="o">(</span><span class="n">NoDefaultConstructor</span><span class="o">);</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'><span class="n">Compiled</span> <span class="n">from</span> <span class="s">&quot;NoDefaultConstructor.java&quot;</span>
</span><span class='line'><span class="kd">class</span> <span class="nc">NoDefaultConstructor</span> <span class="o">{</span>
</span><span class='line'>  <span class="n">NoDefaultConstructor</span><span class="o">();</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãŒç”Ÿæˆã•ã‚Œã¦ã„ã¾ã™ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">private</span> <span class="nf">NoDefaultConstructor$AbstractClass</span><span class="o">(</span><span class="n">NoDefaultConstructor</span><span class="o">);</span>
</span><span class='line'><span class="n">NoDefaultConstructor$AbstractClass</span><span class="o">(</span><span class="n">NoDefaultConstructor</span><span class="o">,</span> <span class="n">NoDefaultConstructor$1</span><span class="o">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>Javaã§ã¯ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã‚’å®šç¾©ã—ã¦ã„ãªã„å ´åˆã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãŒç”Ÿæˆã•ã‚Œã¾ã™ã€‚
ã—ã‹ã—ã€ãã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã¯classã®ã‚¢ã‚¯ã‚»ã‚¹ä¿®é£¾å­ã¨åŒã˜ã‚‚ã®ãŒå®šç¾©ã•ã‚Œã¾ã™ã€‚</p>

<p><code>AbstractClass</code>ã¯privateã§å®šç¾©ã•ã‚Œã¦ã„ã‚‹ãŸã‚ã€privateã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãŒå®šç¾©ã•ã‚Œã¾ã™ã€‚ãã‚ŒãŒã“ã‚Œ</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">private</span> <span class="nf">NoDefaultConstructor$AbstractClass</span><span class="o">(</span><span class="n">NoDefaultConstructor</span><span class="o">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>ãã‚Œã§ã€ã“ã®ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ãŸã‚ã®ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã‚’å®šç¾©ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã®ã§ã€</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="n">NoDefaultConstructor$AbstractClass</span><span class="o">(</span><span class="n">NoDefaultConstructor</span><span class="o">,</span> <span class="n">NoDefaultConstructor$1</span><span class="o">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>ã“ã‚ŒãŒç”Ÿæˆã•ã‚Œã¾ã™ã€‚</p>

<p>ãƒ¡ã‚½ãƒƒãƒ‰ã‚’0ã§å®šç¾©ã—ã¦ã„ã¾ã™ãŒã€å®Ÿã¯4ã¤ã®ãƒ¡ã‚½ãƒƒãƒ‰ãŒå‡ºæ¥ã¦ã„ã¾ã—ãŸã€‚
å°‘ãªãã¨ã‚‚privateã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã¯ã„ã‚‰ãªã„ã®ã§ã€ç©ºã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã®å¤‰æ›´ã‚’å…¥ã‚Œã¦ã„ã‚‹ã‚ã‘ã§ã™ã€‚</p>

<h1><a href="https://github.com/google/gson/pull/761/files#diff-0776314ca8e083ca3943426740d1dd69R245">ãƒ¡ãƒ³ãƒãƒ¼å¤‰æ•°ã®privateã®å‰Šé™¤</a></h1>

<p>ã“ã®å¤‰æ›´ã‚‚é¢ç™½ã„ã§ã™ã€‚</p>

<p>ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã¯ã“ã‚“ãªæ„Ÿã˜ã§ã™ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">class</span> <span class="nc">DefaultMember</span> <span class="o">{</span>
</span><span class='line'>  <span class="kt">boolean</span> <span class="n">flag</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="kd">class</span> <span class="nc">InnerClass</span> <span class="o">{</span>
</span><span class='line'>    <span class="kt">void</span> <span class="nf">foo</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>      <span class="n">flag</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="n">Compiled</span> <span class="n">from</span> <span class="s">&quot;DefaultMember.java&quot;</span>
</span><span class='line'><span class="kd">class</span> <span class="nc">DefaultMember$InnerClass</span> <span class="o">{</span>
</span><span class='line'>  <span class="kd">final</span> <span class="n">DefaultMember</span> <span class="k">this</span><span class="n">$0</span><span class="o">;</span>
</span><span class='line'>  <span class="n">DefaultMember$InnerClass</span><span class="o">(</span><span class="n">DefaultMember</span><span class="o">);</span>
</span><span class='line'>  <span class="kt">void</span> <span class="nf">foo</span><span class="o">();</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'><span class="n">Compiled</span> <span class="n">from</span> <span class="s">&quot;DefaultMember.java&quot;</span>
</span><span class='line'><span class="kd">class</span> <span class="nc">DefaultMember</span> <span class="o">{</span>
</span><span class='line'>  <span class="kt">boolean</span> <span class="n">flag</span><span class="o">;</span>
</span><span class='line'>  <span class="n">DefaultMember</span><span class="o">();</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">class</span> <span class="nc">PrivateMember</span> <span class="o">{</span>
</span><span class='line'>  <span class="kd">private</span> <span class="kt">boolean</span> <span class="n">flag</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="kd">class</span> <span class="nc">InnerClass</span> <span class="o">{</span>
</span><span class='line'>    <span class="kt">void</span> <span class="nf">foo</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>      <span class="n">flag</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="n">Compiled</span> <span class="n">from</span> <span class="s">&quot;PrivateMember.java&quot;</span>
</span><span class='line'><span class="kd">class</span> <span class="nc">PrivateMember$InnerClass</span> <span class="o">{</span>
</span><span class='line'>  <span class="kd">final</span> <span class="n">PrivateMember</span> <span class="k">this</span><span class="n">$0</span><span class="o">;</span>
</span><span class='line'>  <span class="n">PrivateMember$InnerClass</span><span class="o">(</span><span class="n">PrivateMember</span><span class="o">);</span>
</span><span class='line'>  <span class="kt">void</span> <span class="nf">foo</span><span class="o">();</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'><span class="n">Compiled</span> <span class="n">from</span> <span class="s">&quot;PrivateMember.java&quot;</span>
</span><span class='line'><span class="kd">class</span> <span class="nc">PrivateMember</span> <span class="o">{</span>
</span><span class='line'>  <span class="kd">private</span> <span class="kt">boolean</span> <span class="n">flag</span><span class="o">;</span>
</span><span class='line'>  <span class="n">PrivateMember</span><span class="o">();</span>
</span><span class='line'>  <span class="kd">static</span> <span class="kt">boolean</span> <span class="nf">access$002</span><span class="o">(</span><span class="n">PrivateMember</span><span class="o">,</span> <span class="kt">boolean</span><span class="o">);</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>ã“ã‚“ãªã®ãŒå‡ºæ¥ã¦ã„ã¾ã™ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">static</span> <span class="kt">boolean</span> <span class="nf">access$002</span><span class="o">(</span><span class="n">PrivateMember</span><span class="o">,</span> <span class="kt">boolean</span><span class="o">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>ã“ã‚Œã¯ã€Innerã‚¯ãƒ©ã‚¹ã‹ã‚‰flagã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ãŸã‚ã®ãƒ¡ã‚½ãƒƒãƒ‰ã§ã™ã€‚
privateã‚¢ã‚¯ã‚»ã‚¹ä¿®é£¾å­ã®ãŸã‚ã€ã‚¢ã‚¯ã‚»ã‚¹å‡ºæ¥ãªã„ã®ã§ã€accessã¨ã„ã†prefixä»˜ãã®ãƒ¡ã‚½ãƒƒãƒ‰ãŒç”Ÿæˆã•ã‚Œflagã«ã‚¢ã‚¯ã‚»ã‚¹å‡ºæ¥ã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚</p>

<h1><a href="https://github.com/google/gson/pull/761/files#diff-0776314ca8e083ca3943426740d1dd69R465">ãƒ¡ã‚½ãƒƒãƒ‰ã®privateã®å‰Šé™¤</a></h1>

<p>ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ã§ã™ã‘ã©ãƒ¡ã‚½ãƒƒãƒ‰ã®ã‚¢ã‚¯ã‚»ã‚¹ä¿®é£¾å­ã‚‚åŒã˜ã§ã™ã€‚</p>

<p>ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã¯ã“ã‚Œã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">class</span> <span class="nc">PrivateMethod</span> <span class="o">{</span>
</span><span class='line'>  <span class="kd">static</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">Object</span> <span class="n">obj</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">Object</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>      <span class="kt">void</span> <span class="nf">bar</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">PrivateMethod</span> <span class="n">method</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">PrivateMethod</span><span class="o">();</span>
</span><span class='line'>        <span class="n">method</span><span class="o">.</span><span class="na">foo</span><span class="o">();</span>
</span><span class='line'>      <span class="o">}</span>
</span><span class='line'>    <span class="o">};</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="kd">private</span> <span class="kt">void</span> <span class="nf">foo</span><span class="o">()</span> <span class="o">{}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="n">Compiled</span> <span class="n">from</span> <span class="s">&quot;PrivateMethod.java&quot;</span>
</span><span class='line'><span class="kd">class</span> <span class="nc">PrivateMethod</span> <span class="o">{</span>
</span><span class='line'>  <span class="n">PrivateMethod</span><span class="o">();</span>
</span><span class='line'>  <span class="kd">private</span> <span class="kt">void</span> <span class="nf">foo</span><span class="o">();</span>
</span><span class='line'>  <span class="kd">static</span> <span class="kt">void</span> <span class="nf">access$000</span><span class="o">(</span><span class="n">PrivateMethod</span><span class="o">);</span>
</span><span class='line'>  <span class="kd">static</span> <span class="o">{};</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>ã“ã‚Œã§privateã‚’å¤–ã™ã¨ã“ã†ãªã‚Šã¾ã™ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">class</span> <span class="nc">PrivateMethod</span> <span class="o">{</span>
</span><span class='line'>  <span class="kd">static</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">Object</span> <span class="n">obj</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">Object</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>      <span class="kt">void</span> <span class="nf">bar</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">PrivateMethod</span> <span class="n">method</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">PrivateMethod</span><span class="o">();</span>
</span><span class='line'>        <span class="n">method</span><span class="o">.</span><span class="na">foo</span><span class="o">();</span>
</span><span class='line'>      <span class="o">}</span>
</span><span class='line'>    <span class="o">};</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="kt">void</span> <span class="nf">foo</span><span class="o">()</span> <span class="o">{}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="n">Compiled</span> <span class="n">from</span> <span class="s">&quot;PrivateMethod.java&quot;</span>
</span><span class='line'><span class="kd">class</span> <span class="nc">PrivateMethod</span> <span class="o">{</span>
</span><span class='line'>  <span class="n">PrivateMethod</span><span class="o">();</span>
</span><span class='line'>  <span class="kt">void</span> <span class="nf">foo</span><span class="o">();</span>
</span><span class='line'>  <span class="kd">static</span> <span class="o">{};</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p><code>static void access$000(PrivateMethod);</code>ãŒæ¸›ã‚Šã¾ã—ãŸã€‚
ã“ã‚Œã‚‚ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ãŸã‚ã«ç”Ÿæˆã•ã‚ŒãŸãƒ¡ã‚½ãƒƒãƒ‰ã§ã™ã€‚</p>

<h1>çµ‚ã‚ã‚Šã«</h1>

<p>Javaã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã¯ãã“ã¾ã§å½±éŸ¿åº¦ã¯ãªã„ã§ã™ãŒã€Androidã¯ãƒ¡ã‚½ãƒƒãƒ‰65Kå•é¡ŒãŒã‚ã‚‹ã®ã§ã€ãƒ¡ã‚½ãƒƒãƒ‰æ•°ã«ã¯æ³¨æ„ãŒå¿…è¦ã§ã™ã€‚ç‰¹ã«åˆ©ç”¨ã—ã¦ã„ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã¯ãƒ¡ã‚½ãƒƒãƒ‰æ•°ã‚’æ¸›ã‚‰ãã†ã¨ã„ã†ç‹™ã„ãŒã‚ã£ãŸã®ã ã¨æ€ã„ã¾ã™ã€‚</p>

<p>Jakeã•ã‚“ã¯ä»–ã«ã‚‚ã“ã®è‡ªå‹•ç”Ÿæˆã•ã‚Œã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ã®æ¤œå‡ºæ–¹æ³•ã‚’<a href="https://github.com/google/gson/pull/761#issuecomment-167436875">ã‚³ãƒ¡ãƒ³ãƒˆ</a>ã—ã¦ã„ã¾ã™ã€‚</p>

<p>Androiderã¯ç›²ç›®çš„ã«privateã®ã‚¢ã‚¯ã‚»ã‚¹ä¿®é£¾å­ã«ã™ã‚Œã°ã„ã„ã¨ã„ã†è€ƒãˆã¯è¾ã‚ãŸã»ã†ãŒã„ã„ã‚ˆã†ã§ã™ã€‚</p>

<p>ã¡ãªã¿ã«Jakeã•ã‚“ã¯ä¸€ã¤<a href="https://gist.github.com/JakeWharton/5b3dbbc54c779a6bc6af">ã©ã†ã—ã‚ˆã†ã‚‚ãªã„ä¾‹</a>ã‚‚å‡ºã—ã¦ãã‚Œã¦ã¾ã™ã€‚</p>

<p>ã“ã‚Œã¯ãƒ¡ã‚½ãƒƒãƒ‰ã‚’æ¸›ã‚‰ã™ã“ã¨ãŒã©ã†ã‚„ã£ã¦ã‚‚å‡ºæ¥ãªã„ãã†ã§ã™ã€‚</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[ãƒ—ãƒ«ãƒªã‚¯é§†å‹•å‹‰å¼·]]></title>
    <link href="http://shiraji.github.io/blog/2016/01/10/pull_req_study/"/>
    <updated>2016-01-10T10:44:39+09:00</updated>
    <id>http://shiraji.github.io/blog/2016/01/10/pull_req_study</id>
    <content type="html"><![CDATA[<h1>ã¾ã¨ã‚</h1>

<p>å‹‰å¼·å‡ºæ¥ãã†ãªãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’é¸ã‚‰ã‚“ã§ã€pull requestã‚’æŠ•ã’ã¦ã€ãƒ¬ãƒ“ãƒ¥ãƒ¼ã—ã¦ã‚‚ã‚‰ã†ã¨å‹‰å¼·ã«ãªã‚‹ã‚ˆã€‚</p>

<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<!-- 728x90 -->


<p><ins class="adsbygoogle"
     style="display:inline-block;width:728px;height:90px"
     data-ad-client="ca-pub-3940616565912592"
     data-ad-slot="7693358062"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>




<!-- more -->


<h1>å¯¾è±¡è€…</h1>

<ul>
<li>æ¯ã‚’ã™ã‚‹ã‚ˆã†ã«pull requestã‚’æŠ•ã’ã‚‰ã‚Œãªã„</li>
<li>ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã®åŸºç¤ã¯å‹‰å¼·ã—ãŸã‘ã©ã€ä»Šåº¦ã©ã†ã™ã‚Œã°ã„ã„ã®ã‚ã‹ã‚‰ãªã„</li>
</ul>


<h1>ãƒ—ãƒ«ãƒªã‚¯é§†å‹•å‹‰å¼·ã¨ã¯</h1>

<p>30æ­³ã‚’è¶…ãˆã¦ã€ä¼šç¤¾ã§ã¯ä¸­å …ã«ãªã‚Šã¾ã—ãŸã€‚æ˜”ã¯ä¼šç¤¾ã‹ã‚‰ä¸ãˆã‚‰ã‚ŒãŸä»•äº‹ã‚’ã“ãªã™ã“ã¨ã«ã‚ˆã£ã¦æˆé•·ã‚’æ„Ÿã˜ã‚‰ã‚Œã¦ã„ã¾ã—ãŸã€‚ã“ã“æ•°å¹´ã¯å¾Œè¼©ã«æ•™ãˆãŸã‚Šã€ãƒªã‚½ãƒ¼ã‚¹ç®¡ç†ãªã©ã‚’ã™ã‚‹ã“ã¨ãŒå¤šããªã‚Šã€ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã¨ã—ã¦ã®æˆé•·ã‚’æ„Ÿã˜ã‚‰ã‚Œãªããªã£ã¦ã—ã¾ã„ã¾ã—ãŸã€‚(ãƒãƒãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆåŠ›ã®æˆé•·ã¯æ„Ÿã˜ã¦ã„ã¾ã™ã€‚)ã“ã®ã¾ã¾ã§ã¯ã„ã‹ã‚“ï¼ã¨ã„ã†ã“ã¨ã§ã€è€ƒãˆå‡ºã—ãŸã®ãŒãƒ—ãƒ«ãƒªã‚¯é§†å‹•å‹‰å¼·ã§ã™ã€‚</p>

<p>ãƒ—ãƒ«ãƒªã‚¯é§†å‹•å‹‰å¼·ã¨ã¯pull requestã‚’æŠ•ã’ã‚‹ãŸã‚ã«ãã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’å­¦ã‚“ã ã‚Šã€è‹±èªã§ã®ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ã—ãŸã‚Šã€ãã®è¨€èªã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã‚’ä½“ã§è¦šãˆãŸã‚Šã™ã‚‹ã“ã¨ã§ã™ã€‚</p>

<p>ã¨ã«ã‹ãpull requestã‚’æŠ•ã’ã¦ãƒ¬ãƒ“ãƒ¥ãƒ¼ã•ã‚Œã‚‹ã“ã¨ã‚’ç›®çš„ã«ã—ã¾ã™ã€‚</p>

<p>pull requestæŠ•ã’ã‚‹ãªã‚“ã¦å‡ºæ¥ãªã„ï¼æ€–ã„ï¼ã£ã¦æ€ã†ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚
ç¢ºã‹ã«æ€¥ã«æ–°ã—ã„æ©Ÿèƒ½ã®ææ¡ˆã™ã‚‹ã®ã¯ä¸­ã€…é€šã‚‰ãªã„ã—ã€ãƒ¬ãƒ“ãƒ¥ãƒ¼ã™ã‚‰ã—ã¦ãã‚Œãªã„ã“ã¨ã‚‚ã‚ã‚Šã¾ã™ã€‚ã—ã‹ã—ã€ã™ã§ã«ã‚ã‚‹Issueã®ã†ã¡ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚ªãƒ¼ãƒŠãƒ¼ãŒã€Œã“ã‚Œã¯ã‚„ã‚ŠãŸã„ã‘ã©ã€æ™‚é–“ãŒã€œã€ã¨è¨€ã£ã¦ã„ã‚‹ã‚ˆã†ãªã‚‚ã®ã¯ããã‚³ãƒ¼ãƒ‰ã‚’æŠ•ã’ã¤ã‘ã¦ã‚‚ã—ã£ã‹ã‚Šå—ã‘æ­¢ã‚ã¦ãã‚Œã€ãã®ã‚³ãƒ¼ãƒ‰ã‚’ã‚ˆã‚Šè‰¯ã„ã‚‚ã®ã«ä»•ä¸Šã’ã‚‹ã‚ˆã†ã«ã‚¢ãƒ‰ãƒã‚¤ã‚¹ãã‚Œã¾ã™ã€‚</p>

<p>ã“ã®ãƒ¬ãƒ“ãƒ¥ãƒ¼ãŒéå¸¸ã«è‰¯ãã€å‡„è…•ã®ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãŒç„¡æ–™ã§ã‚³ãƒ¼ãƒ‰ã‚’è¦‹ã¦ãã‚Œã¦ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã¾ã§ãã‚Œã‚‹ã®ã§ã‚¹ã‚­ãƒ«ã‚¢ãƒƒãƒ—ã«æœ€é©ã§ã™ã€‚ã“ã£ã¡ã¯å‹‰å¼·ã®ã¤ã‚‚ã‚Šãªã‚“ã§ã™ãŒã€pull requestã‚’é€ã£ãŸã ã‘ã§æ„Ÿè¬ã•ã‚Œã‚‹ã“ã¨ã ã£ã¦ã‚ã‚Šã¾ã™ã€‚ã‚‚ã—ãã®ã‚³ãƒ¼ãƒ‰ãŒãƒãƒ¼ã‚¸ãªã‚“ã¦ã•ã‚Œã¡ã‚ƒãˆã°ã€æœ‰åã©ã“ã‚ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä¸€éƒ¨ãŒè‡ªåˆ†ã®ã‚³ãƒ¼ãƒ‰ã§å‹•ãã“ã¨ã«ãªã‚‹ã‚ã‘ã§ã™ã€‚ã“ã‚Œã¯å¬‰ã—ã„ã€‚</p>

<p>ã‹ã¨ã„ã£ã¦ã€ç„¡é—‡ã‚„ãŸã‚‰ã«pull requestã‚’æŠ•ã’ã¦ã‚‚ã„ã„ã“ã¨ã¯ãªã„ã®ã§è‡ªåˆ†ã®çµŒé¨“ã‹ã‚‰ã“ã‚Œãªã‚‰å‹‰å¼·å‡ºæ¥ã‚‹ï¼ã¨ã„ã†ã‚‚ã®ã‚’èª¬æ˜ã—ã¦ã„ãã¾ã™ã€‚</p>

<h1>ãƒ—ãƒ«ãƒªã‚¯é§†å‹•å‹‰å¼·ã®æ¡ä»¶</h1>

<p>è‡ªåˆ†ã¯ä»¥ä¸‹ã®æ¡ä»¶ã§pull requestã‚’æŠ•ã’ã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’é¸å®šã‚’ã—ã¾ã™ã€‚</p>

<ul>
<li>GitHubã®ã‚¹ã‚¿ãƒ¼ãŒ500ä»¥ä¸Šã€‚å‡ºæ¥ã‚Œã°5000ä»¥ä¸Š</li>
<li>é–‹ç™ºãŒæ´»ç™º</li>
<li>IssueãŒãƒ©ãƒ™ãƒ«ãªã©ã§ç®¡ç†ã•ã‚Œã¦ã„ã‚‹</li>
<li>æ”¾ç½®ã•ã‚Œã¦ã„ã‚‹pull requestãŒå°‘ãªã„</li>
<li>GitHubã§å®Œçµã—ã¦ã„ã‚‹</li>
<li>ä½¿ã£ãŸã“ã¨ã‚ã‚‹ãªã—ã¯æ°—ã«ã—ãªã„</li>
</ul>


<h2>GitHubã®ã‚¹ã‚¿ãƒ¼ãŒ500â†‘</h2>

<p>GitHubã®ã‚¹ã‚¿ãƒ¼ãŒå¤šã„ã‚‚ã®ã¯æ³¨ç›®åº¦ãŒé«˜ãã€åˆ©ç”¨ä¾¡å€¤ãŒé«˜ã„ã§ã™ã€‚ã¾ãŸã“ã†ã„ã†ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®é–‹ç™ºã«é–¢ã‚ã£ã¦ã„ã‚‹äººã¯æŠ€è¡“ãƒ¬ãƒ™ãƒ«ãŒé«˜ãã€pull requestã¸ã®ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚‚ã‹ãªã‚Šå³ã—ããªã‚Šã¾ã™ã€‚ã“ã†ã„ã†ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ãƒˆå‡ºæ¥ã‚‹ã¨ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ã«ã‚‚ç¹‹ãŒã‚‹ãŸã‚ã€æœ‰åã©ã“ã‚ã‚’ç©æ¥µçš„ã«ç‹™ã„ã¾ã™ã€‚</p>

<p>ãŸã ã—ã€æœ‰åã©ã“ã‚ã ã¨ã€Œãƒã‚°å ±å‘Šã¯ã‚ã‚ŠãŒãŸã„ã‘ã©ã€ã„ããªã‚Šã‚³ãƒ¼ãƒ‰ã®ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ãƒˆã¯ã—ãªãã¦ã„ã„ã€ã¨è¨€ã†ã¨ã“ã‚ã‚‚ã‚ã‚Šã¾ã™ã®ã§ã€CONTRIBUTING.mdã¯æ³¨æ„ã—ã¦èª­ã‚“ã§ä¸‹ã•ã„ã€‚</p>

<h2>é–‹ç™ºãŒæ´»ç™º</h2>

<p>1å¹´ä»¥ä¸Šæ”¾ç½®ã•ã‚Œã¦ã„ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã ã¨ãƒãƒ¼ã‚¸ã©ã“ã‚ã‹ãƒ¬ãƒ“ãƒ¥ãƒ¼ã•ã‚Œãªã„å¯èƒ½æ€§ãŒé«˜ããªã‚Šã¾ã™ã€‚ãã‚Œã§ã¯æ„å‘³ãŒãªã„ã®ã§ã€ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ãŒã•ã‚Œã¦ã„ã‚‹ã‹ã©ã†ã‹ã®ç¢ºèªã¯çµ¶å¯¾è¡Œã„ã¾ã™ã€‚</p>

<p>ãƒãƒ¼ã‚¸æ¨©é™ãŒã‚ã‚‹ãƒ¦ãƒ¼ã‚¶(Collaborator)ãŒè¤‡æ•°ã„ã‚‹ã¨ã‹ãªã‚Šè‰¯ã„ã§ã™ã€‚ãƒãƒ¼ã‚¸ã—ã¦ã„ã‚‹ã‚³ãƒŸãƒƒã‚¿ãƒ¼ãŒè¤‡æ•°ã„ã‚‹ã‹ã©ã†ã‹ã‚’ã‚³ãƒŸãƒƒãƒˆå±¥æ­´ã‹ã‚‰è¿½ã£ã¦ã¿ã‚‹ã¨ã‚ã‹ã‚Šã¾ã™ã€‚</p>

<h2>IssueãŒãƒ©ãƒ™ãƒ«ãªã©ã§ç®¡ç†ã•ã‚Œã¦ã„ã‚‹</h2>

<p>æœ‰åã©ã“ã‚ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ãƒªã‚½ãƒ¼ã‚¹ãŒãªã„ã‹ã‚‰å¯¾å¿œã—ã¦ã„ãªã„IssueãŒçµæ§‹ã‚ã‚Šã¾ã™ã€‚æ–°å‚è€…ãŒã„ããªã‚Šãã†ã„ã†Issueã«å¯¾ã—ã¦pull requestã‚’é€ã‚‹ã®ã¯æ€–ã„ã¨æ„Ÿã˜ã‚‹ã¯ãšã§ã™ã€‚(pull requestæŠ•ã’ã‚‹ã®ã«æ…£ã‚Œã‚‹ã¨ç‰¹æ®µæ°—ã«ãªã‚‰ãªããªã‚Šã¾ã™ãŒã€‚ã€‚ã€‚)</p>

<p>IssueãŒæ•´ç†ã•ã‚Œã¦ã„ã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ã€èª°ãŒã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ãƒˆã—ã¦ã‚‚ã„ã„ã‚ˆï¼ã¨ã„ã†ãƒ©ãƒ™ãƒ«ãŒè²¼ã£ã¦ã‚ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚ä¾‹ãˆã°ã€è‡ªåˆ†ãŒã¡ã‚‡ãã¡ã‚‡ãã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ãƒˆã—ã¦ã„ã‚‹ã€<a href="https://github.com/excilys/androidannotations/">AndroidAnnotations</a>ã§ã¯<a href="https://github.com/excilys/androidannotations/labels/ContributionWelcome">ContributionWelcome</a>ãŒãã‚Œã«å½“ãŸã‚Šã¾ã™ã€‚
ã“ã†ã„ã†ãƒ©ãƒ™ãƒ«ãŒã‚ã‚Œã°ã€ã„ã¤ã§ã‚‚ãƒãƒƒãƒã‚³ã‚¤ã‚„ã¨å®£è¨€ã—ã¦ã„ã‚‹ã®ã§ã€æ–°å‚è€…ã ã‚ã†ã¨ç‰¹ã«æ°—ã«ã›ãšã€pull requestæŠ•ã’ã¦ã—ã¾ã„ã¾ã™ã€‚å¤§æŠµã®å ´åˆã€ä½•ã‚’ã™ã‚‹ã¹ãã‹ã¨ã„ã†ã“ã¨ãŒã—ã£ã‹ã‚ŠIssueã«è¨˜è¼‰ã•ã‚Œã¦ã„ã¾ã™ã®ã§ã€ãã®é€šã‚Šã«å®Ÿè£…ã™ã‚Œã°è‰¯ã„ã ã‘ã§ã™ã€‚</p>

<p>ãƒ©ãƒ™ãƒ«ãŒç®¡ç†ã•ã‚Œã¦ã„ãªã„ã¨ã“ã‚ã§ã‚‚ã€Issueã«ã“ã‚Œã‚„ã£ã¦ã‚‚ã„ã„ã‹ã­ï¼Ÿã¨ã„ã†ã‚³ãƒ¡ãƒ³ãƒˆã‚’ã—ã¦ã—ã¾ã†ã®ã‚‚ã‚ã‚Šã§ã™ã€‚ãƒãƒ¼ã‚¸ã—ã¦ã„ã‚‹äººãŒä¸Šã’ã¦ã„ã‚‹ã‚ˆã†ãªIssueã¯ç‰¹ã«ç‹™ã„ç›®ã§è³ªå•ã‚‚ã—ã‚„ã™ãã€ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚‚æ—©ã„ã§ã™ã€‚</p>

<h2>æ”¾ç½®ã•ã‚Œã¦ã„ã‚‹pull requestãŒå°‘ãªã„</h2>

<p>ä¸€ãƒ¶æœˆä»¥ä¸Šå‰ã«ä¸Šã’ã‚‰ã‚ŒãŸpull requestãŒ10ä»¶ä»¥ä¸Šæ”¾ç½®ã•ã‚Œã¦ã„ã‚‹ã‚ˆã†ãªãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯å±é™ºã§ã™ã€‚</p>

<p>å¤§æŠµã€pull requestã¯ãƒãƒ¼ã‚¸ã—ã¦ã»ã—ã„ã‹ã‚‰å‡ºã—ã¦ã„ã‚‹ã‚ã‘ã§ã€ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚¿ãƒ¼å´ã®å•é¡Œã§æ”¾ç½®ã•ã‚Œã‚‹ã¨ã„ã†ã®ã¯ç¨€ã§ã™ã€‚ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚ªãƒ¼ãƒŠãƒ¼ãŒãƒ¬ãƒ“ãƒ¥ãƒ¼ã—ã¦ãã‚Œãªã„ã€ãƒãƒ¼ã‚¸ã™ã‚‹æ°—ãŒãªã„ã€å¿™ã—ã„ã“ã¨ãŒå¤šãã€ãã†ã„ã†ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«pull requestã‚’æŠ•ã’ã¦ã‚‚æ”¾ç½®ã•ã‚Œã‚‹ã ã‘ã§å‹‰å¼·å‡ºæ¥ã¾ã›ã‚“ã€‚æ™‚é–“ã®ç„¡é§„ã§ã™ã€‚</p>

<h2>GitHubã§å®Œçµã—ã¦ã„ã‚‹</h2>

<p>GitHubå†…ã§å®Œçµã—ã¦ã„ãªã„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯é¿ã‘ã¾ã™ã€‚IssueãŒåˆ¥ã‚µã‚¤ãƒˆã§ã‚ã£ãŸã‚Šã€sourceãŒcloneã§ä¸€ç™ºå–å¾—ã§ããªã‹ã£ãŸã‚Šã™ã‚‹ã‚‚ã®ã§ã™ã€‚ãã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç‰¹æœ‰ã®ãƒ­ãƒ¼ã‚«ãƒ«ãƒ«ãƒ¼ãƒ«ã¯ãƒ©ãƒ¼ãƒ‹ãƒ³ã‚°ã‚³ã‚¹ãƒˆãŒé«˜ã„ã‚ã‚Šã«å­¦ã‚“ã§ã‚‚ãã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã—ã‹ä½¿ãˆãªã„ãŸã‚ã§ã™ã€‚</p>

<p>ã©ã†ã—ã¦ã‚‚ãã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ãƒˆãŒã—ãŸã„ï¼ã¨ã„ã†äººã§ã‚ã‚Œã°ã€å…¨åŠ›ã§æ¨å¥¨ã—ã¾ã™ãŒã€ãã†ã„ã†ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯æ–°å‚è€…ã«å¯¾ã—ã‹ãªã‚Šå£ãŒé«˜ãã€æœ€åˆã‹ã‚‰ãã†ã„ã†ã®ã‚’ç‹™ã£ã¦ã—ã¾ã†ã¨ç¶šã‘ã‚‰ã‚Œãªããªã‚Šã¾ã™ã€‚</p>

<h2>ä½¿ã£ãŸã“ã¨ã‚ã‚‹ãªã—ã¯æ°—ã«ã—ãªã„</h2>

<p>ãƒ“ãƒ«ãƒ‰ã‚„ãƒ†ã‚¹ãƒˆãŒé€šã‚‹ç’°å¢ƒãŒå‡ºæ¥ã¦ã—ã¾ãˆã•ãˆã™ã‚Œã°ã€ãã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½¿ã£ãŸã“ã¨ã‚ã‚‹ãªã—ã¯ç‰¹ã«å•é¡Œã‚ã‚Šã¾ã›ã‚“ã€‚</p>

<p>è‡ªåˆ†ã®å ´åˆã€ä»Šç›´è¿‘ã§å‡ºã—ã¦ã„ã‚‹pull requestã¯å…¨ã¦ä½¿ã£ãŸã“ã¨ãŒãªã„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã ã£ãŸã‚Šã—ã¾ã™ã€‚
(ã¶ã£ã¡ã‚ƒã‘ã‚‹ã¨ä½¿ã£ãŸã“ã¨ãŒãªã„ã»ã†ãŒãƒãƒ¼ã‚¸ã•ã‚Œã¦å£Šã‚Œã¡ã‚ƒã£ã¦ã‚‚æ¥­å‹™ã«æ”¯éšœå‡ºãªã„ã—ã€æ°—æ¥½ã ã£ãŸã‚Šã—ã¾ã™ã€‚)</p>

<h1>å¿…è¦ãªã‚¹ã‚­ãƒ«</h1>

<p>ãƒ—ãƒ«ãƒªã‚¯é§†å‹•å‹‰å¼·ã§å¿…è¦ãªã‚¹ã‚­ãƒ«ã¯ä»¥ä¸‹ã§ã™ã€‚</p>

<ul>
<li>gitã®åŸºç¤ã‚„fork->commit->pull requestã¾ã§ãŒå‡ºæ¥ã‚‹</li>
<li>ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ã§ã‚‚æŠ˜ã‚Œãªã„å¿ƒ</li>
<li>è‡ªåˆ†ã®ã‚¹ã‚­ãƒ«ã§ã¯ã¾ã å‡ºæ¥ãªã„ã¨æ€ã‚ãªã„ã“ã¨</li>
</ul>


<h2>gitã®åŸºç¤ã‚„fork->commit->pull requestã¾ã§ãŒå‡ºæ¥ã‚‹</h2>

<p>pull requestã‚’æŠ•ã’ã‚‹ã¾ã§ã®æµã‚Œã¯ã‚°ã‚°ã‚Œã°ã™ãå‡ºã¦ãã‚‹ã®ã§ã€èª¬æ˜çœç•¥ã€‚</p>

<p>ãã‚Œä»¥å¤–ã§ã‚‚git/githubã®å•é¡Œã¯ã‚„ã£ã¦ã„ã‚‹ã¨ã¡ã‚‡ãã¡ã‚‡ãå‡ºã¦ãã¾ã™ãŒã€éƒ½åº¦ã‚„ã‚ŠãŸã„ã“ã¨ã‚’ã‚°ã‚°ã‚Œã°å‡ºã¦ãã¾ã™ã€‚å‹‰å¼·ã—ã¦ä¸‹ã•ã„ã€‚ã©ã†ã—ã¦ã‚‚ã‚ã‹ã‚‰ãªã„å ´åˆã¯ç›´æ¥èã„ã¦ã—ã¾ã£ã¦ã‚‚ã„ã„ã§ã™ã€‚</p>

<p>forkå…ƒã®ãƒ–ãƒ©ãƒ³ãƒã¨ã®åŒæœŸæ–¹æ³•ãŒæœ€åˆã®å£ã ã¨æ€ã„ã¾ã™ã€‚é¢å€’ã§ã‚ã‚Œã°ã€forkã—ãŸãƒªãƒã‚¸ãƒˆãƒªã‚’æ¶ˆã—ã¦å†åº¦forkã—ã¦åŒæœŸã‚’å–ã‚‹ã®ã‚‚ã‚ã‚Šã§ã™ã€‚
(ãŸã ã—ã€ãƒãƒ¼ã‚¸å‰ã®pull requestãŒã‚ã£ãŸã‚Šã™ã‚‹ã¨é¢å€’ãªã®ã§ã€æ³¨æ„ã€‚)
ã“ã‚Œã‚‚å‹‰å¼·ã ã¨æ€ã£ã¦ã€ã‚ã‹ã‚‰ãªã„ã®ã§ã‚ã‚Œã°ã‚°ã‚°ãƒƒã¦ã¿ã¦ä¸‹ã•ã„ã€‚ã€Œfork æ›´æ–° è¿½éšã€ã¨ã‹ã§æ¤œç´¢ã™ã‚Œã°å‡ºã¦ãã¾ã™ã€‚</p>

<h2>ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ã§ã‚‚æŠ˜ã‚Œãªã„å¿ƒ</h2>

<p>ç‰¹ã«çµŒé¨“ã®å°‘ãªã„äººã‚„æ½°ã‚Œã¦ã„ã£ãŸäººã«å¤šã„ã®ãŒã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®æŒ‡æ‘˜ç‚¹ãŒãã®äººã«å¯¾ã—ã¦è¨€ã£ã¦ã„ã‚‹ã®ã§ã¯ï¼Ÿã¨å‹˜é•ã„ã—ã¦ã„ã‚‹ã“ã¨ã§ã™ã€‚</p>

<p><strong>ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ã¯ã‚³ãƒ¼ãƒ‰ã«å¯¾ã—ã¦è¨€ã£ã¦ã„ã‚‹ã®ã§ã‚ã£ã¦ã€ãã®ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ãŸäººã«å¯¾ã—ã¦ã¯è¨€ã£ã¦ã„ãªã„ã§ã™ã€‚</strong></p>

<p>ã“ã®è€ƒãˆã«ãªã£ã¦ãªã„äººã¯æ—©ã‚ã«åˆ‡ã‚Šæ›¿ãˆãªã„ã¨ç²¾ç¥çš„ã«ç—…ã¿ã‚„ã™ã„ã®ã§æ°—ã‚’ã¤ã‘ã¦ä¸‹ã•ã„ã€‚
è¾›è¾£ãªæ„è¦‹ãŒã‚ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€ã‚ãªãŸã‚’å¦å®šã—ã¦ã„ã‚‹ã‚ã‘ã§ã¯ãªã„ã§ã™ã€‚
(é€†ã«ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ãŸäººã‚’å¦å®šã™ã‚‹ã‚ˆã†ãªæ„è¦‹ã‚’ã™ã‚‹ãƒ¬ãƒ“ãƒ¥ã‚¢ãƒ¼ãŒã„ã‚‹å ´åˆã€ã•ã£ã•ã¨ãã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‹ã‚‰é›¢ã‚Œã‚‹ãªã‚Šã€è»¢è·ã™ã‚‹ãªã‚Šã—ãŸã»ã†ãŒã„ã„ã§ã™ã€‚ãã†ã„ã†äººã¨ä¸€ç·’ã«ã‚³ãƒ¼ãƒ‰æ›¸ã„ã¦ã‚‚ç²¾ç¥çš„ã«ç–²ã‚Œã‚‹ã ã‘ã§ã™ã€‚)</p>

<h2>è‡ªåˆ†ã®ã‚¹ã‚­ãƒ«ã§ã¯ã¾ã å‡ºæ¥ãªã„ã¨æ€ã‚ãªã„ã“ã¨</h2>

<p>ãƒ—ãƒ«ãƒªã‚¯é§†å‹•å‹‰å¼·ã§ä¸€ç•ªå•é¡Œãªã®ãŒã€ã€Œè‡ªåˆ†ã®ã‚¹ã‚­ãƒ«ã§ã¯ã¾ã å‡ºæ¥ãªã„ã€ã¨æ€ã†å¿ƒã®å£ã§ã™ã€‚</p>

<p>ã©ã‚Œã»ã©ã—ã‚‡ã¼ã„ã‚³ãƒ¼ãƒ‰ã§ã‚‚pull requestã‚’æŠ•ã’ã‚‹ã“ã¨ã§ã€ãã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«é–¢ã‚ã£ã¦ã„ã‚‹äººã«æŒ‡æ‘˜ã—ã¦ã‚‚ã‚‰ã„ã€ã‚³ãƒ¼ãƒ‰ã‚’ã©ã†æ›¸ã‘ã°ã„ã„ã®ã‹ãŒã‚ã‹ã£ã¦ãã¾ã™ã€‚</p>

<p>è‡ªåˆ†ã®å ´åˆã€ä¸€åº¦ã‚‚æ›¸ã„ãŸã“ã¨ãªã‹ã£ãŸè¨€èªã‚’è§¦ã‚ŠãŸã„ã‹ã‚‰ã¨ã„ã†ã“ã¨ã§ã€ã‚³ãƒ¼ãƒ‰èª­ã‚“ã§pull requestæŠ•ã’ãŸã“ã¨ã‚‚ã‚ã‚Šã¾ã™ã€‚</p>

<p>æœ€çµ‚çš„ã«è‰¯ã„ã‚¢ã‚¦ãƒˆãƒ—ãƒƒãƒˆã«ãªã‚Œã°ã„ã„ã‚ã‘ã§ã€æœ€åˆã‹ã‚‰å®Œç’§ã‚’ç›®æŒ‡ã™å¿…è¦ãŒãªã„ã§ã™ã€‚ã¾ãŸæœ€åˆã‹ã‚‰ã»ã¼å®Œç’§ãªã‚³ãƒ¼ãƒ‰ãŒä½œã‚Œã‚‹ã®ã§ã‚ã‚Œã°ã€ãƒ—ãƒ«ãƒªã‚¯é§†å‹•å‹‰å¼·ã¯ã‚‚ã†å’æ¥­ã—ã¦ã„ã¾ã™ã€‚</p>

<p>ä¼šç¤¾ã§ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã¯ç¤¾å†…ã®ç‰¹æ®Šãªãƒ«ãƒ¼ãƒ«ãŒã‚ã£ãŸã‚Šã—ã€ç¤¾å¤–ã§é€šã˜ãªã„ã“ã¨ãŒå¤šã€…ã‚ã‚Šã¾ã™ã€‚æœ‰åã©ã“ã‚ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã‚’æ±‚ã‚ã‚‰ã‚Œã‚‹ãŸã‚ã€ã˜ã£ãã‚Šè¨­è¨ˆã—ã€è‡ªåˆ†ãŒè€ƒãˆãŸã•ã„ãã‚‡ã†ã®ã‚³ãƒ¼ãƒ‰ã‚’ä½œã‚Šä¸Šã’ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚ã©ã‚“ãªã“ã¨ã§ã‚‚ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ãƒˆã—ã¦ãã‚ŒãŸã“ã¨ã«æ„Ÿè¬ã—ã¦ãã‚Œã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒå¤šã„ã§ã™ã€‚ç„¡æ–™ã§ä¸–ç•Œãƒ¬ãƒ™ãƒ«ã®ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã«æ•™ãˆã¦ã‚‚ã‚‰ã„ã€ã•ã‚‰ã«æ„Ÿè¬ã¾ã§ã—ã¦ã‚‚ã‚‰ãˆã¾ã™ã€‚ãã®ã‚³ãƒ¼ãƒ‰ãŒãƒãƒ¼ã‚¸ã¾ã§ã•ã‚Œã‚Œã°ã€ä¸–ç•Œã§ä½¿ã‚ã‚Œã‚‹ã‚ˆã†ãªæœ‰åãªãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒè‡ªåˆ†ã®ã‚³ãƒ¼ãƒ‰ã§å‹•ãã“ã¨ã«ãªã‚Šã¾ã™ï¼</p>

<h1>å€‹äººçš„ãªæˆæœ</h1>

<p>ã¾ã 3ãƒ¶æœˆã»ã©ã§ã™ãŒã€ã“ã‚Œã‚’ã‚„ã‚‹ã‚ˆã†ã«ãªã£ã¦ã€Java8, Groovy/Gradle, Kotlinã®å‹‰å¼·ãŒå‡ºæ¥ã¾ã—ãŸã€‚Rubyã‚„è‹±èªã®ã‚¹ã‚­ãƒ«ã‚‚ä¸ŠãŒã£ãŸã“ã¨ã‚’å®Ÿæ„Ÿã—ã¦ã„ã¾ã™ã€‚</p>

<p>ã¾ãŸã€gitã®çŸ¥è­˜ã‚‚ã‹ãªã‚Šæ·±ã¾ã‚Šã¾ã—ãŸã€‚ä»–äººã®é€”ä¸­ã®pull requestã‚’è‡ªåˆ†ã®pull requestã¨ã—ã¦å–ã‚Šè¾¼ã¿ã€ä¿®æ­£ã—ã€æŠ•ã’ã‚‹ã¿ãŸã„ãªè²´é‡ãªçµŒé¨“ã‚‚å‡ºæ¥ã¾ã—ãŸã€‚å°ã•ã„ã‚¢ã‚¤ã‚³ãƒ³ã¨å¤§ãã„ã‚¢ã‚¤ã‚³ãƒ³ãŒä¸€åº¦ã«å‡ºã‚‹ã‚ˆã†ãª<a href="https://github.com/excilys/androidannotations/pull/1603/commits">ã‚³ãƒŸãƒƒãƒˆ</a>è¦‹ãŸã“ã¨ã‚ã‚Šã¾ã™ã‹ï¼Ÿ</p>

<h1>æ°—ã‚’ã¤ã‘ã‚‹ã“ã¨</h1>

<p>æ™‚é–“ã‚’ã‹ã‘ã‚Œã°ã‹ã‘ã‚‹ã ã‘å‹‰å¼·ã¯å‡ºæ¥ã¾ã™ãŒã€æ¥­å‹™ã«æ”¯éšœãŒå‡ºãŸã‚Šã€æœ€æ‚ªä½“ã‚’å£Šã—ã¦ã—ã¾ã„ã¾ã™ã€‚</p>

<p>ä»¥å‰ã¯ãƒ–ãƒ­ã‚°ã‚’æ›¸ã„ãŸã‚Šã€æœ¬ã‚’èª­ã‚“ã ã‚Šã¨å¤œé…ãã¾ã§ãƒ€ãƒ©ãƒ€ãƒ©ã‚’ã‚„ã£ã¦ã„ã¾ã—ãŸã€‚ã§ã‚‚ã„ã¾ã„ã¡æˆæœãŒå‡ºãªã‹ã£ãŸã§ã™ã€‚ä»Šã¯çŸ­ã„æ™‚é–“ã§é›†ä¸­ã—ã¦çµæœã‚’å‡ºã—ã¦ã„ãã“ã¨ã‚’å¿ƒãŒã‘ã¦ã„ã¾ã™ã€‚å¤œ12æ™‚ã«ã¯å¯ã¾ã™ã€‚ãŠæ˜¼ä¼‘ã¿ã®é£Ÿå¾Œ30åˆ†ã¨å­ä¾›ãŒå¯ãŸå¾Œã®1æ™‚é–“ã ã‘ã‚„ã£ã¦ã„ã¾ã™ã€‚ç„¡ç†ã¯çµ¶å¯¾ã«ã—ã¾ã›ã‚“ã€‚ã ã£ã¦ã€ç´æœŸã¯ã‚ã‚Šã¾ã›ã‚“ã‹ã‚‰ã€‚</p>

<p>ä¸€æ—¥å¤šãã®æ™‚é–“ãŒãªã„ã®ã§ã€æ¯æ—¥ã‚³ãƒŸãƒƒãƒˆã¯å‡ºæ¥ã¾ã›ã‚“ã€‚Issueã‚„ã‚³ãƒ¼ãƒ‰ã‚’èª­ã‚€ã ã‘ã§éãã¦ã—ã¾ã†æ—¥ã‚‚ã‚ã‚Šã¾ã™ã€‚ã§ã‚‚é€±1ãã‚‰ã„ã®ãƒšãƒ¼ã‚¹ã§pull requestã‚’æŠ•ã’ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚</p>

<p>ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒªãƒ³ã‚°ã«æ™‚é–“ã‚’ä½¿ã†ã®ã‚‚ç„¡é§„ãªã®ã§ã€ä¸€å€‹çµ‚ã‚ã£ãŸã‚‰æ¬¡ã®Issueã¸ã¨ã„ã†æµã‚Œã«ã—ã¦ã„ã¾ã™ã€‚</p>

<h1>pull requestãŒæ€–ã„äººã¸</h1>

<p>ãã‚“ãªã“ã¨ã„ã£ã¦ã‚‚ãŠå‰ã‚¹ã‚­ãƒ«ã‚ã‚‹ã‹ã‚‰ã‚„ã‚Œã‚‹ã‚“ã§ã—ã‚‡ï¼Ÿã¿ãŸã„ãªäººãŒã„ã‚‹ã‹ã¨æ€ã†ã®ã§ã€å®Ÿéš›ã«è‡ªåˆ†ãŒã¤ã„æœ€è¿‘é€ã£ãŸããpull requestã‚’æ™’ã—ã¦ãŠãã¾ã™ã€‚</p>

<p><a href="https://github.com/excilys/androidannotations/pull/1673">https://github.com/excilys/androidannotations/pull/1673</a></p>

<p>ã™ã§ã«æŒ‡æ‘˜ã‚’å—ã‘ã¦ä¿®æ­£ã—ã¦ã„ã¾ã™ãŒã€æœ€åˆã®pull requestã‚’æŠ•ã’ãŸã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ã€ã€ŒIt&rsquo;s ready for review.ã€(ï¾„ï¾ï¾”ï½±)ã¨è¨€ã£ã¦ãŠããªãŒã‚‰ã€
<a href="https://github.com/excilys/androidannotations/pull/1673#discussion_r48849275">AndroidManifest.xmlã®Activityã‚¿ã‚°ã«Viewã‚¯ãƒ©ã‚¹ã‚’æŒ‡å®šã™ã‚‹</a>ã¨ã„ã†æ„å‘³ä¸æ˜ãªè¡Œå‹•ã‚’ã—ã¦ã„ãŸã‚Šã€<a href="https://github.com/excilys/androidannotations/pull/1673#discussion-diff-49131871">newInsanceVarã¨ã„ã†typoã‚’ã‹ã¾ã—ã¦ã„ãŸã‚Š</a>ã¨ã„ã‚ã„ã‚ã²ã©ã„ã§ã™ã€‚ãã‚Œã§ã‚‚ç½µã‚‰ã‚ŒãŸã‚Šã™ã‚‹ã“ã¨ã¯ãªã„ã§ã™ã€‚(ã„ã„åŠ æ¸›ç½µã‚‰ã‚ŒãŸã»ã†ãŒã„ã„ã‚“ã˜ã‚ƒã­ãƒ¼ã‹ï¼Ÿã¨ã„ã†ãƒ¬ãƒ™ãƒ«ãªã®ã§ã™ãŒãƒ»ãƒ»ãƒ»)</p>

<h1>æœ€å¾Œã«</h1>

<p>ã“ã®å‹‰å¼·æ³•ã‚’ä½¿ã£ã¦çµŒé¨“ãŒæµ…ã„è‹¥æ‰‹ã‚„å­¦ç”ŸãŒã©ã‚“ã©ã‚“ä¸–ç•Œã§è…•ã‚’ç£¨ã„ã¦ãã‚ŒãŸã‚‰ã¨æ€ã„ã¾ã™ã€‚ç‰¹ã«æ™‚é–“ã®ã‚ã‚‹äººã¯ç©æ¥µçš„ã«ã‚³ãƒ¼ãƒ‰ã‚’å…¬é–‹ã—ã€ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’å—ã‘ã¦è…•ã‚’ç£¨ã„ã¦ä¸‹ã•ã„ã€‚æ—©ã‘ã‚Œã°æ—©ã„ã»ã©å­¦ã¹ã‚‹ã“ã¨ãŒå¤šã„ã¨æ€ã„ã¾ã™ã€‚</p>

<p>è‡ªåˆ†ã‚‚ã‚¹ã‚­ãƒ«ã«è‡ªä¿¡ãŒã¤ã„ãŸã‚‰ãƒ»ãƒ»ãƒ»ã¨GitHubã§pull requestã‚’ã»ã¨ã‚“ã©é€ã£ã¦ã“ãªã‹ã£ãŸã®ã§ã™ãŒã€ãã‚“ãªè‡ªä¿¡ã¯ã‚„ã‚‰ãªã„é™ã‚Šçµ¶å¯¾ã«ã¤ã‹ãªã„ã§ã™ã€‚ã©ã‚“ã©ã‚“ä»–äººã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§å¤±æ•—ã—ã¦ã€è…•ã‚’ç£¨ã„ã¦ä¸‹ã•ã„ã€‚</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã«ã¤ã„ã¦ä¼ãˆãŸã„ã“ã¨ã€‚]]></title>
    <link href="http://shiraji.github.io/blog/2015/10/17/refactoring/"/>
    <updated>2015-10-17T11:39:09+09:00</updated>
    <id>http://shiraji.github.io/blog/2015/10/17/refactoring</id>
    <content type="html"><![CDATA[<p>ã“ã®æ–‡ç« ã¯ä»¥ä¸‹ã®URLã®ã‚³ãƒ”ãƒ¼ã§ã™ã€‚</p>

<p><a href="http://shiraji.hatenablog.com/entry/2015/09/06/225204">http://shiraji.hatenablog.com/entry/2015/09/06/225204</a></p>

<hr />

<p>ã“ã®æ–‡ç« ã¯ä»¥ä¸‹ã«è©²å½“ã™ã‚‹æ–¹ã¸ã€ãªãœã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã«ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°(ãƒªãƒ•ã‚¡ã‚¯ã‚¿)ã•ã›ã‚‹ã¹ããªã®ã‹ã‚’è¨˜è¼‰ã—ã¦ã„ã¾ã™ã€‚</p>

<ul>
<li>ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã™ã‚‹ï¼ã‚µãƒ¼ãƒ“ã‚¹ã®é–‹ç™ºãŒåœæ­¢ã™ã‚‹ã¨è€ƒãˆã¦ã„ã‚‹æ–¹</li>
<li>ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã«é–¢ã—ã¦ä¾¡å€¤ã‚’è¦‹å‡ºã›ãªã„æ–¹</li>
<li>ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã«ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã•ã›ã¦æ¬²ã—ã„ã¨è¨€ã‚ã‚Œã‚‹æ–¹</li>
</ul>


<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<!-- 728x90 -->


<p><ins class="adsbygoogle"
     style="display:inline-block;width:728px;height:90px"
     data-ad-client="ca-pub-3940616565912592"
     data-ad-slot="7693358062"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>




<!-- more -->


<h1>æœ€åˆã«</h1>

<p>ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã®è©±ã‚’ã™ã‚‹å‰ã«ã€ä¸€èˆ¬çš„ãªè·å ´ã«é–¢ã™ã‚‹è³ªå•ãŒã‚ã‚Šã¾ã™ã€‚</p>

<ul>
<li>ã‚ãªãŸã®è·å ´ã¯ç¶ºéº—ã§ã™ã‹ï¼Ÿ</li>
<li>ã‚ãªãŸãŒæ€ã„æµ®ã‹ã¹ã‚‹ã€Œã§ãã‚‹åŒåƒšãƒ»ä¸Šå¸ã€ã®æœºã¯æ•´ç†æ•´é “ã•ã‚Œã¦ã„ã¾ã™ã‹ï¼Ÿ</li>
</ul>


<p>å…¨ã¦ã®äººã«å½“ã¦ã¯ã¾ã‚‹ã‚ã‘ã§ã¯ãªã„ã¨æ€ã„ã¾ã™ã€‚ã—ã‹ã—å¤§æŠµã®æ–¹ã¯ä¸¡æ–¹å›ç­”ãŒYesã«ãªã‚‹ã¨æ€ã„ã¾ã™ã€‚</p>

<p>è·å ´ã‚’ç¶ºéº—ã«ã™ã‚‹ã®ã¯ãã“ã§åƒãäººã®å¥åº·ç¶­æŒã‚„ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³å‘ä¸Šã«å½¹ç«‹ã¡ã¾ã™ã€‚è·å ´ã‚’ç¶ºéº—ã«ã—ã¦ãã‚Œã‚‹å°‚é–€ã®ã‚¹ã‚¿ãƒƒãƒ•ãŒã„ã‚‹ä¼æ¥­ã‚‚ã‚ã‚‹ã®ã§ã¯ãªã„ã§ã—ã‚‡ã†ã‹ï¼Ÿã¾ãŸæ•´ç†æ•´é “ã•ã‚ŒãŸæœºã§ä»•äº‹ã™ã‚‹ã“ã¨ã«ã‚ˆã‚Šã€ãƒ ãƒ€ã‚’çœç•¥ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚ä»•äº‹ã‚’ã™ã‚‹ã‚¹ãƒšãƒ¼ã‚¹ãŒå¢—ãˆã‚‹ã“ã¨ã«ã‚ˆã‚ŠåŠ¹ç‡ã‚‚ã‚ãŒã‚Šã¾ã™ã€‚å¤§æŠµã®å‡ºæ¥ã‚‹äººã¯æœºã‚’æ•´ç†æ•´é “ã—ã¦ã„ã‚‹å‚¾å‘ãŒã‚ã‚‹ãã†ã§ã™ã€‚è‘—åãªä¼šç¤¾ã®ç ”ä¿®ã§ã‚‚åŒã˜ã‚ˆã†ãªã“ã¨ã‚’èª¬ã„ã¦ã„ã¾ã—ãŸã€‚</p>

<p>æ±šã„ç’°å¢ƒã§åƒãã¨ã„ã†ã“ã¨ã¯ã€ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä¸‹ã’ã€ãƒ ãƒ€ãªä½œæ¥­ã‚’ç™ºç”Ÿã•ã›ã€åŠ¹ç‡ã‚’ä¸‹ã’ã‚‹ã¨ã„ã†ã“ã¨ã§ã™ã€‚æ±šã„ç’°å¢ƒã§åƒãã®ã¯éå¸¸ã«è¾›ãã€å¯èƒ½ã§ã‚ã‚Œã°ã€äººã¯ãã®ç’°å¢ƒã‹ã‚‰é›¢ã‚Œã¦ã„ãã¾ã™ã€‚</p>

<h1>ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã¨ã¯ä½•ã‹ï¼Ÿ</h1>

<p>ã•ã¦ã€æœ¬é¡Œã®ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã«ã¤ã„ã¦ã§ã™ã€‚wikipediaã§ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«èª¬æ˜ã•ã‚Œã¦ã„ã¾ã™ã€‚</p>

<blockquote><p>ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚° (refactoring) ã¨ã¯ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã«ãŠã„ã¦ã€ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®å¤–éƒ¨ã‹ã‚‰è¦‹ãŸå‹•ä½œã‚’å¤‰ãˆãšã«ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã®å†…éƒ¨æ§‹é€ ã‚’æ•´ç†ã™ã‚‹ã“ã¨ã€‚((&ldquo;ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚° (ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°)&rdquo;. wikipedia. <a href="https://ja.wikipedia.org/wiki/%E3%83%AA%E3%83%95%E3%82%A1%E3%82%AF%E3%82%BF%E3%83%AA%E3%83%B3%E3%82%B0_">https://ja.wikipedia.org/wiki/%E3%83%AA%E3%83%95%E3%82%A1%E3%82%AF%E3%82%BF%E3%83%AA%E3%83%B3%E3%82%B0_</a>(%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0))</p></blockquote>

<p>ã‚‚ã†å°‘ã—ã‚µãƒ¼ãƒ“ã‚¹é–‹ç™ºã«çµ¡ã‚ã¦åˆ‡ã‚Šè¾¼ã‚“ã èª¬æ˜ã«ã™ã‚‹ã¨ã€</p>

<p>ã€Œãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã™ã‚‹ã¨ã„ã†ã“ã¨ã¯ã€ã‚µãƒ¼ãƒ“ã‚¹ã®æ©Ÿèƒ½ã®è¿½åŠ ã‚„å‰Šé™¤ã¯ä¸€åˆ‡è¡Œã‚ãšã€ã‚³ã‚¹ãƒˆã‚’ã‹ã‘ã¦ã€ä»Šã¾ã§å‹•ã„ã¦ã„ãŸã‚³ãƒ¼ãƒ‰ã«å¯¾ã—ã¦ä¿®æ­£ã‚’åŠ ãˆã‚‹ä½œæ¥­ã§ã™ã€‚ã€</p>

<p>ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã‚’ã™ã‚‹ã“ã¨ã«ã‚ˆã‚Šã€ãƒã‚°ã‚’åŸ‹ã‚è¾¼ã‚“ã§ã‚µãƒ¼ãƒ“ã‚¹ã‚’æ­¢ã‚ã¦ã—ã¾ã†å¯èƒ½æ€§ã‚‚å«ã¾ã‚Œã‚‹ã“ã¨ã«ãªã‚Šã¾ã™ã€‚ã‚‚ã¡ã‚ã‚“ãã‚Œã‚’é¿ã‘ã‚‹è¡“ã¯ã„ãã¤ã‹ã‚ã‚‹ã®ã§ã™ãŒã€æ‰‹æ®µã¯ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãŒè€ƒãˆã‚Œã°ã„ã„ã®ã§ã“ã“ã§ã¯çœç•¥ã•ã›ã¦ã„ãŸã ãã¾ã™ã€‚</p>

<h1>ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã‚’ãªãœã‚„ã‚‹ã®ã‹ï¼Ÿ</h1>

<p>ãªãœã“ã‚“ãªãƒ ãƒ€ãªä½œæ¥­ã‚’è¡Œã†ã®ã§ã—ã‚‡ã†ã‹ï¼Ÿã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã¯ã‚¢ãƒ›ãªã‚“ã§ã—ã‚‡ã†ã‹ï¼Ÿ</p>

<h3>ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã¯ã‚³ãƒ¼ãƒ‰ä¸Šã§ä»•äº‹ã‚’ã—ã¦ã„ã‚‹</h3>

<p>ï¼ˆå®Ÿéš›ã€ã‚¢ãƒ›ãªã“ã¨ã‚„ã‚‹äººã¯å¤šã„ã§ã™ãŒãƒ»ãƒ»ãƒ»ï¼‰äº‹è‡ªåˆ†ãŸã¡ãŒè¡Œã£ã¦ã„ã‚‹ã‚µãƒ¼ãƒ“ã‚¹é–‹ç™ºã«é–¢ã—ã¦è¨€ãˆã°ã€ãƒ—ãƒ©ã‚¤ãƒ‰ã‚’æŒã£ã¦è¡Œã£ã¦ã„ã‚‹ã¯ãšã§ã™ã€‚ã‚µãƒ¼ãƒ“ã‚¹ã«æºã‚ã£ã¦ã„ã‚‹ä»¥ä¸Šã€ãã®ã‚µãƒ¼ãƒ“ã‚¹ãŒã‚ˆã‚Šè‰¯ããªã‚‹ã“ã¨ã‚’æœ›ã‚“ã§é–‹ç™ºã—ã¦ã„ã¾ã™ã€‚ãã®ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãŒã‚³ã‚¹ãƒˆãŒã‹ã‹ã‚‹ã“ã¨ã‚’æ‰¿çŸ¥ã§ã€ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã•ã›ã¦æ¬²ã—ã„ã¨ã„ã†ç†ç”±ãŒã‚ã‚Šã¾ã™ã€‚ãã‚Œã¯ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã¯<b>ã‚³ãƒ¼ãƒ‰ä¸Šã§ä»•äº‹ã‚’ã—ã¦ã„ã‚‹</b>ã¨ã„ã†ã“ã¨ã§ã™ã€‚</p>

<h3>ãƒ‡ã‚¹ã‚¯ã®ç¶ºéº—ã•ã¨ã‚³ãƒ¼ãƒ‰ã®ç¶ºéº—ã•</h3>

<p>ç§ãŒéã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã«ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã®é‡è¦æ€§ã‚’èª¬æ˜ã™ã‚‹æ™‚ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«èª¬æ˜ã—ã¾ã™ã€‚</p>

<ul>
<li>ãƒ‡ã‚¹ã‚¯ã«æ¯æ—¥ã®ã‚ˆã†ã«ã„ã‚ã‚“ãªäººãŒè³‡æ–™ã‚’ç½®ã„ã¦ã„ãã¨ã—ã¾ã™ã€‚</li>
<li>è³‡æ–™ã‚’ç½®ãã“ã¨ã‚’ç›®çš„ã«ã™ã‚‹ç¤¾å“¡ã‚‚ã„ã‚‹ã®ã§ã€è³‡æ–™ã¯ã‚ãªãŸãŒæ„å›³ã—ãŸå ´æ‰€ã«ã¯ç½®ã‹ã‚Œã¾ã›ã‚“ã€‚</li>
<li>ãƒ‡ã‚¹ã‚¯ãŒã©ã‚“ã©ã‚“æ±šããªã£ã¦ã„ãã€å¿…è¦ãªè³‡æ–™ã‚’æ¢ã™ã®ã«è‹¦åŠ´ã—ã¾ã™ã€‚</li>
<li>é–“é•ã£ãŸè³‡æ–™ã‚’ä½¿ã£ã¦ä»•äº‹ã‚’ã™ã‚‹å¯èƒ½æ€§ã‚‚å‡ºã¦ãã¾ã™ã€‚</li>
<li>ã“ã®ã‚ˆã†ãªçŠ¶æ³ã«ãªã£ãŸå ´åˆã€ã‚ãªãŸãŒã¾ãšæœ€åˆã«è¡Œã†ã®ãŒã€æ•´ç†æ•´é “ã ã¨æ€ã„ã¾ã™ã€‚</li>
</ul>


<p>ã§ã¯ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã¯ã‚³ãƒ¼ãƒ‰ä¸Šã§ä»•äº‹ã‚’ã—ã¦ã„ã‚‹ã¨ã„ã†ã“ã¨ãªã®ã§ã€ãƒ‡ã‚¹ã‚¯ã‚’ã€Œã‚³ãƒ¼ãƒ‰ã€ã€ç½®ã‹ã‚Œã¦ã„ãè³‡æ–™ã‚’ã€Œè¿½åŠ æ©Ÿèƒ½ã€ã¨èª­ã¿æ›¿ãˆã¦ã¿ã¾ã™ã€‚</p>

<ul>
<li>ã‚³ãƒ¼ãƒ‰ã«æ¯æ—¥ã®ã‚ˆã†ã«ã„ã‚ã‚“ãªäººãŒæ©Ÿèƒ½ã‚’è¿½åŠ ã—ã¦ã„ãã¾ã™ã€‚</li>
<li>æ©Ÿèƒ½è¿½åŠ ã‚’ç›®çš„ã«ã™ã‚‹ç¤¾å“¡ã‚‚ã„ã‚‹ã®ã§ã€ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãŒæ„å›³ã—ãŸå ´æ‰€ã«æ©Ÿèƒ½ãŒè¿½åŠ ã•ã‚Œã¾ã›ã‚“ã€‚</li>
<li>ã‚³ãƒ¼ãƒ‰ãŒã©ã‚“ã©ã‚“æ±šããªã£ã¦ã„ãã€å¿…è¦ãªæ©Ÿèƒ½ã‚’èª¿æŸ»ã™ã‚‹ã®ã«è‹¦åŠ´ã—ã¾ã™ã€‚</li>
<li>é–“é•ã£ãŸæ©Ÿèƒ½ã‚’ä½¿ã£ã¦ä»•äº‹ã‚’ã™ã‚‹å¯èƒ½æ€§ã‚‚å‡ºã¦ãã¾ã™ã€‚(=ãƒã‚°ã‚’ä½œã‚Šå‡ºã™)</li>
<li>ã“ã®ã‚ˆã†ãªçŠ¶æ³ã«ãªã£ãŸå ´åˆã€ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãŒã¾ãšæœ€åˆã«è¡Œã†ã®ãŒã€æ•´ç†æ•´é “(=ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°)ã ã¨æ€ã„ã¾ã™ã€‚</li>
</ul>


<p>ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãŒä½œæ¥­ã—ã¦ã„ã‚‹ã‚³ãƒ¼ãƒ‰ã‚’ç¶ºéº—ã«ã™ã‚‹ã“ã¨ã«ã‚ˆã‚Šã€å°†æ¥çš„ã«ãƒã‚°ã‚’ä½œã‚Šå‡ºã•ãªã‹ã£ãŸã‚Šã€åŠ¹ç‡è‰¯ãä½œæ¥­ãŒå‡ºæ¥ã‚‹ç’°å¢ƒã‚’ä½œã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚</p>

<h3>ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã‚’æƒ¹ãã¤ã‘ã‚‹ã€å¼•ãæ­¢ã‚ã‚‹ãŸã‚ã®ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°</h3>

<p>æ±šã„ç’°å¢ƒã§åƒãã¨ã„ã†ã“ã¨ã¯ã€ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä¸‹ã’ã€ãƒ ãƒ€ãªä½œæ¥­ã‚’ç™ºç”Ÿã•ã›ã€åŠ¹ç‡ã‚’ä¸‹ã’ã‚‹ã¨ã„ã†ã“ã¨ã§ã™ã€‚æ±šã„ç’°å¢ƒã§åƒãã®ã¯éå¸¸ã«è¾›ãã€å¯èƒ½ã§ã‚ã‚Œã°ã€äººã¯ãã®ç’°å¢ƒã‹ã‚‰é›¢ã‚Œã¦ã„ãã¾ã™ã€‚</p>

<p>ã“ã®æ–‡ç« ã‚‚åŒã˜ã‚ˆã†ã«èª­ã¿æ›¿ãˆã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚</p>

<p>æ±šã„ã‚³ãƒ¼ãƒ‰ä¸Šã§åƒãã¨ã„ã†ã“ã¨ã¯ã€ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä¸‹ã’ã€ãƒ ãƒ€ãªä½œæ¥­ã‚’ç™ºç”Ÿã•ã›ã€åŠ¹ç‡ã‚’ä¸‹ã’ã‚‹ã¨ã„ã†ã“ã¨ã§ã™ã€‚æ±šã„ã‚³ãƒ¼ãƒ‰ä¸Šã§åƒãã®ã¯éå¸¸ã«è¾›ãã€å¯èƒ½ã§ã‚ã‚Œã°ã€ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã¯ãã®ã‚³ãƒ¼ãƒ‰ï¼ˆä¼šç¤¾ï¼‰ã‹ã‚‰é›¢ã‚Œã¦ã„ãã¾ã™ã€‚</p>

<p>ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãŒåƒãå ´æ‰€ã®ç’°å¢ƒã‚’è‰¯ãã™ã‚‹ã“ã¨ã¨ãã®ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã‚’é­…äº†ã™ã‚‹ãŸã‚ã«ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã‚’ã•ã›ã‚‹çŒ¶äºˆã‚’ä¸ãˆã¦ã‚ã’ã¦ãã ã•ã„ã€‚ã“ã®é­…åŠ›çš„ãªä½™è£•ãŒã‚ã‚‹ã“ã¨ã§ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã¨ã—ã¦ã‚„ã‚‹æ°—ãŒå‘ä¸Šã—ã€æ•´ç†ã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰ã§ä»•äº‹ãŒå‡ºæ¥ã‚‹ãŸã‚ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒä¸ŠãŒã‚Šã¾ã™ã€‚åƒãã‚„ã™ã„è·å ´(ã‚³ãƒ¼ãƒ‰)ã§æœ€é«˜ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’å‡ºã™ã“ã¨ãŒå‡ºæ¥ã‚‹ã®ã§ã‚ã‚Œã°ã€ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãŒé›¢è·ã™ã‚‹ã®ã‚’å¼•ãæ­¢ã‚ã‚‹ã®ã«å½¹ç«‹ã¤ã¯ãšã§ã™ã€‚</p>

<h1>ã¾ã¨ã‚</h1>

<p>æ±šã„å ´æ‰€ã§äººã‚’åƒã‹ã›ã‚‹ã“ã¨ãŒè¾›ã„ã¨ã„ã†ã“ã¨ãŒã‚ã‹ã‚‹ã®ã§ã‚ã‚‹ãªã‚‰ã€ãœã²æ±šã„ç’°å¢ƒã§åƒã‹ã•ã‚Œã¦ã„ã‚‹ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã«æƒé™¤ã‚’ã™ã‚‹çŒ¶äºˆã‚’ä¸ãˆã¦ã‚ã’ã¦ãã ã•ã„ã€‚ãã‚ŒãŒé•·æœŸçš„ã«è¦‹ã‚‹ã¨ã‚µãƒ¼ãƒ“ã‚¹ã‚’æ”¹å–„ã‚’æ—©ãã—ã€æŠ€è¡“åŠ›ã®ã‚ã‚‹ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã‚’å®šç€ã•ã›ã€å¤‰åŒ–ã«æŸ”è»Ÿãªã‚µãƒ¼ãƒ“ã‚¹ã‚’æä¾›ã•ã›ã‚‹ã“ã¨ãŒå‡ºæ¥ã‚‹ã‚ˆã†ã«ãªã‚‹ã‹ã‚‰ã§ã™ã€‚</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[è‡ªå·±ç´¹ä»‹]]></title>
    <link href="http://shiraji.github.io/blog/2015/10/17/intro/"/>
    <updated>2015-10-17T07:31:51+09:00</updated>
    <id>http://shiraji.github.io/blog/2015/10/17/intro</id>
    <content type="html"><![CDATA[<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<!-- 728x90 -->


<p><ins class="adsbygoogle"
     style="display:inline-block;width:728px;height:90px"
     data-ad-client="ca-pub-3940616565912592"
     data-ad-slot="7693358062"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>




<!-- more -->


<p>shirajiã¨ç”³ã—ã¾ã™ã€‚GitHubæ´»å‹•ã¯è‹±èªã§è¡Œã£ã¦ã„ã¾ã™ãŒã€ã“ã®ãƒ–ãƒ­ã‚°ã¯æ—¥æœ¬èªã§è¨˜è¼‰ã—ã¦ã„ããŸã„ã¨æ€ã„ã¾ã™ã€‚</p>

<ul>
<li>Twitter: <a href="https://twitter.com/shiraj_i">@shiraj_i</a></li>
<li>Qiita: <a href="http://qiita.com/shiraji">shiraji</a></li>
</ul>


<p>ã‚ˆã‚ã—ããŠé¡˜ã„ã„ãŸã—ã¾ã™ã€‚</p>
]]></content>
  </entry>
  
</feed>
